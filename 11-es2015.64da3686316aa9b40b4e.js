(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{XljO:function(e,c,t){"use strict";t.r(c),t.d(c,"HomebrewModule",(function(){return Mc}));var n=t("ofXK"),i=t("YUcS"),o=t("3Pt+"),a=t("lR5k"),l=t("hctd"),s=t("WVau"),r=t("bVJ3"),d=t("6B8D"),u=t("tyNb"),m=t("97Gz"),p=t("AytR"),g=t("LRne"),h=t("2xJ4"),b=t("JIr8"),f=t("fXoL"),j=t("tk/3");const v=p.a.apiURL+"/homebrew/items",w=p.a.apiURL+"/homebrew/spells";class k{constructor(e){this.http=e}getUserPacks(){return this.http.get(v+"/me",Object(h.b)())}newPack(e){return this.http.post(""+v,e,Object(h.b)()).pipe(Object(b.a)(this.handleError("newPack")))}getPack(e){return this.http.get(`${v}/${e}`,Object(h.b)())}putPack(e){return this.http.put(`${v}/${e._id.$oid}`,e,Object(h.c)()).pipe(Object(b.a)(this.handleError("putPack")))}deletePack(e){return this.http.delete(`${v}/${e._id.$oid}`,Object(h.c)()).pipe(Object(b.a)(this.handleError("deletePack")))}getPackEditors(e){return this.http.get(`${v}/${e}/editors`,Object(h.b)())}getTemplateItems(){return this.http.get(v+"/srd",Object(h.b)())}getUserTomes(){return this.http.get(w+"/me",Object(h.b)())}newTome(e){return this.http.post(""+w,e,Object(h.b)()).pipe(Object(b.a)(this.handleError("newTome")))}getTome(e){return this.http.get(`${w}/${e}`,Object(h.b)())}putTome(e){return this.http.put(`${w}/${e._id.$oid}`,e,Object(h.c)()).pipe(Object(b.a)(this.handleError("putTome")))}deleteTome(e){return this.http.delete(`${w}/${e._id.$oid}`,Object(h.c)()).pipe(Object(b.a)(this.handleError("deleteTome")))}getTomeEditors(e){return this.http.get(`${w}/${e}/editors`,Object(h.b)())}getTemplateSpells(){return this.http.get(w+"/srd",Object(h.b)())}validateSpellJSON(e){return this.http.post(w+"/validate",e,Object(h.b)()).pipe(Object(b.a)(e=>Object(g.a)({success:!1,result:e.error})))}handleError(e="operation"){return c=>(console.error(c),Object(g.a)({error:`${e} failed: ${c.error}`,success:!1}))}}k.\u0275fac=function(e){return new(e||k)(f.nc(j.b))},k.\u0275prov=f.Zb({token:k,factory:k.\u0275fac,providedIn:"root"});var C=t("0IaG"),M=t("kmnG"),O=t("qFsG"),L=t("1jcm"),W=t("bTqV");const x=function(e,c,t,n){return{name:e,public:c,image:t,desc:n}};class S{constructor(){this.public=!1,this.desc="",this.image=""}ngOnInit(){}}S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=f.Xb({type:S,selectors:[["avr-new-pack-dialog"]],decls:19,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],[1,"mat-small"],["mat-button","","mat-dialog-close","","tabindex","1"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Wc(1,"New Pack..."),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.qc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-slide-toggle",4),f.qc("ngModelChange",(function(e){return c.public=e})),f.Wc(7,"Allow public to view"),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"input",5),f.qc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(10,"mat-form-field"),f.jc(11,"textarea",6),f.qc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.jc(12,"p",7),f.Wc(13," These settings can be changed at any time. "),f.ic(),f.ic(),f.jc(14,"mat-dialog-actions"),f.jc(15,"button",8),f.Wc(16,"Cancel"),f.ic(),f.jc(17,"button",9),f.Wc(18," Create "),f.ic(),f.ic()),2&e&&(f.Rb(5),f.zc("ngModel",c.name),f.Rb(1),f.zc("ngModel",c.public),f.Rb(3),f.zc("ngModel",c.image),f.Rb(2),f.zc("ngModel",c.desc),f.Rb(6),f.zc("mat-dialog-close",f.Gc(6,x,c.name,c.public,c.image,c.desc))("disabled",!c.name))},directives:[C.i,C.f,M.c,O.a,o.c,o.n,o.q,L.a,C.c,W.b,C.d],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});const I=["name"];class R{constructor(){this.name="New Item",this.meta="",this.desc=""}}var y=t("hMdP"),z=t("Qu3c"),_=t("NFeN");class q{constructor(e){this.data=e,this.generateMD(this.data.data)}ngOnInit(){}generateMD(e){let c="";c+=`${"# "+e.name}\n${e.desc||""}\n\n`;for(let t of e.items){c+=`${"#### "+t.name}\n${t.meta}\n___\n${t.desc}\n\n`}c=c.replace("\n","\n  "),this.mdData=c}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}}q.\u0275fac=function(e){return new(e||q)(f.dc(C.a))},q.\u0275cmp=f.Xb({type:q,selectors:[["avr-pack-markdown-dialog"]],decls:27,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","readonly","","placeholder","Markdown","rows","10",3,"value"],["mdElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(e,c){if(1&e){const e=f.kc();f.jc(0,"h2",0),f.Wc(1),f.ic(),f.Wc(2,"\n"),f.jc(3,"mat-dialog-content",1),f.Wc(4,"\n  "),f.jc(5,"div",2),f.Wc(6,"\n    "),f.jc(7,"mat-form-field"),f.Wc(8,"\n      "),f.ec(9,"textarea",3,4),f.Wc(11,"\n      "),f.jc(12,"button",5),f.qc("click",(function(){f.Lc(e);const t=f.Ic(10);return c.copy(t)})),f.Wc(13,"\n        "),f.jc(14,"mat-icon"),f.Wc(15,"file_copy"),f.ic(),f.Wc(16,"\n      "),f.ic(),f.Wc(17,"\n    "),f.ic(),f.Wc(18,"\n  "),f.ic(),f.Wc(19,"\n"),f.ic(),f.Wc(20,"\n"),f.jc(21,"mat-dialog-actions"),f.Wc(22,"\n  "),f.jc(23,"button",6),f.Wc(24,"Done"),f.ic(),f.Wc(25,"\n"),f.ic(),f.Wc(26,"\n")}2&e&&(f.Rb(1),f.Yc("Markdown - ",c.data.name,""),f.Rb(8),f.zc("value",c.mdData))},directives:[C.i,C.f,M.c,O.a,W.b,M.j,z.a,_.a,C.c,C.d],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var P=t("7EHt"),D=t("MutI"),E=t("Xa2L");function T(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field"),f.ec(1,"input",9,10),f.jc(3,"button",11),f.qc("click",(function(){f.Lc(e);const c=f.Ic(2);return f.uc().copy(c)})),f.jc(4,"mat-icon"),f.Wc(5,"file_copy"),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(1),f.zc("value",e.shareLink)}}function N(e,c){if(1&e&&(f.jc(0,"mat-list-item"),f.Wc(1),f.vc(2,"async"),f.ic()),2&e){const e=c.$implicit;var t;f.Rb(1),f.Xc(null==(t=f.wc(2,1,e))?null:t.username)}}function $(e,c){if(1&e&&(f.jc(0,"mat-list"),f.Vc(1,N,3,3,"mat-list-item",12),f.ic()),2&e){const e=f.uc();f.Rb(1),f.zc("ngForOf",e.editors)}}function F(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().beginJSONExport()})),f.Wc(2,"Export to JSON "),f.ic(),f.jc(3,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().beginMDExport()})),f.Wc(4,"Export to Homebrewery "),f.ic(),f.ic()}}function V(e,c){1&e&&(f.jc(0,"div"),f.ec(1,"mat-spinner",15),f.ic()),2&e&&(f.Rb(1),f.zc("diameter",24))}const U=function(e){return{public:e}};class J{constructor(e,c,t,n){this.data=e,this.dialog=c,this.hbService=t,this.discord=n,this.public=e.public,this.shareLink="https://avrae.io/homebrew/items/"+e._id.$oid,this.loaded=void 0!==e.items}ngOnInit(){this.owner=this.discord.getUser(this.data.owner),this.loadEditors(),this.loaded||this.loadItems()}loadItems(){const e=this.data._id.$oid;this.hbService.getPack(e).subscribe(e=>{this.data=e,this.loaded=!0})}loadEditors(){const e=this.data._id.$oid;this.hbService.getPackEditors(e).subscribe(e=>{const c=[];e.forEach(e=>c.push(this.discord.getUser(e))),this.editors=c})}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}beginJSONExport(){this.dialog.open(y.a,{data:{name:this.data.name,data:this.data.items},width:"60%"})}beginMDExport(){this.dialog.open(q,{data:{name:this.data.name,data:this.data},width:"60%"})}}J.\u0275fac=function(e){return new(e||J)(f.dc(C.a),f.dc(C.b),f.dc(k),f.dc(m.a))},J.\u0275cmp=f.Xb({type:J,selectors:[["avr-pack-share-dialog"]],decls:31,vars:12,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"mat-elevation-z0"],["class","button-row",4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"],["matInput","","readonly","","placeholder","View Link",3,"value"],["shareLinkElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],[4,"ngFor","ngForOf"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],[3,"diameter"]],template:function(e,c){if(1&e&&(f.jc(0,"h2",0),f.Wc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"p"),f.Wc(5),f.vc(6,"async"),f.ic(),f.jc(7,"mat-slide-toggle",3),f.qc("ngModelChange",(function(e){return c.public=e})),f.Wc(8,"Allow public to view"),f.ic(),f.Vc(9,T,6,1,"mat-form-field",4),f.jc(10,"mat-expansion-panel",5),f.jc(11,"mat-expansion-panel-header"),f.jc(12,"mat-panel-title"),f.Wc(13," Editors "),f.ic(),f.ic(),f.jc(14,"p"),f.Wc(15,"To add or remove an editor, run the command "),f.jc(16,"kbd"),f.Wc(17,"!pack editor @user"),f.ic(),f.Wc(18," in Discord!"),f.ic(),f.Vc(19,$,2,1,"mat-list",4),f.ic(),f.jc(20,"mat-expansion-panel",5),f.jc(21,"mat-expansion-panel-header"),f.jc(22,"mat-panel-title"),f.Wc(23," Export "),f.ic(),f.ic(),f.Vc(24,F,5,0,"div",6),f.Vc(25,V,2,1,"div",4),f.ic(),f.ic(),f.ic(),f.jc(26,"mat-dialog-actions"),f.jc(27,"button",7),f.Wc(28,"Cancel"),f.ic(),f.jc(29,"button",8),f.Wc(30," Done "),f.ic(),f.ic()),2&e){var t;f.Rb(1),f.Yc("Share ",c.data.name,""),f.Rb(4),f.Yc(" Owner: ",null==(t=f.wc(6,8,c.owner))?null:t.username," "),f.Rb(2),f.zc("ngModel",c.public),f.Rb(2),f.zc("ngIf",c.public),f.Rb(10),f.zc("ngIf",null==c.editors?null:c.editors.length),f.Rb(5),f.zc("ngIf",c.loaded),f.Rb(1),f.zc("ngIf",!c.loaded),f.Rb(4),f.zc("mat-dialog-close",f.Dc(10,U,c.public))}},directives:[C.i,C.f,L.a,o.n,o.q,n.t,P.c,P.g,P.h,C.c,W.b,C.d,M.c,O.a,M.j,z.a,_.a,D.a,n.s,D.d,E.c],pipes:[n.b],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.button-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:4px}"]});var A=t("/t3+"),X=t("XiUz"),Y=t("Wp6s");function B(e,c){if(1&e&&(f.jc(0,"mat-card-content"),f.jc(1,"p"),f.Wc(2),f.ic(),f.ic()),2&e){const e=f.uc().$implicit;f.Rb(2),f.Yc(" ",e.desc," ")}}function G(e,c){if(1&e){const e=f.kc();f.jc(0,"div",8),f.jc(1,"mat-card"),f.jc(2,"mat-card-header"),f.jc(3,"mat-card-title"),f.Wc(4),f.ic(),f.jc(5,"mat-card-subtitle"),f.Wc(6),f.ic(),f.ic(),f.ec(7,"img",9),f.Vc(8,B,3,1,"mat-card-content",10),f.jc(9,"mat-card-actions"),f.jc(10,"a",11),f.Wc(11,"EDIT"),f.ic(),f.jc(12,"button",12),f.qc("click",(function(){f.Lc(e);const t=c.$implicit;return f.uc(2).beginShare(t)})),f.Wc(13,"SHARE"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=c.$implicit,n=f.uc(2);var t;f.Rb(4),f.Xc(e.name),f.Rb(2),f.Zc("By ",(null==(t=n.owners.get(e.owner))?null:t.username)||"loading..."," - ",e.numItems," items "),f.Rb(1),f.zc("src",e.image||"../../../../assets/img/pack.png",f.Nc),f.Rb(1),f.zc("ngIf",e.desc),f.Rb(2),f.Ac("routerLink",e._id.$oid)}}function H(e,c){if(1&e&&(f.jc(0,"div",6),f.Vc(1,G,14,6,"div",7),f.ic()),2&e){const e=f.uc();f.Rb(1),f.zc("ngForOf",e.packs)}}function Z(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-card"),f.jc(2,"p"),f.Wc(3,"Looks like you don't have any packs yet."),f.ic(),f.jc(4,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().beginNew()})),f.Wc(5,"Create One"),f.ic(),f.ic(),f.ic()}}class K{constructor(e,c,t,n,i){this.homebrewService=e,this.discord=c,this.dialog=t,this.router=n,this.route=i,this.owners=new Map}ngOnInit(){this.getPacks()}getPacks(){this.homebrewService.getUserPacks().subscribe(e=>{this.packs=e;const c=new Set;for(const t of e)c.has(t.owner)||(c.add(t.owner),this.discord.getUser(t.owner).subscribe(e=>this.owners.set(t.owner,e)))})}beginNew(){this.dialog.open(S,{width:"60%",disableClose:!0}).afterClosed().subscribe(e=>{if(e){let c={name:e.name,public:e.public,desc:e.desc,image:e.image};this.new(c)}})}beginShare(e){this.dialog.open(J,{data:e,width:"40%",disableClose:!0}).afterClosed().subscribe(c=>{c&&(console.log(c),e=Object.assign(e,c),this.commit(e))})}new(e){this.homebrewService.newPack(e).subscribe(e=>{e.success&&this.router.navigate([e.packId],{relativeTo:this.route})})}commit(e){this.homebrewService.putPack(e).subscribe(e=>{console.log(e)})}}K.\u0275fac=function(e){return new(e||K)(f.dc(k),f.dc(m.a),f.dc(C.b),f.dc(u.b),f.dc(u.a))},K.\u0275cmp=f.Xb({type:K,selectors:[["avr-items"]],decls:10,vars:2,consts:[["color","primary",1,"mat-elevation-z2"],[1,"toolbar-spacer"],["mat-icon-button","",3,"click"],["aria-label","New Pack"],["class","container","fxLayout","row wrap","fxLayoutAlign","space-around",4,"ngIf"],["class","container",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-around",1,"container"],["class","pack-tile","fxFlex","32%",4,"ngFor","ngForOf"],["fxFlex","32%",1,"pack-tile"],["mat-card-image","","alt","Pack Image",3,"src"],[4,"ngIf"],["mat-button","",3,"routerLink"],["mat-button","",3,"click"],[1,"container"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"mat-toolbar",0),f.jc(1,"span"),f.Wc(2,"Your Packs"),f.ic(),f.ec(3,"span",1),f.jc(4,"span"),f.jc(5,"button",2),f.qc("click",(function(){return c.beginNew()})),f.jc(6,"mat-icon",3),f.Wc(7,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.Vc(8,H,2,1,"div",4),f.Vc(9,Z,6,0,"div",5)),2&e&&(f.Rb(8),f.zc("ngIf",c.packs&&c.packs.length),f.Rb(1),f.zc("ngIf",c.packs&&!c.packs.length))},directives:[A.a,W.b,_.a,n.t,X.f,X.e,n.s,X.b,Y.a,Y.f,Y.m,Y.l,Y.g,Y.b,W.a,u.c,Y.d],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container[_ngcontent-%COMP%], .pack-tile[_ngcontent-%COMP%]{margin:4px}"]});var Q=t("5+WD"),ee=t("9qBq"),ce=t("XwxW"),te=t("QAUA");class ne{constructor(e){this.data=e}ngOnInit(){}}function ie(e,c){if(1&e){const e=f.kc();f.jc(0,"button",9),f.qc("click",(function(){f.Lc(e);return f.uc().beginDelete()})),f.Wc(1,"Delete"),f.ic()}}ne.\u0275fac=function(e){return new(e||ne)(f.dc(C.a))},ne.\u0275cmp=f.Xb({type:ne,selectors:[["avr-pack-delete-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Wc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"p"),f.Wc(4),f.jc(5,"b"),f.Wc(6,"This cannot be undone."),f.ic(),f.ic(),f.ic(),f.jc(7,"mat-dialog-actions"),f.jc(8,"button",2),f.Wc(9,"Cancel"),f.ic(),f.jc(10,"button",3),f.Wc(11," Delete "),f.ic(),f.ic()),2&e&&(f.Rb(1),f.Yc("Deleting ",c.data.name,"..."),f.Rb(3),f.Yc(" Are you sure you want to delete ",c.data.name,"? This will remove the pack from all editors' libraries, and invalidate any sharing links. "),f.Rb(6),f.zc("mat-dialog-close",!0))},directives:[C.i,C.f,C.c,W.b,C.d],styles:[""]});const oe=function(e,c,t){return{name:e,image:c,desc:t}};class ae{constructor(e,c,t){this.data=e,this.dialog=c,this.dialogRef=t,this.name=e.name,this.image=e.image,this.desc=e.desc,this.isOwner=Object(h.d)().id===e.owner}ngOnInit(){}beginDelete(){this.dialog.open(ne,{data:this.data,width:"40%"}).afterClosed().subscribe(e=>{e&&this.dialogRef.close({delete:!0})})}}ae.\u0275fac=function(e){return new(e||ae)(f.dc(C.a),f.dc(C.b),f.dc(C.h))},ae.\u0275cmp=f.Xb({type:ae,selectors:[["avr-pack-options-dialog"]],decls:16,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Wc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.qc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-form-field"),f.jc(7,"input",4),f.qc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"textarea",5),f.qc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(10,"mat-dialog-actions"),f.jc(11,"button",6),f.Wc(12,"Cancel"),f.ic(),f.jc(13,"button",7),f.Wc(14," Save "),f.ic(),f.Vc(15,ie,2,0,"button",8),f.ic()),2&e&&(f.Rb(1),f.Xc(c.data.name),f.Rb(4),f.zc("ngModel",c.name),f.Rb(2),f.zc("ngModel",c.image),f.Rb(2),f.zc("ngModel",c.desc),f.Rb(4),f.zc("mat-dialog-close",f.Fc(7,oe,c.name,c.image,c.desc))("disabled",!c.name),f.Rb(2),f.zc("ngIf",c.isOwner))},directives:[C.i,C.f,M.c,O.a,o.c,o.n,o.q,C.c,W.b,C.d,n.t],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var le=t("dNgK");function se(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field",5),f.jc(1,"input",16),f.qc("change",(function(){f.Lc(e);return f.uc(2).emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc(2).item.image=c})),f.ic(),f.ic()}if(2&e){const e=f.uc(2);f.Rb(1),f.zc("ngModel",e.item.image)}}function re(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",17),f.qc("click",(function(){f.Lc(e);const c=f.uc(2);return c.item.image="",c.emitChange()})),f.jc(2,"mat-icon",18),f.Wc(3,"add_photo_alternate"),f.ic(),f.ic(),f.ic()}}function de(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",19),f.qc("click",(function(){f.Lc(e);return f.uc(2).moveUp.emit()})),f.jc(2,"mat-icon",20),f.Wc(3,"arrow_upward"),f.ic(),f.ic(),f.ic()}}function ue(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",21),f.qc("click",(function(){f.Lc(e);return f.uc(2).moveDown.emit()})),f.jc(2,"mat-icon",22),f.Wc(3,"arrow_downward"),f.ic(),f.ic(),f.ic()}}function me(e,c){if(1&e){const e=f.kc();f.jc(0,"div",3),f.jc(1,"div",4),f.jc(2,"mat-form-field",5),f.jc(3,"input",6),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().item.name=c})),f.ic(),f.ic(),f.Vc(4,se,2,1,"mat-form-field",7),f.ic(),f.jc(5,"mat-form-field"),f.jc(6,"textarea",8),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().item.meta=c})),f.ic(),f.ic(),f.jc(7,"mat-form-field"),f.jc(8,"textarea",9),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().item.desc=c})),f.ic(),f.ic(),f.ic(),f.jc(9,"div",10),f.Vc(10,re,4,0,"span",7),f.jc(11,"span",5),f.jc(12,"button",11),f.qc("click",(function(){f.Lc(e);return f.uc().beginJSONExport()})),f.jc(13,"mat-icon",12),f.Wc(14,"vertical_align_top"),f.ic(),f.ic(),f.ic(),f.Vc(15,de,4,0,"span",7),f.Vc(16,ue,4,0,"span",7),f.ec(17,"span",13),f.jc(18,"span",5),f.jc(19,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().delete.emit()})),f.jc(20,"mat-icon",15),f.Wc(21,"delete"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(3),f.zc("ngModel",e.item.name),f.Rb(1),f.zc("ngIf",null!=e.item.image),f.Rb(2),f.zc("ngModel",e.item.meta),f.Rb(2),f.zc("ngModel",e.item.desc),f.Rb(2),f.zc("ngIf",void 0===e.item.image),f.Rb(5),f.zc("ngIf",!e.isFirst),f.Rb(1),f.zc("ngIf",!e.isLast)}}class pe{constructor(e){this.dialog=e,this.moveUp=new f.u,this.moveDown=new f.u,this.changed=new f.u,this.opened=new f.u,this.delete=new f.u}ngOnInit(){}emitChange(){this.changed.emit()}beginJSONExport(){this.dialog.open(y.a,{data:{name:this.item.name,data:this.item},width:"60%"})}}pe.\u0275fac=function(e){return new(e||pe)(f.dc(C.b))},pe.\u0275cmp=f.Xb({type:pe,selectors:[["avr-item-detail"]],inputs:{item:"item",isFirst:"isFirst",isLast:"isLast"},outputs:{moveUp:"moveUp",moveDown:"moveDown",changed:"changed",opened:"opened",delete:"delete"},decls:7,vars:2,consts:[[3,"opened"],["markdown","",3,"data"],["matExpansionPanelContent",""],[1,"form-container"],["fxLayout","row","fxLayoutGap","4px"],["fxFlex",""],["matInput","","placeholder","Name",3,"ngModel","change","ngModelChange"],["fxFlex","",4,"ngIf"],["matInput","","placeholder","Meta","rows","3",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Description","rows","7",3,"ngModel","change","ngModelChange"],["fxLayout","row",1,"actions"],["mat-icon-button","","matTooltip","Export to JSON",3,"click"],["aria-label","Export to JSON"],["fxFlex","grow"],["mat-icon-button","","color","warn",3,"click"],["aria-label","Delete"],["matInput","","placeholder","Image URL",3,"ngModel","change","ngModelChange"],["mat-icon-button","","matTooltip","Add image",3,"click"],["aria-label","Add image"],["mat-icon-button","","matTooltip","Move Up",3,"click"],["aria-label","Move Up"],["mat-icon-button","","matTooltip","Move Down",3,"click"],["aria-label","Move Down"]],template:function(e,c){1&e&&(f.jc(0,"mat-expansion-panel",0),f.qc("opened",(function(){return c.opened.emit()})),f.jc(1,"mat-expansion-panel-header"),f.jc(2,"mat-panel-title"),f.jc(3,"div"),f.Wc(4),f.ic(),f.ic(),f.ec(5,"mat-panel-description",1),f.ic(),f.Vc(6,me,22,7,"ng-template",2),f.ic()),2&e&&(f.Rb(4),f.Yc(" ",c.item.name," "),f.Rb(1),f.zc("data",c.item.meta.split("\n")[0]))},directives:[P.c,P.g,P.h,P.f,a.a,P.e,X.f,X.g,M.c,X.b,O.a,o.c,o.n,o.q,n.t,W.b,z.a,_.a],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}mat-panel-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto 0}"]});var ge=t("WJbf");function he(e,c){if(1&e){const e=f.kc();f.jc(0,"avr-item-detail",22),f.qc("moveUp",(function(){f.Lc(e);const t=c.$implicit;return f.uc(3).moveUp(t)}))("moveDown",(function(){f.Lc(e);const t=c.$implicit;return f.uc(3).moveDown(t)}))("changed",(function(){f.Lc(e);return f.uc(3).ensureChangesNotif()}))("opened",(function(){f.Lc(e);const t=c.$implicit;return f.uc(3).selectedItem=t}))("delete",(function(){f.Lc(e);const t=c.$implicit;return f.uc(3).deleteItem(t)})),f.ic()}if(2&e){const e=c.$implicit,t=c.first,n=c.last;f.zc("item",e)("isFirst",t)("isLast",n)}}function be(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-accordion"),f.Vc(2,he,1,3,"avr-item-detail",14),f.jc(3,"mat-card",15),f.jc(4,"span",16),f.Wc(5,"New..."),f.ic(),f.ec(6,"span",4),f.jc(7,"span"),f.jc(8,"button",17),f.qc("click",(function(){f.Lc(e);return f.uc(2).beginNewFromJSON()})),f.jc(9,"mat-icon",18),f.Wc(10,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(11,"button",19),f.qc("click",(function(){f.Lc(e);return f.uc(2).beginNewFromSRD()})),f.jc(12,"mat-icon",20),f.Wc(13,"scanner"),f.ic(),f.ic(),f.jc(14,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc(2).newLooseItem()})),f.jc(15,"mat-icon",21),f.Wc(16,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc(2);f.Rb(2),f.zc("ngForOf",e.pack.items)}}function fe(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-card"),f.jc(2,"p"),f.Wc(3,"Looks like this pack is empty."),f.ic(),f.jc(4,"button",23),f.qc("click",(function(){f.Lc(e);return f.uc(2).newLooseItem()})),f.Wc(5,"Make an Item"),f.ic(),f.jc(6,"button",17),f.qc("click",(function(){f.Lc(e);return f.uc(2).beginNewFromJSON()})),f.jc(7,"mat-icon",18),f.Wc(8,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(9,"button",19),f.qc("click",(function(){f.Lc(e);return f.uc(2).beginNewFromSRD()})),f.jc(10,"mat-icon",20),f.Wc(11,"scanner"),f.ic(),f.ic(),f.ic(),f.ic()}}const je=function(e,c){return{name:e,icon_url:c}},ve=function(e){return{name:"Description",value:e}},we=function(e){return[e]},ke=function(){return{text:"Homebrew content.",icon_url:"../../../../assets/img/homebrew.png"}};function Ce(e,c){if(1&e&&f.ec(0,"avr-discord-embed",24),2&e){const e=f.uc(2);f.zc("author",f.Ec(6,je,e.user.username,e.user.avatarUrl))("title",e.selectedItem.name)("description",e.selectedItem.meta)("fields",f.Dc(11,we,f.Dc(9,ve,e.selectedItem.desc)))("thumbnail",e.selectedItem.image)("footer",f.Cc(13,ke))}}function Me(e,c){if(1&e&&f.ec(0,"avr-discord-embed",25),2&e){const e=f.uc(2);f.zc("author",f.Ec(2,je,e.user.username,e.user.avatarUrl))("footer",f.Cc(5,ke))}}function Oe(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"mat-toolbar",1),f.jc(2,"span"),f.jc(3,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().back()})),f.jc(4,"mat-icon",3),f.Wc(5,"arrow_back"),f.ic(),f.ic(),f.ic(),f.jc(6,"span"),f.Wc(7),f.ic(),f.ec(8,"span",4),f.jc(9,"span"),f.jc(10,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().commit()})),f.jc(11,"mat-icon",5),f.Wc(12,"save"),f.ic(),f.ic(),f.jc(13,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().beginSettings()})),f.jc(14,"mat-icon",6),f.Wc(15,"settings"),f.ic(),f.ic(),f.jc(16,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().beginShare()})),f.jc(17,"mat-icon",7),f.Wc(18,"launch"),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(19,"div",8),f.Vc(20,be,17,1,"div",9),f.Vc(21,fe,12,0,"div",9),f.jc(22,"div",10),f.Vc(23,Ce,1,14,"avr-discord-embed",11),f.Vc(24,Me,1,6,"avr-discord-embed",12),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(7),f.Yc(" ",e.pack.name," "),f.Rb(13),f.zc("ngIf",e.pack.items.length),f.Rb(1),f.zc("ngIf",!e.pack.items.length),f.Rb(2),f.zc("ngIf",e.selectedItem),f.Rb(1),f.zc("ngIf",!e.selectedItem)}}function Le(e,c){1&e&&(f.jc(0,"div"),f.jc(1,"div",26),f.jc(2,"mat-card"),f.ec(3,"mat-spinner",27),f.ic(),f.ic(),f.ic()),2&e&&(f.Rb(3),f.zc("diameter",24))}function We(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"div",26),f.jc(2,"mat-card"),f.jc(3,"p"),f.Wc(4,"You do not have permission to edit this pack."),f.ic(),f.jc(5,"button",23),f.qc("click",(function(){f.Lc(e);return f.uc().back()})),f.Wc(6,"Go Back"),f.ic(),f.ic(),f.ic(),f.ic()}}class xe{constructor(e,c,t,n,i,o,a){this.route=e,this.homebrewService=c,this.dashboardService=t,this.location=n,this.dialog=i,this.router=o,this.snackBar=a,this.user=Object(h.d)(),this.changesOpen=!1}ngOnInit(){this.getPack()}ngOnDestroy(){this.snackBar.dismiss()}getPack(){const e=this.route.snapshot.paramMap.get("pack");this.homebrewService.getPack(e).subscribe(e=>{this.pack=e,this.calcCanEdit()})}calcCanEdit(){if(this.pack&&this.user)if(this.isOwner=this.user.id===this.pack.owner,this.isOwner)this.canEdit=!0;else{const e=this.pack._id.$oid;this.homebrewService.getPackEditors(e).subscribe(e=>this.canEdit=e.some(e=>e===this.user.id))}}newLooseItem(){this.pack.items.push(new R),this.ensureChangesNotif()}deleteItem(e){this.pack.items=this.pack.items.filter(c=>c!==e),this.ensureChangesNotif()}ensureChangesNotif(){if(!this.changesOpen){this.changesOpen=!0,this.snackBar.open("You have unsaved changes!","Save",{duration:-1,horizontalPosition:"right"}).onAction().subscribe(()=>{this.commit()})}}beginShare(){this.dialog.open(J,{data:this.pack,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),this.pack=Object.assign(this.pack,e),this.commit())})}beginSettings(){this.dialog.open(ae,{data:this.pack,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),e.delete?this.delete():(this.pack=Object.assign(this.pack,e),this.commit()))})}beginNewFromJSON(){const e=this.dialog.open(ee.a,{width:"60%",disableClose:!0,data:{validator:c=>this.validatePackJSON(e,c)}});e.afterClosed().subscribe(e=>{if(e){const c=e;console.log(c),c instanceof Array?this.pack.items.push(...c):this.pack.items.push(c),this.ensureChangesNotif()}})}beginNewFromSRD(){this.dialog.open(ce.a,{width:"60%",disableClose:!0,data:{getter:()=>this.homebrewService.getTemplateItems(),namer:e=>e.name}}).afterClosed().subscribe(e=>{e&&(this.pack.items.push(e),this.ensureChangesNotif())})}packIsValid(e){return e instanceof Array?Boolean(e.length)&&e.every(e=>this.objectIsItem(e)):!!e&&this.objectIsItem(e)}validatePackJSON(e,c){e.componentInstance.loading=!1,this.packIsValid(c)?e.close(JSON.parse(e.componentInstance.data)):e.componentInstance.error="Invalid pack data"}objectIsItem(e){return I.every(c=>c in e)}commit(){this.homebrewService.putPack(this.pack).subscribe(e=>{console.log(e),this.changesOpen=!1,this.snackBar.open(`${e} Use "!pack ${this.pack.name}" to activate the pack in Discord!`,null,{horizontalPosition:"right"})})}delete(){this.homebrewService.deletePack(this.pack).subscribe(e=>{console.log(e),this.router.navigate(["../"],{relativeTo:this.route})})}back(){this.location.back()}moveUp(e){const c=this.pack.items.indexOf(e),t=c-1;t>-1&&(Object(Q.a)(this.pack.items,c,t),this.ensureChangesNotif())}moveDown(e){const c=this.pack.items.indexOf(e),t=c+1;t<this.pack.items.length&&(Object(Q.a)(this.pack.items,c,t),this.ensureChangesNotif())}}xe.\u0275fac=function(e){return new(e||xe)(f.dc(u.a),f.dc(k),f.dc(te.a),f.dc(n.n),f.dc(C.b),f.dc(u.b),f.dc(le.b))},xe.\u0275cmp=f.Xb({type:xe,selectors:[["avr-pack-detail"]],decls:3,vars:3,consts:[[4,"ngIf"],["color","primary",1,"pack-toolbar"],["mat-icon-button","",3,"click"],["aria-label","Back"],[1,"toolbar-spacer"],["aria-label","Save"],["aria-label","Settings"],["aria-label","Share"],["fxLayout","row","fxLayoutGap","8px",1,"container"],["class","item-list","fxFlex","grow",4,"ngIf"],["fxFlex","grow",1,"item-preview","mat-typography","mat-elevation-z3"],[3,"author","title","description","fields","thumbnail","footer",4,"ngIf"],["title","No item selected.","description","Click on an item on the left to see a preview!",3,"author","footer",4,"ngIf"],["fxFlex","grow",1,"item-list"],[3,"item","isFirst","isLast","moveUp","moveDown","changed","opened","delete",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"new-item-card"],[1,"no-text-cursor"],["mat-icon-button","","matTooltip","Import from JSON",3,"click"],["aria-label","Import from JSON"],["mat-icon-button","","matTooltip","Copy SRD item",3,"click"],["aria-label","From existing item"],["aria-label","New"],[3,"item","isFirst","isLast","moveUp","moveDown","changed","opened","delete"],["mat-raised-button","","color","accent",3,"click"],[3,"author","title","description","fields","thumbnail","footer"],["title","No item selected.","description","Click on an item on the left to see a preview!",3,"author","footer"],[1,"container"],[3,"diameter"]],template:function(e,c){1&e&&(f.Vc(0,Oe,25,5,"div",0),f.Vc(1,Le,4,1,"div",0),f.Vc(2,We,7,0,"div",0)),2&e&&(f.zc("ngIf",c.pack&&null!=c.canEdit),f.Rb(1),f.zc("ngIf",!c.pack),f.Rb(1),f.zc("ngIf",c.pack&&!c.canEdit))},directives:[n.t,A.a,W.b,_.a,X.f,X.g,X.b,P.a,n.s,Y.a,X.e,z.a,pe,ge.a,E.c],styles:[".pack-toolbar[_ngcontent-%COMP%]{height:64px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.item-list[_ngcontent-%COMP%], .item-preview[_ngcontent-%COMP%]{max-height:calc(100vh - 192px);overflow-y:auto}.container[_ngcontent-%COMP%]{margin:8px}.new-item-card[_ngcontent-%COMP%]{height:48px;padding:0 24px}.no-text-cursor[_ngcontent-%COMP%]{cursor:default}"]});const Se=function(e,c,t,n){return{name:e,public:c,image:t,desc:n}};class Ie{constructor(){this.public=!1,this.desc="",this.image=""}ngOnInit(){}}Ie.\u0275fac=function(e){return new(e||Ie)},Ie.\u0275cmp=f.Xb({type:Ie,selectors:[["avr-new-pack-dialog"]],decls:19,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],[1,"mat-small"],["mat-button","","mat-dialog-close","","tabindex","1"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Wc(1,"New Tome..."),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.qc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-slide-toggle",4),f.qc("ngModelChange",(function(e){return c.public=e})),f.Wc(7,"Allow public to view"),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"input",5),f.qc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(10,"mat-form-field"),f.jc(11,"textarea",6),f.qc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.jc(12,"p",7),f.Wc(13," These settings can be changed at any time. "),f.ic(),f.ic(),f.jc(14,"mat-dialog-actions"),f.jc(15,"button",8),f.Wc(16,"Cancel"),f.ic(),f.jc(17,"button",9),f.Wc(18," Create "),f.ic(),f.ic()),2&e&&(f.Rb(5),f.zc("ngModel",c.name),f.Rb(1),f.zc("ngModel",c.public),f.Rb(3),f.zc("ngModel",c.image),f.Rb(2),f.zc("ngModel",c.desc),f.Rb(6),f.zc("mat-dialog-close",f.Gc(6,Se,c.name,c.public,c.image,c.desc))("disabled",!c.name))},directives:[C.i,C.f,M.c,O.a,o.c,o.n,o.q,L.a,C.c,W.b,C.d],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var Re=t("jgxE");class ye{constructor(e){this.data=e,this.generateMD(this.data.data)}ngOnInit(){}generateMD(e){let c="";c+=`${"# "+e.name}\n${e.desc||""}\n\n`;for(const t of e.spells)c+=this.generateSpellMD(t);c=c.replace("\n","\n  "),this.mdData=c}generateSpellMD(e){const c="#### "+e.name,t=e.level?`${Object(Re.d)(e.level)} ${Object(Re.e)(e.school)}`:`${Object(Re.e)(e.school)} ${Object(Re.d)(e.level)}`,n=`- **Casting Time:** ${e.casttime+(e.ritual?" (ritual)":"")}\n- **Range:** ${e.range}\n- **Components:** ${Object(Re.c)(e)}\n- **Duration:** ${(e.concentration?"Concentration, up to ":"")+e.duration}`;let i=e.description;return e.higherlevels&&(i=`${i}\n\n**At Higher Levels:** ${e.higherlevels}`),`${c}\n*${t}*\n___\n${n}\n\n${i}\n\n`}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}}function ze(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field"),f.ec(1,"input",9,10),f.jc(3,"button",11),f.qc("click",(function(){f.Lc(e);const c=f.Ic(2);return f.uc().copy(c)})),f.jc(4,"mat-icon"),f.Wc(5,"file_copy"),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(1),f.zc("value",e.shareLink)}}function _e(e,c){if(1&e&&(f.jc(0,"mat-list-item"),f.Wc(1),f.vc(2,"async"),f.ic()),2&e){const e=c.$implicit;var t;f.Rb(1),f.Xc(null==(t=f.wc(2,1,e))?null:t.username)}}function qe(e,c){if(1&e&&(f.jc(0,"mat-list"),f.Vc(1,_e,3,3,"mat-list-item",12),f.ic()),2&e){const e=f.uc();f.Rb(1),f.zc("ngForOf",e.editors)}}function Pe(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().beginJSONExport()})),f.Wc(2,"Export to JSON "),f.ic(),f.jc(3,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().beginMDExport()})),f.Wc(4,"Export to Homebrewery "),f.ic(),f.ic()}}function De(e,c){1&e&&(f.jc(0,"div"),f.ec(1,"mat-spinner",15),f.ic()),2&e&&(f.Rb(1),f.zc("diameter",24))}ye.\u0275fac=function(e){return new(e||ye)(f.dc(C.a))},ye.\u0275cmp=f.Xb({type:ye,selectors:[["avr-tome-markdown-dialog"]],decls:27,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","readonly","","placeholder","Markdown","rows","10",3,"value"],["mdElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(e,c){if(1&e){const e=f.kc();f.jc(0,"h2",0),f.Wc(1),f.ic(),f.Wc(2,"\n"),f.jc(3,"mat-dialog-content",1),f.Wc(4,"\n  "),f.jc(5,"div",2),f.Wc(6,"\n    "),f.jc(7,"mat-form-field"),f.Wc(8,"\n      "),f.ec(9,"textarea",3,4),f.Wc(11,"\n      "),f.jc(12,"button",5),f.qc("click",(function(){f.Lc(e);const t=f.Ic(10);return c.copy(t)})),f.Wc(13,"\n        "),f.jc(14,"mat-icon"),f.Wc(15,"file_copy"),f.ic(),f.Wc(16,"\n      "),f.ic(),f.Wc(17,"\n    "),f.ic(),f.Wc(18,"\n  "),f.ic(),f.Wc(19,"\n"),f.ic(),f.Wc(20,"\n"),f.jc(21,"mat-dialog-actions"),f.Wc(22,"\n  "),f.jc(23,"button",6),f.Wc(24,"Done"),f.ic(),f.Wc(25,"\n"),f.ic(),f.Wc(26,"\n")}2&e&&(f.Rb(1),f.Yc("Markdown - ",c.data.name,""),f.Rb(8),f.zc("value",c.mdData))},directives:[C.i,C.f,M.c,O.a,W.b,M.j,z.a,_.a,C.c,C.d],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});const Ee=function(e){return{public:e}};class Te{constructor(e,c,t,n){this.data=e,this.dialog=c,this.hbService=t,this.discord=n,this.public=e.public,this.shareLink="https://avrae.io/homebrew/spells/"+e._id.$oid,this.loaded=void 0!==e.spells}ngOnInit(){this.owner=this.discord.getUser(this.data.owner),this.loadEditors(),this.loaded||this.loadSpells()}loadEditors(){const e=this.data._id.$oid;this.hbService.getTomeEditors(e).subscribe(e=>{const c=[];e.forEach(e=>c.push(this.discord.getUser(e))),this.editors=c})}loadSpells(){const e=this.data._id.$oid;this.hbService.getTome(e).subscribe(e=>{this.data=e,this.loaded=!0})}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}beginJSONExport(){this.dialog.open(y.a,{data:{name:this.data.name,data:this.data.spells},width:"60%"})}beginMDExport(){this.dialog.open(ye,{data:{name:this.data.name,data:this.data},width:"60%"})}}function Ne(e,c){if(1&e&&(f.jc(0,"mat-card-content"),f.jc(1,"p"),f.Wc(2),f.ic(),f.ic()),2&e){const e=f.uc().$implicit;f.Rb(2),f.Yc(" ",e.desc," ")}}function $e(e,c){if(1&e){const e=f.kc();f.jc(0,"div",8),f.jc(1,"mat-card"),f.jc(2,"mat-card-header"),f.jc(3,"mat-card-title"),f.Wc(4),f.ic(),f.jc(5,"mat-card-subtitle"),f.Wc(6),f.ic(),f.ic(),f.ec(7,"img",9),f.Vc(8,Ne,3,1,"mat-card-content",10),f.jc(9,"mat-card-actions"),f.jc(10,"a",11),f.Wc(11,"EDIT"),f.ic(),f.jc(12,"button",12),f.qc("click",(function(){f.Lc(e);const t=c.$implicit;return f.uc(2).beginShare(t)})),f.Wc(13,"SHARE"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=c.$implicit,n=f.uc(2);var t;f.Rb(4),f.Xc(e.name),f.Rb(2),f.Zc("By ",(null==(t=n.owners.get(e.owner))?null:t.username)||"loading..."," - ",e.numSpells," spells "),f.Rb(1),f.zc("src",e.image||"../../../../assets/img/tome.png",f.Nc),f.Rb(1),f.zc("ngIf",e.desc),f.Rb(2),f.Ac("routerLink",e._id.$oid)}}function Fe(e,c){if(1&e&&(f.jc(0,"div",6),f.Vc(1,$e,14,6,"div",7),f.ic()),2&e){const e=f.uc();f.Rb(1),f.zc("ngForOf",e.tomes)}}function Ve(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-card"),f.jc(2,"p"),f.Wc(3,"Looks like you don't have any tomes yet."),f.ic(),f.jc(4,"button",14),f.qc("click",(function(){f.Lc(e);return f.uc().beginNew()})),f.Wc(5,"Create One"),f.ic(),f.ic(),f.ic()}}Te.\u0275fac=function(e){return new(e||Te)(f.dc(C.a),f.dc(C.b),f.dc(k),f.dc(m.a))},Te.\u0275cmp=f.Xb({type:Te,selectors:[["avr-pack-share-dialog"]],decls:31,vars:12,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"mat-elevation-z0"],["class","button-row",4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"],["matInput","","readonly","","placeholder","View Link",3,"value"],["shareLinkElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],[4,"ngFor","ngForOf"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],[3,"diameter"]],template:function(e,c){if(1&e&&(f.jc(0,"h2",0),f.Wc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"p"),f.Wc(5),f.vc(6,"async"),f.ic(),f.jc(7,"mat-slide-toggle",3),f.qc("ngModelChange",(function(e){return c.public=e})),f.Wc(8,"Allow public to view"),f.ic(),f.Vc(9,ze,6,1,"mat-form-field",4),f.jc(10,"mat-expansion-panel",5),f.jc(11,"mat-expansion-panel-header"),f.jc(12,"mat-panel-title"),f.Wc(13," Editors "),f.ic(),f.ic(),f.jc(14,"p"),f.Wc(15,"To add or remove an editor, run the command "),f.jc(16,"kbd"),f.Wc(17,"!tome editor @user"),f.ic(),f.Wc(18," in Discord!"),f.ic(),f.Vc(19,qe,2,1,"mat-list",4),f.ic(),f.jc(20,"mat-expansion-panel",5),f.jc(21,"mat-expansion-panel-header"),f.jc(22,"mat-panel-title"),f.Wc(23," Export "),f.ic(),f.ic(),f.Vc(24,Pe,5,0,"div",6),f.Vc(25,De,2,1,"div",4),f.ic(),f.ic(),f.ic(),f.jc(26,"mat-dialog-actions"),f.jc(27,"button",7),f.Wc(28,"Cancel"),f.ic(),f.jc(29,"button",8),f.Wc(30," Done "),f.ic(),f.ic()),2&e){var t;f.Rb(1),f.Yc("Share ",c.data.name,""),f.Rb(4),f.Yc(" Owner: ",null==(t=f.wc(6,8,c.owner))?null:t.username," "),f.Rb(2),f.zc("ngModel",c.public),f.Rb(2),f.zc("ngIf",c.public),f.Rb(10),f.zc("ngIf",null==c.editors?null:c.editors.length),f.Rb(5),f.zc("ngIf",c.loaded),f.Rb(1),f.zc("ngIf",!c.loaded),f.Rb(4),f.zc("mat-dialog-close",f.Dc(10,Ee,c.public))}},directives:[C.i,C.f,L.a,o.n,o.q,n.t,P.c,P.g,P.h,C.c,W.b,C.d,M.c,O.a,M.j,z.a,_.a,D.a,n.s,D.d,E.c],pipes:[n.b],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.button-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:4px}"]});class Ue{constructor(e,c,t,n,i){this.homebrewService=e,this.discord=c,this.dialog=t,this.router=n,this.route=i,this.owners=new Map}ngOnInit(){this.getTomes()}getTomes(){this.homebrewService.getUserTomes().subscribe(e=>{this.tomes=e;const c=new Set;for(const t of e)c.has(t.owner)||(c.add(t.owner),this.discord.getUser(t.owner).subscribe(e=>this.owners.set(t.owner,e)))})}beginNew(){this.dialog.open(Ie,{width:"60%",disableClose:!0}).afterClosed().subscribe(e=>{if(e){let c={name:e.name,public:e.public,desc:e.desc,image:e.image};this.new(c)}})}beginShare(e){this.dialog.open(Te,{data:e,width:"40%",disableClose:!0}).afterClosed().subscribe(c=>{c&&(console.log(c),e=Object.assign(e,c),this.commit(e))})}new(e){this.homebrewService.newTome(e).subscribe(e=>{e.success&&this.router.navigate([e.tomeId],{relativeTo:this.route})})}commit(e){this.homebrewService.putTome(e).subscribe(e=>{console.log(e)})}}Ue.\u0275fac=function(e){return new(e||Ue)(f.dc(k),f.dc(m.a),f.dc(C.b),f.dc(u.b),f.dc(u.a))},Ue.\u0275cmp=f.Xb({type:Ue,selectors:[["avr-spells"]],decls:10,vars:2,consts:[["color","primary",1,"mat-elevation-z2"],[1,"toolbar-spacer"],["mat-icon-button","",3,"click"],["aria-label","New Tome"],["class","container","fxLayout","row wrap","fxLayoutAlign","space-around",4,"ngIf"],["class","container",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-around",1,"container"],["class","tome-tile","fxFlex","32%",4,"ngFor","ngForOf"],["fxFlex","32%",1,"tome-tile"],["mat-card-image","","alt","Tome Image",3,"src"],[4,"ngIf"],["mat-button","",3,"routerLink"],["mat-button","",3,"click"],[1,"container"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"mat-toolbar",0),f.jc(1,"span"),f.Wc(2,"Your Tomes"),f.ic(),f.ec(3,"span",1),f.jc(4,"span"),f.jc(5,"button",2),f.qc("click",(function(){return c.beginNew()})),f.jc(6,"mat-icon",3),f.Wc(7,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.Vc(8,Fe,2,1,"div",4),f.Vc(9,Ve,6,0,"div",5)),2&e&&(f.Rb(8),f.zc("ngIf",c.tomes&&c.tomes.length),f.Rb(1),f.zc("ngIf",c.tomes&&!c.tomes.length))},directives:[A.a,W.b,_.a,n.t,X.f,X.e,n.s,X.b,Y.a,Y.f,Y.m,Y.l,Y.g,Y.b,W.a,u.c,Y.d],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container[_ngcontent-%COMP%], .pack-tile[_ngcontent-%COMP%]{margin:4px}"]});class Je{constructor(e){this.data=e}ngOnInit(){}}function Ae(e,c){if(1&e){const e=f.kc();f.jc(0,"button",9),f.qc("click",(function(){f.Lc(e);return f.uc().beginDelete()})),f.Wc(1,"Delete"),f.ic()}}Je.\u0275fac=function(e){return new(e||Je)(f.dc(C.a))},Je.\u0275cmp=f.Xb({type:Je,selectors:[["avr-tome-delete-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Wc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"p"),f.Wc(4),f.jc(5,"b"),f.Wc(6,"This cannot be undone."),f.ic(),f.ic(),f.ic(),f.jc(7,"mat-dialog-actions"),f.jc(8,"button",2),f.Wc(9,"Cancel"),f.ic(),f.jc(10,"button",3),f.Wc(11," Delete "),f.ic(),f.ic()),2&e&&(f.Rb(1),f.Yc("Deleting ",c.data.name,"..."),f.Rb(3),f.Yc(" Are you sure you want to delete ",c.data.name,"? This will remove the tome from all editors' libraries, and invalidate any sharing links. "),f.Rb(6),f.zc("mat-dialog-close",!0))},directives:[C.i,C.f,C.c,W.b,C.d],encapsulation:2});const Xe=function(e,c,t){return{name:e,image:c,desc:t}};class Ye{constructor(e,c,t){this.data=e,this.dialog=c,this.dialogRef=t,this.name=e.name,this.image=e.image,this.desc=e.desc,this.isOwner=Object(h.d)().id===e.owner}ngOnInit(){}beginDelete(){this.dialog.open(Je,{data:this.data,width:"40%"}).afterClosed().subscribe(e=>{e&&this.dialogRef.close({delete:!0})})}}Ye.\u0275fac=function(e){return new(e||Ye)(f.dc(C.a),f.dc(C.b),f.dc(C.h))},Ye.\u0275cmp=f.Xb({type:Ye,selectors:[["avr-tome-options-dialog"]],decls:16,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Wc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.qc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-form-field"),f.jc(7,"input",4),f.qc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"textarea",5),f.qc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(10,"mat-dialog-actions"),f.jc(11,"button",6),f.Wc(12,"Cancel"),f.ic(),f.jc(13,"button",7),f.Wc(14," Save "),f.ic(),f.Vc(15,Ae,2,0,"button",8),f.ic()),2&e&&(f.Rb(1),f.Xc(c.data.name),f.Rb(4),f.zc("ngModel",c.name),f.Rb(2),f.zc("ngModel",c.image),f.Rb(2),f.zc("ngModel",c.desc),f.Rb(4),f.zc("mat-dialog-close",f.Fc(7,Xe,c.name,c.image,c.desc))("disabled",!c.name),f.Rb(2),f.zc("ngIf",c.isOwner))},directives:[C.i,C.f,M.c,O.a,o.c,o.n,o.q,C.c,W.b,C.d,n.t],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var Be=t("wZkO"),Ge=(t("rHON"),t("5w/X"));class He{constructor(){}genDesc(){this.description=this.level?`${Object(Re.d)(this.level)} ${Object(Re.e)(this.school)}`:`${Object(Re.e)(this.school)} ${Object(Re.d)(this.level)}`}ngOnInit(){this.genDesc()}ngOnChanges(e){this.genDesc()}}He.\u0275fac=function(e){return new(e||He)},He.\u0275cmp=f.Xb({type:He,selectors:[["avr-spell-panel-description"]],inputs:{level:"level",school:"school"},features:[f.Pb],decls:2,vars:1,template:function(e,c){1&e&&(f.jc(0,"mat-panel-description"),f.Wc(1),f.ic()),2&e&&(f.Rb(1),f.Xc(c.description))},directives:[P.f],encapsulation:2});var Ze=t("d3UM"),Ke=t("FKr1"),Qe=t("bSwM");function ec(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field",5),f.jc(1,"input",34),f.qc("change",(function(){f.Lc(e);return f.uc(2).emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc(2).spell.image=c})),f.ic(),f.ic()}if(2&e){const e=f.uc(2);f.Rb(1),f.zc("ngModel",e.spell.image)}}function cc(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-select",9),f.qc("valueChange",(function(c){f.Lc(e);return f.uc(2).spell.school=c}))("selectionChange",(function(){f.Lc(e);return f.uc(2).emitChange()})),f.jc(1,"mat-option",35),f.Wc(2,"Abjuration"),f.ic(),f.jc(3,"mat-option",36),f.Wc(4,"Conjuration"),f.ic(),f.jc(5,"mat-option",37),f.Wc(6,"Divination"),f.ic(),f.jc(7,"mat-option",38),f.Wc(8,"Enchantment"),f.ic(),f.jc(9,"mat-option",39),f.Wc(10,"Evocation"),f.ic(),f.jc(11,"mat-option",40),f.Wc(12,"Illusion"),f.ic(),f.jc(13,"mat-option",41),f.Wc(14,"Necromancy"),f.ic(),f.jc(15,"mat-option",42),f.Wc(16,"Transmutation"),f.ic(),f.jc(17,"mat-option",43),f.qc("click",(function(){f.Lc(e);return f.uc(2).customSpellSchool=!0})),f.Wc(18,"Custom"),f.ic(),f.ic()}if(2&e){const e=f.uc(2);f.zc("value",e.spell.school)}}function tc(e,c){if(1&e){const e=f.kc();f.jc(0,"input",44),f.qc("change",(function(){f.Lc(e);return f.uc(2).emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc(2).spell.school=c})),f.ic()}if(2&e){const e=f.uc(2);f.zc("ngModel",e.spell.school)}}function nc(e,c){if(1&e){const e=f.kc();f.jc(0,"button",45),f.qc("click",(function(){f.Lc(e);return f.uc(2).customSpellSchool=!1})),f.jc(1,"mat-icon"),f.Wc(2,"remove_circle_outline"),f.ic(),f.ic()}}function ic(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",46),f.qc("click",(function(){f.Lc(e);const c=f.uc(2);return c.spell.image="",c.emitChange()})),f.jc(2,"mat-icon",47),f.Wc(3,"add_photo_alternate"),f.ic(),f.ic(),f.ic()}}function oc(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",48),f.qc("click",(function(){f.Lc(e);return f.uc(2).moveUp.emit()})),f.jc(2,"mat-icon",49),f.Wc(3,"arrow_upward"),f.ic(),f.ic(),f.ic()}}function ac(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",50),f.qc("click",(function(){f.Lc(e);return f.uc(2).moveDown.emit()})),f.jc(2,"mat-icon",51),f.Wc(3,"arrow_downward"),f.ic(),f.ic(),f.ic()}}function lc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",3),f.jc(1,"div",4),f.jc(2,"mat-form-field",5),f.jc(3,"input",6),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.name=c})),f.ic(),f.ic(),f.Vc(4,ec,2,1,"mat-form-field",7),f.ic(),f.jc(5,"div",8),f.jc(6,"mat-form-field",5),f.jc(7,"mat-label"),f.Wc(8,"Level"),f.ic(),f.jc(9,"mat-select",9),f.qc("valueChange",(function(c){f.Lc(e);return f.uc().spell.level=c}))("selectionChange",(function(){f.Lc(e);return f.uc().emitChange()})),f.jc(10,"mat-option",10),f.Wc(11,"Cantrip"),f.ic(),f.jc(12,"mat-option",10),f.Wc(13,"1st Level"),f.ic(),f.jc(14,"mat-option",10),f.Wc(15,"2nd Level"),f.ic(),f.jc(16,"mat-option",10),f.Wc(17,"3rd Level"),f.ic(),f.jc(18,"mat-option",10),f.Wc(19,"4th Level"),f.ic(),f.jc(20,"mat-option",10),f.Wc(21,"5th Level"),f.ic(),f.jc(22,"mat-option",10),f.Wc(23,"6th Level"),f.ic(),f.jc(24,"mat-option",10),f.Wc(25,"7th Level"),f.ic(),f.jc(26,"mat-option",10),f.Wc(27,"8th Level"),f.ic(),f.jc(28,"mat-option",10),f.Wc(29,"9th Level"),f.ic(),f.ic(),f.ic(),f.jc(30,"mat-form-field",5),f.jc(31,"mat-label"),f.Wc(32,"School"),f.ic(),f.Vc(33,cc,19,1,"mat-select",11),f.Vc(34,tc,1,1,"input",12),f.Vc(35,nc,3,0,"button",13),f.ic(),f.jc(36,"mat-checkbox",14),f.qc("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.ritual=c}))("change",(function(){f.Lc(e);return f.uc().emitChange()})),f.Wc(37,"Ritual"),f.ic(),f.ic(),f.jc(38,"div",15),f.jc(39,"mat-form-field",5),f.jc(40,"input",16),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.casttime=c})),f.ic(),f.ic(),f.jc(41,"mat-form-field",5),f.jc(42,"input",17),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.range=c})),f.ic(),f.ic(),f.ic(),f.jc(43,"div",8),f.jc(44,"mat-checkbox",14),f.qc("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.components.verbal=c}))("change",(function(){f.Lc(e);return f.uc().emitChange()})),f.Wc(45," Verbal "),f.ic(),f.jc(46,"mat-checkbox",14),f.qc("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.components.somatic=c}))("change",(function(){f.Lc(e);return f.uc().emitChange()})),f.Wc(47," Somatic "),f.ic(),f.jc(48,"mat-form-field",5),f.jc(49,"input",18),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.components.material=c})),f.ic(),f.ic(),f.ic(),f.jc(50,"div",8),f.jc(51,"mat-form-field",5),f.jc(52,"input",19),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.duration=c})),f.ic(),f.ic(),f.jc(53,"mat-checkbox",14),f.qc("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.concentration=c}))("change",(function(){f.Lc(e);return f.uc().emitChange()})),f.Wc(54," Concentration "),f.ic(),f.ic(),f.jc(55,"mat-form-field"),f.jc(56,"textarea",20),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.description=c})),f.ic(),f.ic(),f.jc(57,"mat-form-field"),f.jc(58,"textarea",21),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.higherlevels=c})),f.ic(),f.ic(),f.jc(59,"div",15),f.jc(60,"mat-form-field",22),f.jc(61,"input",23),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.classes=c})),f.ic(),f.ic(),f.jc(62,"mat-form-field",24),f.jc(63,"input",25),f.qc("change",(function(){f.Lc(e);return f.uc().emitChange()}))("ngModelChange",(function(c){f.Lc(e);return f.uc().spell.subclasses=c})),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(64,"div",26),f.Vc(65,ic,4,0,"span",7),f.jc(66,"span",5),f.jc(67,"button",27),f.qc("click",(function(){f.Lc(e);return f.uc().beginJSONExport()})),f.jc(68,"mat-icon",28),f.Wc(69,"vertical_align_top"),f.ic(),f.ic(),f.ic(),f.jc(70,"span",5),f.jc(71,"button",29),f.qc("click",(function(){f.Lc(e);return f.uc().moveToEditor.emit()})),f.jc(72,"mat-icon",30),f.Wc(73,"build"),f.ic(),f.ic(),f.ic(),f.Vc(74,oc,4,0,"span",7),f.Vc(75,ac,4,0,"span",7),f.ec(76,"span",31),f.jc(77,"span",5),f.jc(78,"button",32),f.qc("click",(function(){f.Lc(e);return f.uc().delete.emit()})),f.jc(79,"mat-icon",33),f.Wc(80,"delete"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(3),f.zc("ngModel",e.spell.name),f.Rb(1),f.zc("ngIf",null!=e.spell.image),f.Rb(5),f.zc("value",e.spell.level),f.Rb(1),f.zc("value",0),f.Rb(2),f.zc("value",1),f.Rb(2),f.zc("value",2),f.Rb(2),f.zc("value",3),f.Rb(2),f.zc("value",4),f.Rb(2),f.zc("value",5),f.Rb(2),f.zc("value",6),f.Rb(2),f.zc("value",7),f.Rb(2),f.zc("value",8),f.Rb(2),f.zc("value",9),f.Rb(5),f.zc("ngIf",!e.customSpellSchool),f.Rb(1),f.zc("ngIf",e.customSpellSchool),f.Rb(1),f.zc("ngIf",e.customSpellSchool),f.Rb(1),f.zc("ngModel",e.spell.ritual),f.Rb(4),f.zc("ngModel",e.spell.casttime),f.Rb(2),f.zc("ngModel",e.spell.range),f.Rb(2),f.zc("ngModel",e.spell.components.verbal),f.Rb(2),f.zc("ngModel",e.spell.components.somatic),f.Rb(3),f.zc("ngModel",e.spell.components.material),f.Rb(3),f.zc("ngModel",e.spell.duration),f.Rb(1),f.zc("ngModel",e.spell.concentration),f.Rb(3),f.zc("ngModel",e.spell.description),f.Rb(2),f.zc("ngModel",e.spell.higherlevels),f.Rb(3),f.zc("ngModel",e.spell.classes),f.Rb(2),f.zc("ngModel",e.spell.subclasses),f.Rb(2),f.zc("ngIf",void 0===e.spell.image),f.Rb(9),f.zc("ngIf",!e.isFirst),f.Rb(1),f.zc("ngIf",!e.isLast)}}class sc{constructor(e){this.dialog=e,this.moveUp=new f.u,this.moveDown=new f.u,this.changed=new f.u,this.opened=new f.u,this.delete=new f.u,this.moveToEditor=new f.u}ngOnInit(){this.customSpellSchool=!Re.a.includes(this.spell.school)}emitChange(){this.changed.emit()}beginJSONExport(){this.dialog.open(y.a,{data:{name:this.spell.name,data:this.spell},width:"60%"})}}function rc(e,c){if(1&e){const e=f.kc();f.jc(0,"avr-spell-detail",15),f.qc("moveUp",(function(){f.Lc(e);const t=c.$implicit;return f.uc(2).moveUp(t)}))("moveDown",(function(){f.Lc(e);const t=c.$implicit;return f.uc(2).moveDown(t)}))("changed",(function(){f.Lc(e);return f.uc(2).changed.emit()}))("opened",(function(){f.Lc(e);const t=c.$implicit,n=f.uc(2);return n.selectedSpell=t,n.selected.emit(t)}))("delete",(function(){f.Lc(e);const t=c.$implicit;return f.uc(2).deleteSpell(t)}))("moveToEditor",(function(){f.Lc(e);return f.uc(2).moveToEditor.emit()})),f.ic()}if(2&e){const e=c.$implicit,t=c.first,n=c.last;f.zc("spell",e)("isFirst",t)("isLast",n)}}function dc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",4),f.jc(1,"mat-accordion"),f.Vc(2,rc,1,3,"avr-spell-detail",5),f.jc(3,"mat-card",6),f.jc(4,"span",7),f.Wc(5,"New..."),f.ic(),f.ec(6,"span",8),f.jc(7,"span"),f.jc(8,"button",9),f.qc("click",(function(){f.Lc(e);return f.uc().newFromJSON()})),f.jc(9,"mat-icon",10),f.Wc(10,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(11,"button",11),f.qc("click",(function(){f.Lc(e);return f.uc().newFromSRD()})),f.jc(12,"mat-icon",12),f.Wc(13,"scanner"),f.ic(),f.ic(),f.jc(14,"button",13),f.qc("click",(function(){f.Lc(e);return f.uc().newSpell()})),f.jc(15,"mat-icon",14),f.Wc(16,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(2),f.zc("ngForOf",e.tome.spells)}}function uc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",4),f.jc(1,"mat-card"),f.jc(2,"p"),f.Wc(3,"Looks like this tome is empty."),f.ic(),f.jc(4,"button",16),f.qc("click",(function(){f.Lc(e);return f.uc().newSpell()})),f.Wc(5,"Make a Spell"),f.ic(),f.jc(6,"button",9),f.qc("click",(function(){f.Lc(e);return f.uc().newFromJSON()})),f.jc(7,"mat-icon",10),f.Wc(8,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(9,"button",11),f.qc("click",(function(){f.Lc(e);return f.uc().newFromSRD()})),f.jc(10,"mat-icon",12),f.Wc(11,"scanner"),f.ic(),f.ic(),f.ic(),f.ic()}}sc.\u0275fac=function(e){return new(e||sc)(f.dc(C.b))},sc.\u0275cmp=f.Xb({type:sc,selectors:[["avr-spell-detail"]],inputs:{spell:"spell",isFirst:"isFirst",isLast:"isLast"},outputs:{moveUp:"moveUp",moveDown:"moveDown",changed:"changed",opened:"opened",delete:"delete",moveToEditor:"moveToEditor"},decls:7,vars:3,consts:[[3,"opened"],[3,"level","school"],["matExpansionPanelContent",""],[1,"form-container"],["fxLayout","row","fxLayoutGap","4px"],["fxFlex",""],["matInput","","placeholder","Name",3,"ngModel","change","ngModelChange"],["fxFlex","",4,"ngIf"],["fxLayout","row","fxLayoutGap","6px","fxLayoutAlign","center center"],[3,"value","valueChange","selectionChange"],[3,"value"],[3,"value","valueChange","selectionChange",4,"ngIf"],["matInput","","placeholder","School",3,"ngModel","change","ngModelChange",4,"ngIf"],["mat-icon-button","","matSuffix","","matTooltip","Delete custom school",3,"click",4,"ngIf"],["fxFlex","nogrow",3,"ngModel","ngModelChange","change"],["fxLayout","row","fxLayoutGap","6px"],["matInput","","placeholder","Casting Time",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Range",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Material",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Duration",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Description","rows","7",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","At Higher Levels","rows","3",3,"ngModel","change","ngModelChange"],["fxFlex","","matTooltip","Separate classes with commas."],["matInput","","placeholder","Classes",3,"ngModel","change","ngModelChange"],["fxFlex","","matTooltip","Separate subclasses with commas."],["matInput","","placeholder","Subclasses",3,"ngModel","change","ngModelChange"],["fxLayout","row",1,"actions"],["mat-icon-button","","matTooltip","Export to JSON",3,"click"],["aria-label","Export to JSON"],["mat-icon-button","","matTooltip","Edit Automation",3,"click"],["aria-label","Edit Automation"],["fxFlex","grow"],["mat-icon-button","","color","warn",3,"click"],["aria-label","Delete"],["matInput","","placeholder","Image URL",3,"ngModel","change","ngModelChange"],["value","A"],["value","C"],["value","D"],["value","E"],["value","V"],["value","I"],["value","N"],["value","T"],["value","Custom",3,"click"],["matInput","","placeholder","School",3,"ngModel","change","ngModelChange"],["mat-icon-button","","matSuffix","","matTooltip","Delete custom school",3,"click"],["mat-icon-button","","matTooltip","Add image",3,"click"],["aria-label","Add image"],["mat-icon-button","","matTooltip","Move Up",3,"click"],["aria-label","Move Up"],["mat-icon-button","","matTooltip","Move Down",3,"click"],["aria-label","Move Down"]],template:function(e,c){1&e&&(f.jc(0,"mat-expansion-panel",0),f.qc("opened",(function(){return c.opened.emit()})),f.jc(1,"mat-expansion-panel-header"),f.jc(2,"mat-panel-title"),f.jc(3,"div"),f.Wc(4),f.ic(),f.ic(),f.ec(5,"avr-spell-panel-description",1),f.ic(),f.Vc(6,lc,81,31,"ng-template",2),f.ic()),2&e&&(f.Rb(4),f.Yc(" ",c.spell.name," "),f.Rb(1),f.zc("level",c.spell.level)("school",c.spell.school))},directives:[P.c,P.g,P.h,He,P.e,X.f,X.g,M.c,X.b,O.a,o.c,o.n,o.q,n.t,X.e,M.g,Ze.a,Ke.j,Qe.a,z.a,W.b,_.a,M.j],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}mat-panel-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto 0}"]});class mc{constructor(e,c){this.dialog=e,this.hbService=c,this.selected=new f.u,this.changed=new f.u,this.moveToEditor=new f.u}ngOnInit(){}newSpell(){this.tome.spells.push(new Re.b),this.changed.emit()}newFromJSON(){const e=this.dialog.open(ee.a,{width:"60%",disableClose:!0,data:{validator:c=>this.validateSpellJSON(e,c)}});e.afterClosed().subscribe(e=>{if(e){let c=e;console.log(c),c instanceof Array?this.tome.spells.push(...c):this.tome.spells.push(c),this.changed.emit()}})}newFromSRD(){this.dialog.open(ce.a,{width:"60%",disableClose:!0,data:{getter:()=>this.hbService.getTemplateSpells(),namer:e=>e.name}}).afterClosed().subscribe(e=>{e&&(this.tome.spells.push(e),this.changed.emit())})}deleteSpell(e){this.tome.spells=this.tome.spells.filter(c=>c!==e),this.changed.emit()}validateSpellJSON(e,c){this.hbService.validateSpellJSON(c).subscribe(c=>this.onValidationReply(e,c))}onValidationReply(e,c){console.log(c),e.componentInstance.loading=!1,c.success?e.close(JSON.parse(e.componentInstance.data)):e.componentInstance.error=c.result}moveUp(e){const c=this.tome.spells.indexOf(e),t=c-1;t>-1&&(Object(Q.a)(this.tome.spells,c,t),this.changed.emit())}moveDown(e){const c=this.tome.spells.indexOf(e),t=c+1;t<this.tome.spells.length&&(Object(Q.a)(this.tome.spells,c,t),this.changed.emit())}}mc.\u0275fac=function(e){return new(e||mc)(f.dc(C.b),f.dc(k))},mc.\u0275cmp=f.Xb({type:mc,selectors:[["avr-spell-list"]],inputs:{tome:"tome",user:"user"},outputs:{selected:"selected",changed:"changed",moveToEditor:"moveToEditor"},decls:5,vars:19,consts:[["fxLayout","row","fxLayoutGap","8px",1,"container"],["class","spell-list","fxFlex","grow",4,"ngIf"],["fxFlex","grow",1,"spell-preview","mat-typography","mat-elevation-z3"],[3,"name","image","level","school","classes","subclasses","verbal","somatic","material","time","ritual","range","concentration","duration","description","higherlevels","user"],["fxFlex","grow",1,"spell-list"],[3,"spell","isFirst","isLast","moveUp","moveDown","changed","opened","delete","moveToEditor",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"new-spell-card"],[1,"no-text-cursor"],[1,"toolbar-spacer"],["mat-icon-button","","matTooltip","Import from JSON",3,"click"],["aria-label","Import from JSON"],["mat-icon-button","","matTooltip","Copy SRD spell",3,"click"],["aria-label","From existing spell"],["mat-icon-button","",3,"click"],["aria-label","New"],[3,"spell","isFirst","isLast","moveUp","moveDown","changed","opened","delete","moveToEditor"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"div",0),f.Vc(1,dc,17,1,"div",1),f.Vc(2,uc,12,0,"div",1),f.jc(3,"div",2),f.ec(4,"avr-spell-embed",3),f.ic(),f.ic()),2&e&&(f.Rb(1),f.zc("ngIf",c.tome.spells.length),f.Rb(1),f.zc("ngIf",!c.tome.spells.length),f.Rb(2),f.zc("name",null==c.selectedSpell?null:c.selectedSpell.name)("image",null==c.selectedSpell?null:c.selectedSpell.image)("level",null==c.selectedSpell?null:c.selectedSpell.level)("school",null==c.selectedSpell?null:c.selectedSpell.school)("classes",null==c.selectedSpell?null:c.selectedSpell.classes)("subclasses",null==c.selectedSpell?null:c.selectedSpell.subclasses)("verbal",null==c.selectedSpell?null:c.selectedSpell.components.verbal)("somatic",null==c.selectedSpell?null:c.selectedSpell.components.somatic)("material",null==c.selectedSpell?null:c.selectedSpell.components.material)("time",null==c.selectedSpell?null:c.selectedSpell.casttime)("ritual",null==c.selectedSpell?null:c.selectedSpell.ritual)("range",null==c.selectedSpell?null:c.selectedSpell.range)("concentration",null==c.selectedSpell?null:c.selectedSpell.concentration)("duration",null==c.selectedSpell?null:c.selectedSpell.duration)("description",null==c.selectedSpell?null:c.selectedSpell.description)("higherlevels",null==c.selectedSpell?null:c.selectedSpell.higherlevels)("user",c.user))},directives:[X.f,X.g,n.t,X.b,Ge.a,P.a,n.s,Y.a,X.e,W.b,z.a,_.a,sc],styles:[".container[_ngcontent-%COMP%]{margin:8px}.spell-list[_ngcontent-%COMP%], .spell-preview[_ngcontent-%COMP%]{max-height:calc(100vh - 240px);overflow-y:auto}.new-spell-card[_ngcontent-%COMP%]{height:48px;padding:0 24px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]});var pc=t("UgTo");function gc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",1),f.jc(1,"mat-card"),f.jc(2,"p"),f.Wc(3),f.ic(),f.jc(4,"p"),f.Wc(5,"You can find help on how to use the spell editor "),f.jc(6,"a",2),f.Wc(7,"here"),f.ic(),f.Wc(8,"."),f.ic(),f.jc(9,"avr-automation-editor",3),f.qc("changed",(function(){f.Lc(e);return f.uc().changed.emit()})),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(3),f.Yc("Editing ",e.spell.name,"..."),f.Rb(6),f.zc("automation",e.getAutomation(e.spell))("spell",e.spell)}}function hc(e,c){1&e&&(f.jc(0,"div",1),f.jc(1,"mat-card"),f.jc(2,"p"),f.Wc(3," No spell selected. "),f.ic(),f.ic(),f.ic())}class bc{constructor(){this.changed=new f.u}ngOnInit(){}getAutomation(e){return null===e.automation&&(e.automation=[]),e.automation}}function fc(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"mat-toolbar",1),f.jc(2,"span"),f.jc(3,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().back()})),f.jc(4,"mat-icon",3),f.Wc(5,"arrow_back"),f.ic(),f.ic(),f.ic(),f.jc(6,"span"),f.Wc(7),f.ic(),f.ec(8,"span",4),f.jc(9,"span"),f.jc(10,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().commit()})),f.jc(11,"mat-icon",5),f.Wc(12,"save"),f.ic(),f.ic(),f.jc(13,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().beginSettings()})),f.jc(14,"mat-icon",6),f.Wc(15,"settings"),f.ic(),f.ic(),f.jc(16,"button",2),f.qc("click",(function(){f.Lc(e);return f.uc().beginShare()})),f.jc(17,"mat-icon",7),f.Wc(18,"launch"),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(19,"mat-tab-group",8,9),f.jc(21,"mat-tab",10),f.jc(22,"avr-spell-list",11),f.qc("selected",(function(c){f.Lc(e);return f.uc().selectedSpell=c}))("changed",(function(){f.Lc(e);return f.uc().ensureChangesNotif()}))("moveToEditor",(function(){f.Lc(e);return f.Ic(20).selectedIndex=1})),f.ic(),f.ic(),f.jc(23,"mat-tab",12),f.jc(24,"avr-spell-editor",13),f.qc("changed",(function(){f.Lc(e);return f.uc().ensureChangesNotif()})),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.uc();f.Rb(7),f.Yc(" ",e.tome.name," "),f.Rb(15),f.zc("tome",e.tome)("user",e.user),f.Rb(2),f.zc("spell",e.selectedSpell)}}function jc(e,c){1&e&&(f.jc(0,"div"),f.jc(1,"div",14),f.jc(2,"mat-card"),f.ec(3,"mat-spinner",15),f.ic(),f.ic(),f.ic()),2&e&&(f.Rb(3),f.zc("diameter",24))}function vc(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"div",14),f.jc(2,"mat-card"),f.jc(3,"p"),f.Wc(4,"You do not have permission to edit this tome."),f.ic(),f.jc(5,"button",16),f.qc("click",(function(){f.Lc(e);return f.uc().back()})),f.Wc(6,"Go Back"),f.ic(),f.ic(),f.ic(),f.ic()}}bc.\u0275fac=function(e){return new(e||bc)},bc.\u0275cmp=f.Xb({type:bc,selectors:[["avr-spell-editor"]],inputs:{spell:"spell"},outputs:{changed:"changed"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],["target","_blank","href","https://avrae.readthedocs.io/en/latest/automation_ref.html"],[3,"automation","spell","changed"]],template:function(e,c){1&e&&(f.Vc(0,gc,10,3,"div",0),f.Vc(1,hc,4,0,"div",0)),2&e&&(f.zc("ngIf",c.spell),f.Rb(1),f.zc("ngIf",!c.spell))},directives:[n.t,Y.a,pc.a],styles:[".container[_ngcontent-%COMP%]{margin:8px}"]});class wc{constructor(e,c,t,n,i,o,a){this.route=e,this.homebrewService=c,this.dashboardService=t,this.location=n,this.dialog=i,this.router=o,this.snackBar=a,this.user=Object(h.d)(),this.changesOpen=!1}ngOnInit(){this.getTome()}ngOnDestroy(){this.snackBar.dismiss()}getTome(){const e=this.route.snapshot.paramMap.get("tome");this.homebrewService.getTome(e).subscribe(e=>{this.tome=e,this.calcCanEdit()})}calcCanEdit(){if(this.tome&&this.user)if(this.isOwner=this.user.id===this.tome.owner,this.isOwner)this.canEdit=!0;else{const e=this.tome._id.$oid;this.homebrewService.getTomeEditors(e).subscribe(e=>this.canEdit=e.some(e=>e===this.user.id))}}ensureChangesNotif(){if(!this.changesOpen){this.changesOpen=!0,this.snackBar.open("You have unsaved changes!","Save",{duration:-1,horizontalPosition:"right"}).onAction().subscribe(()=>{this.commit()})}}beginShare(){this.dialog.open(Te,{data:this.tome,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),this.tome=Object.assign(this.tome,e),this.commit())})}beginSettings(){this.dialog.open(Ye,{data:this.tome,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),e.delete?this.delete():(this.tome=Object.assign(this.tome,e),this.commit()))})}commit(){this.homebrewService.putTome(this.tome).subscribe(e=>{console.log(e),this.changesOpen=!1,this.snackBar.open(`${e} Use "!tome ${this.tome.name}" to activate the tome in Discord!`,null,{horizontalPosition:"right"})})}delete(){this.homebrewService.deleteTome(this.tome).subscribe(e=>{console.log(e),this.router.navigate(["../"],{relativeTo:this.route})})}back(){this.location.back()}}wc.\u0275fac=function(e){return new(e||wc)(f.dc(u.a),f.dc(k),f.dc(te.a),f.dc(n.n),f.dc(C.b),f.dc(u.b),f.dc(le.b))},wc.\u0275cmp=f.Xb({type:wc,selectors:[["avr-tome-detail"]],decls:3,vars:3,consts:[[4,"ngIf"],["color","primary",1,"tome-toolbar"],["mat-icon-button","",3,"click"],["aria-label","Back"],[1,"toolbar-spacer"],["aria-label","Save"],["aria-label","Settings"],["aria-label","Share"],["backgroundColor","primary"],["tabGroup",""],["label","Spells"],[3,"tome","user","selected","changed","moveToEditor"],["label","Editor"],[3,"spell","changed"],[1,"container"],[3,"diameter"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.Vc(0,fc,25,4,"div",0),f.Vc(1,jc,4,1,"div",0),f.Vc(2,vc,7,0,"div",0)),2&e&&(f.zc("ngIf",c.tome&&null!=c.canEdit),f.Rb(1),f.zc("ngIf",!c.tome),f.Rb(1),f.zc("ngIf",c.tome&&!c.canEdit))},directives:[n.t,A.a,W.b,_.a,Be.c,Be.a,mc,bc,Y.a,E.c],styles:[".tome-toolbar[_ngcontent-%COMP%]{height:64px}mat-tab-header[_ngcontent-%COMP%]{height:48px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.no-text-cursor[_ngcontent-%COMP%]{cursor:default}"]});const kc=[{path:"",children:[{path:"items",component:K},{path:"items/:pack",component:xe},{path:"spells",component:Ue},{path:"spells/:tome",component:wc}]}];class Cc{}Cc.\u0275mod=f.bc({type:Cc}),Cc.\u0275inj=f.ac({factory:function(e){return new(e||Cc)},imports:[[u.d.forChild(kc)],u.d]});class Mc{}Mc.\u0275mod=f.bc({type:Mc}),Mc.\u0275inj=f.ac({factory:function(e){return new(e||Mc)},imports:[[n.c,l.a,o.h,i.a,a.b.forChild(),r.a,s.a,d.a,Cc]]})}}]);
//# sourceMappingURL=11-es2015.64da3686316aa9b40b4e.js.map