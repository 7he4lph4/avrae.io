(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{XljO:function(e,c,t){"use strict";t.r(c),t.d(c,"HomebrewModule",(function(){return Cc}));var n=t("ofXK"),i=t("YUcS"),o=t("3Pt+"),a=t("lR5k"),l=t("hctd"),s=t("WVau"),r=t("bVJ3"),d=t("6B8D"),m=t("tyNb"),u=t("97Gz"),p=t("AytR"),g=t("LRne"),h=t("2xJ4"),b=t("JIr8"),f=t("fXoL"),v=t("tk/3");const j=p.a.apiURL+"/homebrew/items",M=p.a.apiURL+"/homebrew/spells";class w{constructor(e){this.http=e}getUserPacks(){return this.http.get(j+"/me",Object(h.b)())}newPack(e){return this.http.post(""+j,e,Object(h.b)()).pipe(Object(b.a)(this.handleError("newPack")))}getPack(e){return this.http.get(`${j}/${e}`,Object(h.b)())}putPack(e){return this.http.put(`${j}/${e._id.$oid}`,e,Object(h.c)()).pipe(Object(b.a)(this.handleError("putPack")))}deletePack(e){return this.http.delete(`${j}/${e._id.$oid}`,Object(h.c)()).pipe(Object(b.a)(this.handleError("deletePack")))}getPackEditors(e){return this.http.get(`${j}/${e}/editors`,Object(h.b)())}getTemplateItems(){return this.http.get(j+"/srd",Object(h.b)())}getUserTomes(){return this.http.get(M+"/me",Object(h.b)())}newTome(e){return this.http.post(""+M,e,Object(h.b)()).pipe(Object(b.a)(this.handleError("newTome")))}getTome(e){return this.http.get(`${M}/${e}`,Object(h.b)())}putTome(e){return this.http.put(`${M}/${e._id.$oid}`,e,Object(h.c)()).pipe(Object(b.a)(this.handleError("putTome")))}deleteTome(e){return this.http.delete(`${M}/${e._id.$oid}`,Object(h.c)()).pipe(Object(b.a)(this.handleError("deleteTome")))}getTomeEditors(e){return this.http.get(`${M}/${e}/editors`,Object(h.b)())}getTemplateSpells(){return this.http.get(M+"/srd",Object(h.b)())}validateSpellJSON(e){return this.http.post(M+"/validate",e,Object(h.b)()).pipe(Object(b.a)(e=>Object(g.a)({success:!1,result:e.error})))}handleError(e="operation"){return c=>(console.error(c),Object(g.a)({error:`${e} failed: ${c.error}`,success:!1}))}}w.\u0275fac=function(e){return new(e||w)(f.nc(v.b))},w.\u0275prov=f.Zb({token:w,factory:w.\u0275fac,providedIn:"root"});var k=t("0IaG"),C=t("kmnG"),X=t("qFsG"),O=t("1jcm"),x=t("bTqV");const S=function(e,c,t,n){return{name:e,public:c,image:t,desc:n}};class R{constructor(){this.public=!1,this.desc="",this.image=""}ngOnInit(){}}R.\u0275fac=function(e){return new(e||R)},R.\u0275cmp=f.Xb({type:R,selectors:[["avr-new-pack-dialog"]],decls:19,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],[1,"mat-small"],["mat-button","","mat-dialog-close","","tabindex","1"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Xc(1,"New Pack..."),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.rc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-slide-toggle",4),f.rc("ngModelChange",(function(e){return c.public=e})),f.Xc(7,"Allow public to view"),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"input",5),f.rc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(10,"mat-form-field"),f.jc(11,"textarea",6),f.rc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.jc(12,"p",7),f.Xc(13," These settings can be changed at any time. "),f.ic(),f.ic(),f.jc(14,"mat-dialog-actions"),f.jc(15,"button",8),f.Xc(16,"Cancel"),f.ic(),f.jc(17,"button",9),f.Xc(18," Create "),f.ic(),f.ic()),2&e&&(f.Rb(5),f.Ac("ngModel",c.name),f.Rb(1),f.Ac("ngModel",c.public),f.Rb(3),f.Ac("ngModel",c.image),f.Rb(2),f.Ac("ngModel",c.desc),f.Rb(6),f.Ac("mat-dialog-close",f.Hc(6,S,c.name,c.public,c.image,c.desc))("disabled",!c.name))},directives:[k.i,k.f,C.c,X.a,o.c,o.n,o.q,O.a,k.c,x.b,k.d],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});const y=["name"];class I{constructor(){this.name="New Item",this.meta="",this.desc=""}}var A=t("hMdP"),_=t("Qu3c"),P=t("NFeN");class E{constructor(e){this.data=e,this.generateMD(this.data.data)}ngOnInit(){}generateMD(e){let c="";c+=`${"# "+e.name}\n${e.desc||""}\n\n`;for(let t of e.items){c+=`${"#### "+t.name}\n${t.meta}\n___\n${t.desc}\n\n`}c=c.replace("\n","\n  "),this.mdData=c}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}}E.\u0275fac=function(e){return new(e||E)(f.dc(k.a))},E.\u0275cmp=f.Xb({type:E,selectors:[["avr-pack-markdown-dialog"]],decls:27,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","readonly","","placeholder","Markdown","rows","10",3,"value"],["mdElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(e,c){if(1&e){const e=f.kc();f.jc(0,"h2",0),f.Xc(1),f.ic(),f.Xc(2,"\n"),f.jc(3,"mat-dialog-content",1),f.Xc(4,"\n  "),f.jc(5,"div",2),f.Xc(6,"\n    "),f.jc(7,"mat-form-field"),f.Xc(8,"\n      "),f.ec(9,"textarea",3,4),f.Xc(11,"\n      "),f.jc(12,"button",5),f.rc("click",(function(){f.Mc(e);const t=f.Jc(10);return c.copy(t)})),f.Xc(13,"\n        "),f.jc(14,"mat-icon"),f.Xc(15,"file_copy"),f.ic(),f.Xc(16,"\n      "),f.ic(),f.Xc(17,"\n    "),f.ic(),f.Xc(18,"\n  "),f.ic(),f.Xc(19,"\n"),f.ic(),f.Xc(20,"\n"),f.jc(21,"mat-dialog-actions"),f.Xc(22,"\n  "),f.jc(23,"button",6),f.Xc(24,"Done"),f.ic(),f.Xc(25,"\n"),f.ic(),f.Xc(26,"\n")}2&e&&(f.Rb(1),f.Zc("Markdown - ",c.data.name,""),f.Rb(8),f.Ac("value",c.mdData))},directives:[k.i,k.f,C.c,X.a,x.b,C.j,_.a,P.a,k.c,k.d],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var D=t("7EHt"),T=t("MutI"),L=t("Xa2L");function N(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field"),f.ec(1,"input",9,10),f.jc(3,"button",11),f.rc("click",(function(){f.Mc(e);const c=f.Jc(2);return f.vc().copy(c)})),f.jc(4,"mat-icon"),f.Xc(5,"file_copy"),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(1),f.Ac("value",e.shareLink)}}function $(e,c){if(1&e&&(f.jc(0,"mat-list-item"),f.Xc(1),f.wc(2,"async"),f.ic()),2&e){const e=c.$implicit;var t;f.Rb(1),f.Yc(null==(t=f.xc(2,1,e))?null:t.username)}}function F(e,c){if(1&e&&(f.jc(0,"mat-list"),f.Wc(1,$,3,3,"mat-list-item",12),f.ic()),2&e){const e=f.vc();f.Rb(1),f.Ac("ngForOf",e.editors)}}function W(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().beginJSONExport()})),f.Xc(2,"Export to JSON "),f.ic(),f.jc(3,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().beginMDExport()})),f.Xc(4,"Export to Homebrewery "),f.ic(),f.ic()}}function U(e,c){1&e&&(f.jc(0,"div"),f.ec(1,"mat-spinner",15),f.ic()),2&e&&(f.Rb(1),f.Ac("diameter",24))}const J=function(e){return{public:e}};class B{constructor(e,c,t,n){this.data=e,this.dialog=c,this.hbService=t,this.discord=n,this.public=e.public,this.shareLink="https://avrae.io/homebrew/items/"+e._id.$oid,this.loaded=void 0!==e.items}ngOnInit(){this.owner=this.discord.getUser(this.data.owner),this.loadEditors(),this.loaded||this.loadItems()}loadItems(){const e=this.data._id.$oid;this.hbService.getPack(e).subscribe(e=>{this.data=e,this.loaded=!0})}loadEditors(){const e=this.data._id.$oid;this.hbService.getPackEditors(e).subscribe(e=>{const c=[];e.forEach(e=>c.push(this.discord.getUser(e))),this.editors=c})}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}beginJSONExport(){this.dialog.open(A.a,{data:{name:this.data.name,data:this.data.items},width:"60%"})}beginMDExport(){this.dialog.open(E,{data:{name:this.data.name,data:this.data},width:"60%"})}}B.\u0275fac=function(e){return new(e||B)(f.dc(k.a),f.dc(k.b),f.dc(w),f.dc(u.a))},B.\u0275cmp=f.Xb({type:B,selectors:[["avr-pack-share-dialog"]],decls:31,vars:12,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"mat-elevation-z0"],["class","button-row",4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"],["matInput","","readonly","","placeholder","View Link",3,"value"],["shareLinkElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],[4,"ngFor","ngForOf"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],[3,"diameter"]],template:function(e,c){if(1&e&&(f.jc(0,"h2",0),f.Xc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"p"),f.Xc(5),f.wc(6,"async"),f.ic(),f.jc(7,"mat-slide-toggle",3),f.rc("ngModelChange",(function(e){return c.public=e})),f.Xc(8,"Allow public to view"),f.ic(),f.Wc(9,N,6,1,"mat-form-field",4),f.jc(10,"mat-expansion-panel",5),f.jc(11,"mat-expansion-panel-header"),f.jc(12,"mat-panel-title"),f.Xc(13," Editors "),f.ic(),f.ic(),f.jc(14,"p"),f.Xc(15,"To add or remove an editor, run the command "),f.jc(16,"kbd"),f.Xc(17,"!pack editor @user"),f.ic(),f.Xc(18," in Discord!"),f.ic(),f.Wc(19,F,2,1,"mat-list",4),f.ic(),f.jc(20,"mat-expansion-panel",5),f.jc(21,"mat-expansion-panel-header"),f.jc(22,"mat-panel-title"),f.Xc(23," Export "),f.ic(),f.ic(),f.Wc(24,W,5,0,"div",6),f.Wc(25,U,2,1,"div",4),f.ic(),f.ic(),f.ic(),f.jc(26,"mat-dialog-actions"),f.jc(27,"button",7),f.Xc(28,"Cancel"),f.ic(),f.jc(29,"button",8),f.Xc(30," Done "),f.ic(),f.ic()),2&e){var t;f.Rb(1),f.Zc("Share ",c.data.name,""),f.Rb(4),f.Zc(" Owner: ",null==(t=f.xc(6,8,c.owner))?null:t.username," "),f.Rb(2),f.Ac("ngModel",c.public),f.Rb(2),f.Ac("ngIf",c.public),f.Rb(10),f.Ac("ngIf",null==c.editors?null:c.editors.length),f.Rb(5),f.Ac("ngIf",c.loaded),f.Rb(1),f.Ac("ngIf",!c.loaded),f.Rb(4),f.Ac("mat-dialog-close",f.Ec(10,J,c.public))}},directives:[k.i,k.f,O.a,o.n,o.q,n.t,D.c,D.g,D.h,k.c,x.b,k.d,C.c,X.a,C.j,_.a,P.a,T.a,n.s,T.d,L.c],pipes:[n.b],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.button-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:4px}"]});var Z=t("/t3+"),G=t("XiUz"),Y=t("Wp6s");function q(e,c){if(1&e&&(f.jc(0,"mat-card-content"),f.jc(1,"p"),f.Xc(2),f.ic(),f.ic()),2&e){const e=f.vc().$implicit;f.Rb(2),f.Zc(" ",e.desc," ")}}function z(e,c){if(1&e){const e=f.kc();f.jc(0,"div",8),f.jc(1,"mat-card"),f.jc(2,"mat-card-header"),f.jc(3,"mat-card-title"),f.Xc(4),f.ic(),f.jc(5,"mat-card-subtitle"),f.Xc(6),f.ic(),f.ic(),f.ec(7,"img",9),f.Wc(8,q,3,1,"mat-card-content",10),f.jc(9,"mat-card-actions"),f.jc(10,"a",11),f.Xc(11,"EDIT"),f.ic(),f.jc(12,"button",12),f.rc("click",(function(){f.Mc(e);const t=c.$implicit;return f.vc(2).beginShare(t)})),f.Xc(13,"SHARE"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=c.$implicit,n=f.vc(2);var t;f.Rb(4),f.Yc(e.name),f.Rb(2),f.ad("By ",(null==(t=n.owners.get(e.owner))?null:t.username)||"loading..."," - ",e.numItems," items "),f.Rb(1),f.Ac("src",e.image||"../../../../assets/img/pack.png",f.Oc),f.Rb(1),f.Ac("ngIf",e.desc),f.Rb(2),f.Bc("routerLink",e._id.$oid)}}function H(e,c){if(1&e&&(f.jc(0,"div",6),f.Wc(1,z,14,6,"div",7),f.ic()),2&e){const e=f.vc();f.Rb(1),f.Ac("ngForOf",e.packs)}}function V(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-card"),f.jc(2,"p"),f.Xc(3,"Looks like you don't have any packs yet."),f.ic(),f.jc(4,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().beginNew()})),f.Xc(5,"Create One"),f.ic(),f.ic(),f.ic()}}class K{constructor(e,c,t,n,i){this.homebrewService=e,this.discord=c,this.dialog=t,this.router=n,this.route=i,this.owners=new Map}ngOnInit(){this.getPacks()}getPacks(){this.homebrewService.getUserPacks().subscribe(e=>{this.packs=e;const c=new Set;for(const t of e)c.has(t.owner)||(c.add(t.owner),this.discord.getUser(t.owner).subscribe(e=>this.owners.set(t.owner,e)))})}beginNew(){this.dialog.open(R,{width:"60%",disableClose:!0}).afterClosed().subscribe(e=>{if(e){let c={name:e.name,public:e.public,desc:e.desc,image:e.image};this.new(c)}})}beginShare(e){this.dialog.open(B,{data:e,width:"40%",disableClose:!0}).afterClosed().subscribe(c=>{c&&(console.log(c),e=Object.assign(e,c),this.commit(e))})}new(e){this.homebrewService.newPack(e).subscribe(e=>{e.success&&this.router.navigate([e.packId],{relativeTo:this.route})})}commit(e){this.homebrewService.putPack(e).subscribe(e=>{console.log(e)})}}K.\u0275fac=function(e){return new(e||K)(f.dc(w),f.dc(u.a),f.dc(k.b),f.dc(m.b),f.dc(m.a))},K.\u0275cmp=f.Xb({type:K,selectors:[["avr-items"]],decls:10,vars:2,consts:[["color","primary",1,"mat-elevation-z2"],[1,"toolbar-spacer"],["mat-icon-button","",3,"click"],["aria-label","New Pack"],["class","container","fxLayout","row wrap","fxLayoutAlign","space-around",4,"ngIf"],["class","container",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-around",1,"container"],["class","pack-tile","fxFlex","32%",4,"ngFor","ngForOf"],["fxFlex","32%",1,"pack-tile"],["mat-card-image","","alt","Pack Image",3,"src"],[4,"ngIf"],["mat-button","",3,"routerLink"],["mat-button","",3,"click"],[1,"container"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"mat-toolbar",0),f.jc(1,"span"),f.Xc(2,"Your Packs"),f.ic(),f.ec(3,"span",1),f.jc(4,"span"),f.jc(5,"button",2),f.rc("click",(function(){return c.beginNew()})),f.jc(6,"mat-icon",3),f.Xc(7,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.Wc(8,H,2,1,"div",4),f.Wc(9,V,6,0,"div",5)),2&e&&(f.Rb(8),f.Ac("ngIf",c.packs&&c.packs.length),f.Rb(1),f.Ac("ngIf",c.packs&&!c.packs.length))},directives:[Z.a,x.b,P.a,n.t,G.f,G.e,n.s,G.b,Y.a,Y.f,Y.m,Y.l,Y.g,Y.b,x.a,m.c,Y.d],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container[_ngcontent-%COMP%], .pack-tile[_ngcontent-%COMP%]{margin:4px}"]});var Q=t("5+WD"),ee=t("9qBq"),ce=t("XwxW"),te=t("QAUA");class ne{constructor(e){this.data=e}ngOnInit(){}}function ie(e,c){if(1&e){const e=f.kc();f.jc(0,"button",9),f.rc("click",(function(){f.Mc(e);return f.vc().beginDelete()})),f.Xc(1,"Delete"),f.ic()}}ne.\u0275fac=function(e){return new(e||ne)(f.dc(k.a))},ne.\u0275cmp=f.Xb({type:ne,selectors:[["avr-pack-delete-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Xc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"p"),f.Xc(4),f.jc(5,"b"),f.Xc(6,"This cannot be undone."),f.ic(),f.ic(),f.ic(),f.jc(7,"mat-dialog-actions"),f.jc(8,"button",2),f.Xc(9,"Cancel"),f.ic(),f.jc(10,"button",3),f.Xc(11," Delete "),f.ic(),f.ic()),2&e&&(f.Rb(1),f.Zc("Deleting ",c.data.name,"..."),f.Rb(3),f.Zc(" Are you sure you want to delete ",c.data.name,"? This will remove the pack from all editors' libraries, and invalidate any sharing links. "),f.Rb(6),f.Ac("mat-dialog-close",!0))},directives:[k.i,k.f,k.c,x.b,k.d],styles:[""]});const oe=function(e,c,t){return{name:e,image:c,desc:t}};class ae{constructor(e,c,t){this.data=e,this.dialog=c,this.dialogRef=t,this.name=e.name,this.image=e.image,this.desc=e.desc,this.isOwner=Object(h.d)().id===e.owner}ngOnInit(){}beginDelete(){this.dialog.open(ne,{data:this.data,width:"40%"}).afterClosed().subscribe(e=>{e&&this.dialogRef.close({delete:!0})})}}ae.\u0275fac=function(e){return new(e||ae)(f.dc(k.a),f.dc(k.b),f.dc(k.h))},ae.\u0275cmp=f.Xb({type:ae,selectors:[["avr-pack-options-dialog"]],decls:16,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Xc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.rc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-form-field"),f.jc(7,"input",4),f.rc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"textarea",5),f.rc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(10,"mat-dialog-actions"),f.jc(11,"button",6),f.Xc(12,"Cancel"),f.ic(),f.jc(13,"button",7),f.Xc(14," Save "),f.ic(),f.Wc(15,ie,2,0,"button",8),f.ic()),2&e&&(f.Rb(1),f.Yc(c.data.name),f.Rb(4),f.Ac("ngModel",c.name),f.Rb(2),f.Ac("ngModel",c.image),f.Rb(2),f.Ac("ngModel",c.desc),f.Rb(4),f.Ac("mat-dialog-close",f.Gc(7,oe,c.name,c.image,c.desc))("disabled",!c.name),f.Rb(2),f.Ac("ngIf",c.isOwner))},directives:[k.i,k.f,C.c,X.a,o.c,o.n,o.q,k.c,x.b,k.d,n.t],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var le=t("dNgK");function se(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field",5),f.jc(1,"input",16),f.rc("change",(function(){f.Mc(e);return f.vc(2).emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc(2).item.image=c})),f.ic(),f.ic()}if(2&e){const e=f.vc(2);f.Rb(1),f.Ac("ngModel",e.item.image)}}function re(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",17),f.rc("click",(function(){f.Mc(e);const c=f.vc(2);return c.item.image="",c.emitChange()})),f.jc(2,"mat-icon",18),f.Xc(3,"add_photo_alternate"),f.ic(),f.ic(),f.ic()}}function de(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",19),f.rc("click",(function(){f.Mc(e);return f.vc(2).moveUp.emit()})),f.jc(2,"mat-icon",20),f.Xc(3,"arrow_upward"),f.ic(),f.ic(),f.ic()}}function me(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",21),f.rc("click",(function(){f.Mc(e);return f.vc(2).moveDown.emit()})),f.jc(2,"mat-icon",22),f.Xc(3,"arrow_downward"),f.ic(),f.ic(),f.ic()}}function ue(e,c){if(1&e){const e=f.kc();f.jc(0,"div",3),f.jc(1,"div",4),f.jc(2,"mat-form-field",5),f.jc(3,"input",6),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().item.name=c})),f.ic(),f.ic(),f.Wc(4,se,2,1,"mat-form-field",7),f.ic(),f.jc(5,"mat-form-field"),f.jc(6,"textarea",8),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().item.meta=c})),f.ic(),f.ic(),f.jc(7,"mat-form-field"),f.jc(8,"textarea",9),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().item.desc=c})),f.ic(),f.ic(),f.ic(),f.jc(9,"div",10),f.Wc(10,re,4,0,"span",7),f.jc(11,"span",5),f.jc(12,"button",11),f.rc("click",(function(){f.Mc(e);return f.vc().beginJSONExport()})),f.jc(13,"mat-icon",12),f.Xc(14,"vertical_align_top"),f.ic(),f.ic(),f.ic(),f.Wc(15,de,4,0,"span",7),f.Wc(16,me,4,0,"span",7),f.ec(17,"span",13),f.jc(18,"span",5),f.jc(19,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().delete.emit()})),f.jc(20,"mat-icon",15),f.Xc(21,"delete"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(3),f.Ac("ngModel",e.item.name),f.Rb(1),f.Ac("ngIf",null!=e.item.image),f.Rb(2),f.Ac("ngModel",e.item.meta),f.Rb(2),f.Ac("ngModel",e.item.desc),f.Rb(2),f.Ac("ngIf",void 0===e.item.image),f.Rb(5),f.Ac("ngIf",!e.isFirst),f.Rb(1),f.Ac("ngIf",!e.isLast)}}class pe{constructor(e){this.dialog=e,this.moveUp=new f.u,this.moveDown=new f.u,this.changed=new f.u,this.opened=new f.u,this.delete=new f.u}ngOnInit(){}emitChange(){this.changed.emit()}beginJSONExport(){this.dialog.open(A.a,{data:{name:this.item.name,data:this.item},width:"60%"})}}pe.\u0275fac=function(e){return new(e||pe)(f.dc(k.b))},pe.\u0275cmp=f.Xb({type:pe,selectors:[["avr-item-detail"]],inputs:{item:"item",isFirst:"isFirst",isLast:"isLast"},outputs:{moveUp:"moveUp",moveDown:"moveDown",changed:"changed",opened:"opened",delete:"delete"},decls:7,vars:2,consts:[[3,"opened"],["markdown","",3,"data"],["matExpansionPanelContent",""],[1,"form-container"],["fxLayout","row","fxLayoutGap","4px"],["fxFlex",""],["matInput","","placeholder","Name",3,"ngModel","change","ngModelChange"],["fxFlex","",4,"ngIf"],["matInput","","placeholder","Meta","rows","3",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Description","rows","7",3,"ngModel","change","ngModelChange"],["fxLayout","row",1,"actions"],["mat-icon-button","","matTooltip","Export to JSON",3,"click"],["aria-label","Export to JSON"],["fxFlex","grow"],["mat-icon-button","","color","warn",3,"click"],["aria-label","Delete"],["matInput","","placeholder","Image URL",3,"ngModel","change","ngModelChange"],["mat-icon-button","","matTooltip","Add image",3,"click"],["aria-label","Add image"],["mat-icon-button","","matTooltip","Move Up",3,"click"],["aria-label","Move Up"],["mat-icon-button","","matTooltip","Move Down",3,"click"],["aria-label","Move Down"]],template:function(e,c){1&e&&(f.jc(0,"mat-expansion-panel",0),f.rc("opened",(function(){return c.opened.emit()})),f.jc(1,"mat-expansion-panel-header"),f.jc(2,"mat-panel-title"),f.jc(3,"div"),f.Xc(4),f.ic(),f.ic(),f.ec(5,"mat-panel-description",1),f.ic(),f.Wc(6,ue,22,7,"ng-template",2),f.ic()),2&e&&(f.Rb(4),f.Zc(" ",c.item.name," "),f.Rb(1),f.Ac("data",c.item.meta.split("\n")[0]))},directives:[D.c,D.g,D.h,D.f,a.a,D.e,G.f,G.g,C.c,G.b,X.a,o.c,o.n,o.q,n.t,x.b,_.a,P.a],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}mat-panel-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto 0}"]});var ge=t("WJbf");function he(e,c){if(1&e){const e=f.kc();f.jc(0,"avr-item-detail",22),f.rc("moveUp",(function(){f.Mc(e);const t=c.$implicit;return f.vc(3).moveUp(t)}))("moveDown",(function(){f.Mc(e);const t=c.$implicit;return f.vc(3).moveDown(t)}))("changed",(function(){f.Mc(e);return f.vc(3).ensureChangesNotif()}))("opened",(function(){f.Mc(e);const t=c.$implicit;return f.vc(3).selectedItem=t}))("delete",(function(){f.Mc(e);const t=c.$implicit;return f.vc(3).deleteItem(t)})),f.ic()}if(2&e){const e=c.$implicit,t=c.first,n=c.last;f.Ac("item",e)("isFirst",t)("isLast",n)}}function be(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-accordion"),f.Wc(2,he,1,3,"avr-item-detail",14),f.jc(3,"mat-card",15),f.jc(4,"span",16),f.Xc(5,"New..."),f.ic(),f.ec(6,"span",4),f.jc(7,"span"),f.jc(8,"button",17),f.rc("click",(function(){f.Mc(e);return f.vc(2).beginNewFromJSON()})),f.jc(9,"mat-icon",18),f.Xc(10,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(11,"button",19),f.rc("click",(function(){f.Mc(e);return f.vc(2).beginNewFromSRD()})),f.jc(12,"mat-icon",20),f.Xc(13,"scanner"),f.ic(),f.ic(),f.jc(14,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc(2).newLooseItem()})),f.jc(15,"mat-icon",21),f.Xc(16,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc(2);f.Rb(2),f.Ac("ngForOf",e.pack.items)}}function fe(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-card"),f.jc(2,"p"),f.Xc(3,"Looks like this pack is empty."),f.ic(),f.jc(4,"button",23),f.rc("click",(function(){f.Mc(e);return f.vc(2).newLooseItem()})),f.Xc(5,"Make an Item"),f.ic(),f.jc(6,"button",17),f.rc("click",(function(){f.Mc(e);return f.vc(2).beginNewFromJSON()})),f.jc(7,"mat-icon",18),f.Xc(8,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(9,"button",19),f.rc("click",(function(){f.Mc(e);return f.vc(2).beginNewFromSRD()})),f.jc(10,"mat-icon",20),f.Xc(11,"scanner"),f.ic(),f.ic(),f.ic(),f.ic()}}const ve=function(e,c){return{name:e,icon_url:c}},je=function(e){return{name:"Description",value:e}},Me=function(e){return[e]},we=function(){return{text:"Homebrew content.",icon_url:"../../../../assets/img/homebrew.png"}};function ke(e,c){if(1&e&&f.ec(0,"avr-discord-embed",24),2&e){const e=f.vc(2);f.Ac("author",f.Fc(6,ve,e.user.username,e.user.avatarUrl))("title",e.selectedItem.name)("description",e.selectedItem.meta)("fields",f.Ec(11,Me,f.Ec(9,je,e.selectedItem.desc)))("thumbnail",e.selectedItem.image)("footer",f.Dc(13,we))}}function Ce(e,c){if(1&e&&f.ec(0,"avr-discord-embed",25),2&e){const e=f.vc(2);f.Ac("author",f.Fc(2,ve,e.user.username,e.user.avatarUrl))("footer",f.Dc(5,we))}}function Xe(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"mat-toolbar",1),f.jc(2,"span"),f.jc(3,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().back()})),f.jc(4,"mat-icon",3),f.Xc(5,"arrow_back"),f.ic(),f.ic(),f.ic(),f.jc(6,"span"),f.Xc(7),f.ic(),f.ec(8,"span",4),f.jc(9,"span"),f.jc(10,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().commit()})),f.jc(11,"mat-icon",5),f.Xc(12,"save"),f.ic(),f.ic(),f.jc(13,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().beginSettings()})),f.jc(14,"mat-icon",6),f.Xc(15,"settings"),f.ic(),f.ic(),f.jc(16,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().beginShare()})),f.jc(17,"mat-icon",7),f.Xc(18,"launch"),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(19,"div",8),f.Wc(20,be,17,1,"div",9),f.Wc(21,fe,12,0,"div",9),f.jc(22,"div",10),f.Wc(23,ke,1,14,"avr-discord-embed",11),f.Wc(24,Ce,1,6,"avr-discord-embed",12),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(7),f.Zc(" ",e.pack.name," "),f.Rb(13),f.Ac("ngIf",e.pack.items.length),f.Rb(1),f.Ac("ngIf",!e.pack.items.length),f.Rb(2),f.Ac("ngIf",e.selectedItem),f.Rb(1),f.Ac("ngIf",!e.selectedItem)}}function Oe(e,c){1&e&&(f.jc(0,"div"),f.jc(1,"div",26),f.jc(2,"mat-card"),f.ec(3,"mat-spinner",27),f.ic(),f.ic(),f.ic()),2&e&&(f.Rb(3),f.Ac("diameter",24))}function xe(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"div",26),f.jc(2,"mat-card"),f.jc(3,"p"),f.Xc(4,"You do not have permission to edit this pack."),f.ic(),f.jc(5,"button",23),f.rc("click",(function(){f.Mc(e);return f.vc().back()})),f.Xc(6,"Go Back"),f.ic(),f.ic(),f.ic(),f.ic()}}class Se{constructor(e,c,t,n,i,o,a){this.route=e,this.homebrewService=c,this.dashboardService=t,this.location=n,this.dialog=i,this.router=o,this.snackBar=a,this.user=Object(h.d)(),this.changesOpen=!1}ngOnInit(){this.getPack()}ngOnDestroy(){this.snackBar.dismiss()}getPack(){const e=this.route.snapshot.paramMap.get("pack");this.homebrewService.getPack(e).subscribe(e=>{this.pack=e,this.calcCanEdit()})}calcCanEdit(){if(this.pack&&this.user)if(this.isOwner=this.user.id===this.pack.owner,this.isOwner)this.canEdit=!0;else{const e=this.pack._id.$oid;this.homebrewService.getPackEditors(e).subscribe(e=>this.canEdit=e.some(e=>e===this.user.id))}}newLooseItem(){this.pack.items.push(new I),this.ensureChangesNotif()}deleteItem(e){this.pack.items=this.pack.items.filter(c=>c!==e),this.ensureChangesNotif()}ensureChangesNotif(){if(!this.changesOpen){this.changesOpen=!0,this.snackBar.open("You have unsaved changes!","Save",{duration:-1,horizontalPosition:"right"}).onAction().subscribe(()=>{this.commit()})}}beginShare(){this.dialog.open(B,{data:this.pack,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),this.pack=Object.assign(this.pack,e),this.commit())})}beginSettings(){this.dialog.open(ae,{data:this.pack,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),e.delete?this.delete():(this.pack=Object.assign(this.pack,e),this.commit()))})}beginNewFromJSON(){const e=this.dialog.open(ee.a,{width:"60%",disableClose:!0,data:{validator:c=>this.validatePackJSON(e,c)}});e.afterClosed().subscribe(e=>{if(e){const c=e;console.log(c),c instanceof Array?this.pack.items.push(...c):this.pack.items.push(c),this.ensureChangesNotif()}})}beginNewFromSRD(){this.dialog.open(ce.a,{width:"60%",disableClose:!0,data:{getter:()=>this.homebrewService.getTemplateItems(),namer:e=>e.name}}).afterClosed().subscribe(e=>{e&&(this.pack.items.push(e),this.ensureChangesNotif())})}packIsValid(e){return e instanceof Array?Boolean(e.length)&&e.every(e=>this.objectIsItem(e)):!!e&&this.objectIsItem(e)}validatePackJSON(e,c){e.componentInstance.loading=!1,this.packIsValid(c)?e.close(JSON.parse(e.componentInstance.data)):e.componentInstance.error="Invalid pack data"}objectIsItem(e){return y.every(c=>c in e)}commit(){this.homebrewService.putPack(this.pack).subscribe(e=>{console.log(e),this.changesOpen=!1,this.snackBar.open(`${e} Use "!pack ${this.pack.name}" to activate the pack in Discord!`,null,{horizontalPosition:"right"})})}delete(){this.homebrewService.deletePack(this.pack).subscribe(e=>{console.log(e),this.router.navigate(["../"],{relativeTo:this.route})})}back(){this.location.back()}moveUp(e){const c=this.pack.items.indexOf(e),t=c-1;t>-1&&(Object(Q.a)(this.pack.items,c,t),this.ensureChangesNotif())}moveDown(e){const c=this.pack.items.indexOf(e),t=c+1;t<this.pack.items.length&&(Object(Q.a)(this.pack.items,c,t),this.ensureChangesNotif())}}Se.\u0275fac=function(e){return new(e||Se)(f.dc(m.a),f.dc(w),f.dc(te.a),f.dc(n.n),f.dc(k.b),f.dc(m.b),f.dc(le.b))},Se.\u0275cmp=f.Xb({type:Se,selectors:[["avr-pack-detail"]],decls:3,vars:3,consts:[[4,"ngIf"],["color","primary",1,"pack-toolbar"],["mat-icon-button","",3,"click"],["aria-label","Back"],[1,"toolbar-spacer"],["aria-label","Save"],["aria-label","Settings"],["aria-label","Share"],["fxLayout","row","fxLayoutGap","8px",1,"container"],["class","item-list","fxFlex","grow",4,"ngIf"],["fxFlex","grow",1,"item-preview","mat-typography","mat-elevation-z3"],[3,"author","title","description","fields","thumbnail","footer",4,"ngIf"],["title","No item selected.","description","Click on an item on the left to see a preview!",3,"author","footer",4,"ngIf"],["fxFlex","grow",1,"item-list"],[3,"item","isFirst","isLast","moveUp","moveDown","changed","opened","delete",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"new-item-card"],[1,"no-text-cursor"],["mat-icon-button","","matTooltip","Import from JSON",3,"click"],["aria-label","Import from JSON"],["mat-icon-button","","matTooltip","Copy SRD item",3,"click"],["aria-label","From existing item"],["aria-label","New"],[3,"item","isFirst","isLast","moveUp","moveDown","changed","opened","delete"],["mat-raised-button","","color","accent",3,"click"],[3,"author","title","description","fields","thumbnail","footer"],["title","No item selected.","description","Click on an item on the left to see a preview!",3,"author","footer"],[1,"container"],[3,"diameter"]],template:function(e,c){1&e&&(f.Wc(0,Xe,25,5,"div",0),f.Wc(1,Oe,4,1,"div",0),f.Wc(2,xe,7,0,"div",0)),2&e&&(f.Ac("ngIf",c.pack&&null!=c.canEdit),f.Rb(1),f.Ac("ngIf",!c.pack),f.Rb(1),f.Ac("ngIf",c.pack&&!c.canEdit))},directives:[n.t,Z.a,x.b,P.a,G.f,G.g,G.b,D.a,n.s,Y.a,G.e,_.a,pe,ge.a,L.c],styles:[".pack-toolbar[_ngcontent-%COMP%]{height:64px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.item-list[_ngcontent-%COMP%], .item-preview[_ngcontent-%COMP%]{max-height:calc(100vh - 192px);overflow-y:auto}.container[_ngcontent-%COMP%]{margin:8px}.new-item-card[_ngcontent-%COMP%]{height:48px;padding:0 24px}.no-text-cursor[_ngcontent-%COMP%]{cursor:default}"]});const Re=function(e,c,t,n){return{name:e,public:c,image:t,desc:n}};class ye{constructor(){this.public=!1,this.desc="",this.image=""}ngOnInit(){}}ye.\u0275fac=function(e){return new(e||ye)},ye.\u0275cmp=f.Xb({type:ye,selectors:[["avr-new-pack-dialog"]],decls:19,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],[1,"mat-small"],["mat-button","","mat-dialog-close","","tabindex","1"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Xc(1,"New Tome..."),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.rc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-slide-toggle",4),f.rc("ngModelChange",(function(e){return c.public=e})),f.Xc(7,"Allow public to view"),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"input",5),f.rc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(10,"mat-form-field"),f.jc(11,"textarea",6),f.rc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.jc(12,"p",7),f.Xc(13," These settings can be changed at any time. "),f.ic(),f.ic(),f.jc(14,"mat-dialog-actions"),f.jc(15,"button",8),f.Xc(16,"Cancel"),f.ic(),f.jc(17,"button",9),f.Xc(18," Create "),f.ic(),f.ic()),2&e&&(f.Rb(5),f.Ac("ngModel",c.name),f.Rb(1),f.Ac("ngModel",c.public),f.Rb(3),f.Ac("ngModel",c.image),f.Rb(2),f.Ac("ngModel",c.desc),f.Rb(6),f.Ac("mat-dialog-close",f.Hc(6,Re,c.name,c.public,c.image,c.desc))("disabled",!c.name))},directives:[k.i,k.f,C.c,X.a,o.c,o.n,o.q,O.a,k.c,x.b,k.d],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var Ie=t("jgxE");class Ae{constructor(e){this.data=e,this.generateMD(this.data.data)}ngOnInit(){}generateMD(e){let c="";c+=`${"# "+e.name}\n${e.desc||""}\n\n`;for(const t of e.spells)c+=this.generateSpellMD(t);c=c.replace("\n","\n  "),this.mdData=c}generateSpellMD(e){const c="#### "+e.name,t=e.level?`${Object(Ie.d)(e.level)} ${Object(Ie.e)(e.school)}`:`${Object(Ie.e)(e.school)} ${Object(Ie.d)(e.level)}`,n=`- **Casting Time:** ${e.casttime+(e.ritual?" (ritual)":"")}\n- **Range:** ${e.range}\n- **Components:** ${Object(Ie.c)(e)}\n- **Duration:** ${(e.concentration?"Concentration, up to ":"")+e.duration}`;let i=e.description;return e.higherlevels&&(i=`${i}\n\n**At Higher Levels:** ${e.higherlevels}`),`${c}\n*${t}*\n___\n${n}\n\n${i}\n\n`}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}}function _e(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field"),f.ec(1,"input",9,10),f.jc(3,"button",11),f.rc("click",(function(){f.Mc(e);const c=f.Jc(2);return f.vc().copy(c)})),f.jc(4,"mat-icon"),f.Xc(5,"file_copy"),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(1),f.Ac("value",e.shareLink)}}function Pe(e,c){if(1&e&&(f.jc(0,"mat-list-item"),f.Xc(1),f.wc(2,"async"),f.ic()),2&e){const e=c.$implicit;var t;f.Rb(1),f.Yc(null==(t=f.xc(2,1,e))?null:t.username)}}function Ee(e,c){if(1&e&&(f.jc(0,"mat-list"),f.Wc(1,Pe,3,3,"mat-list-item",12),f.ic()),2&e){const e=f.vc();f.Rb(1),f.Ac("ngForOf",e.editors)}}function De(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().beginJSONExport()})),f.Xc(2,"Export to JSON "),f.ic(),f.jc(3,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().beginMDExport()})),f.Xc(4,"Export to Homebrewery "),f.ic(),f.ic()}}function Te(e,c){1&e&&(f.jc(0,"div"),f.ec(1,"mat-spinner",15),f.ic()),2&e&&(f.Rb(1),f.Ac("diameter",24))}Ae.\u0275fac=function(e){return new(e||Ae)(f.dc(k.a))},Ae.\u0275cmp=f.Xb({type:Ae,selectors:[["avr-tome-markdown-dialog"]],decls:27,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","readonly","","placeholder","Markdown","rows","10",3,"value"],["mdElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(e,c){if(1&e){const e=f.kc();f.jc(0,"h2",0),f.Xc(1),f.ic(),f.Xc(2,"\n"),f.jc(3,"mat-dialog-content",1),f.Xc(4,"\n  "),f.jc(5,"div",2),f.Xc(6,"\n    "),f.jc(7,"mat-form-field"),f.Xc(8,"\n      "),f.ec(9,"textarea",3,4),f.Xc(11,"\n      "),f.jc(12,"button",5),f.rc("click",(function(){f.Mc(e);const t=f.Jc(10);return c.copy(t)})),f.Xc(13,"\n        "),f.jc(14,"mat-icon"),f.Xc(15,"file_copy"),f.ic(),f.Xc(16,"\n      "),f.ic(),f.Xc(17,"\n    "),f.ic(),f.Xc(18,"\n  "),f.ic(),f.Xc(19,"\n"),f.ic(),f.Xc(20,"\n"),f.jc(21,"mat-dialog-actions"),f.Xc(22,"\n  "),f.jc(23,"button",6),f.Xc(24,"Done"),f.ic(),f.Xc(25,"\n"),f.ic(),f.Xc(26,"\n")}2&e&&(f.Rb(1),f.Zc("Markdown - ",c.data.name,""),f.Rb(8),f.Ac("value",c.mdData))},directives:[k.i,k.f,C.c,X.a,x.b,C.j,_.a,P.a,k.c,k.d],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});const Le=function(e){return{public:e}};class Ne{constructor(e,c,t,n){this.data=e,this.dialog=c,this.hbService=t,this.discord=n,this.public=e.public,this.shareLink="https://avrae.io/homebrew/spells/"+e._id.$oid,this.loaded=void 0!==e.spells}ngOnInit(){this.owner=this.discord.getUser(this.data.owner),this.loadEditors(),this.loaded||this.loadSpells()}loadEditors(){const e=this.data._id.$oid;this.hbService.getTomeEditors(e).subscribe(e=>{const c=[];e.forEach(e=>c.push(this.discord.getUser(e))),this.editors=c})}loadSpells(){const e=this.data._id.$oid;this.hbService.getTome(e).subscribe(e=>{this.data=e,this.loaded=!0})}copy(e){e.select(),document.execCommand("copy"),e.setSelectionRange(0,0)}beginJSONExport(){this.dialog.open(A.a,{data:{name:this.data.name,data:this.data.spells},width:"60%"})}beginMDExport(){this.dialog.open(Ae,{data:{name:this.data.name,data:this.data},width:"60%"})}}function $e(e,c){if(1&e&&(f.jc(0,"mat-card-content"),f.jc(1,"p"),f.Xc(2),f.ic(),f.ic()),2&e){const e=f.vc().$implicit;f.Rb(2),f.Zc(" ",e.desc," ")}}function Fe(e,c){if(1&e){const e=f.kc();f.jc(0,"div",8),f.jc(1,"mat-card"),f.jc(2,"mat-card-header"),f.jc(3,"mat-card-title"),f.Xc(4),f.ic(),f.jc(5,"mat-card-subtitle"),f.Xc(6),f.ic(),f.ic(),f.ec(7,"img",9),f.Wc(8,$e,3,1,"mat-card-content",10),f.jc(9,"mat-card-actions"),f.jc(10,"a",11),f.Xc(11,"EDIT"),f.ic(),f.jc(12,"button",12),f.rc("click",(function(){f.Mc(e);const t=c.$implicit;return f.vc(2).beginShare(t)})),f.Xc(13,"SHARE"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=c.$implicit,n=f.vc(2);var t;f.Rb(4),f.Yc(e.name),f.Rb(2),f.ad("By ",(null==(t=n.owners.get(e.owner))?null:t.username)||"loading..."," - ",e.numSpells," spells "),f.Rb(1),f.Ac("src",e.image||"../../../../assets/img/tome.png",f.Oc),f.Rb(1),f.Ac("ngIf",e.desc),f.Rb(2),f.Bc("routerLink",e._id.$oid)}}function We(e,c){if(1&e&&(f.jc(0,"div",6),f.Wc(1,Fe,14,6,"div",7),f.ic()),2&e){const e=f.vc();f.Rb(1),f.Ac("ngForOf",e.tomes)}}function Ue(e,c){if(1&e){const e=f.kc();f.jc(0,"div",13),f.jc(1,"mat-card"),f.jc(2,"p"),f.Xc(3,"Looks like you don't have any tomes yet."),f.ic(),f.jc(4,"button",14),f.rc("click",(function(){f.Mc(e);return f.vc().beginNew()})),f.Xc(5,"Create One"),f.ic(),f.ic(),f.ic()}}Ne.\u0275fac=function(e){return new(e||Ne)(f.dc(k.a),f.dc(k.b),f.dc(w),f.dc(u.a))},Ne.\u0275cmp=f.Xb({type:Ne,selectors:[["avr-pack-share-dialog"]],decls:31,vars:12,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"mat-elevation-z0"],["class","button-row",4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"],["matInput","","readonly","","placeholder","View Link",3,"value"],["shareLinkElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],[4,"ngFor","ngForOf"],[1,"button-row"],["mat-raised-button","","color","primary",3,"click"],[3,"diameter"]],template:function(e,c){if(1&e&&(f.jc(0,"h2",0),f.Xc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"p"),f.Xc(5),f.wc(6,"async"),f.ic(),f.jc(7,"mat-slide-toggle",3),f.rc("ngModelChange",(function(e){return c.public=e})),f.Xc(8,"Allow public to view"),f.ic(),f.Wc(9,_e,6,1,"mat-form-field",4),f.jc(10,"mat-expansion-panel",5),f.jc(11,"mat-expansion-panel-header"),f.jc(12,"mat-panel-title"),f.Xc(13," Editors "),f.ic(),f.ic(),f.jc(14,"p"),f.Xc(15,"To add or remove an editor, run the command "),f.jc(16,"kbd"),f.Xc(17,"!tome editor @user"),f.ic(),f.Xc(18," in Discord!"),f.ic(),f.Wc(19,Ee,2,1,"mat-list",4),f.ic(),f.jc(20,"mat-expansion-panel",5),f.jc(21,"mat-expansion-panel-header"),f.jc(22,"mat-panel-title"),f.Xc(23," Export "),f.ic(),f.ic(),f.Wc(24,De,5,0,"div",6),f.Wc(25,Te,2,1,"div",4),f.ic(),f.ic(),f.ic(),f.jc(26,"mat-dialog-actions"),f.jc(27,"button",7),f.Xc(28,"Cancel"),f.ic(),f.jc(29,"button",8),f.Xc(30," Done "),f.ic(),f.ic()),2&e){var t;f.Rb(1),f.Zc("Share ",c.data.name,""),f.Rb(4),f.Zc(" Owner: ",null==(t=f.xc(6,8,c.owner))?null:t.username," "),f.Rb(2),f.Ac("ngModel",c.public),f.Rb(2),f.Ac("ngIf",c.public),f.Rb(10),f.Ac("ngIf",null==c.editors?null:c.editors.length),f.Rb(5),f.Ac("ngIf",c.loaded),f.Rb(1),f.Ac("ngIf",!c.loaded),f.Rb(4),f.Ac("mat-dialog-close",f.Ec(10,Le,c.public))}},directives:[k.i,k.f,O.a,o.n,o.q,n.t,D.c,D.g,D.h,k.c,x.b,k.d,C.c,X.a,C.j,_.a,P.a,T.a,n.s,T.d,L.c],pipes:[n.b],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.button-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:4px}"]});class Je{constructor(e,c,t,n,i){this.homebrewService=e,this.discord=c,this.dialog=t,this.router=n,this.route=i,this.owners=new Map}ngOnInit(){this.getTomes()}getTomes(){this.homebrewService.getUserTomes().subscribe(e=>{this.tomes=e;const c=new Set;for(const t of e)c.has(t.owner)||(c.add(t.owner),this.discord.getUser(t.owner).subscribe(e=>this.owners.set(t.owner,e)))})}beginNew(){this.dialog.open(ye,{width:"60%",disableClose:!0}).afterClosed().subscribe(e=>{if(e){let c={name:e.name,public:e.public,desc:e.desc,image:e.image};this.new(c)}})}beginShare(e){this.dialog.open(Ne,{data:e,width:"40%",disableClose:!0}).afterClosed().subscribe(c=>{c&&(console.log(c),e=Object.assign(e,c),this.commit(e))})}new(e){this.homebrewService.newTome(e).subscribe(e=>{e.success&&this.router.navigate([e.tomeId],{relativeTo:this.route})})}commit(e){this.homebrewService.putTome(e).subscribe(e=>{console.log(e)})}}Je.\u0275fac=function(e){return new(e||Je)(f.dc(w),f.dc(u.a),f.dc(k.b),f.dc(m.b),f.dc(m.a))},Je.\u0275cmp=f.Xb({type:Je,selectors:[["avr-spells"]],decls:10,vars:2,consts:[["color","primary",1,"mat-elevation-z2"],[1,"toolbar-spacer"],["mat-icon-button","",3,"click"],["aria-label","New Tome"],["class","container","fxLayout","row wrap","fxLayoutAlign","space-around",4,"ngIf"],["class","container",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-around",1,"container"],["class","tome-tile","fxFlex","32%",4,"ngFor","ngForOf"],["fxFlex","32%",1,"tome-tile"],["mat-card-image","","alt","Tome Image",3,"src"],[4,"ngIf"],["mat-button","",3,"routerLink"],["mat-button","",3,"click"],[1,"container"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"mat-toolbar",0),f.jc(1,"span"),f.Xc(2,"Your Tomes"),f.ic(),f.ec(3,"span",1),f.jc(4,"span"),f.jc(5,"button",2),f.rc("click",(function(){return c.beginNew()})),f.jc(6,"mat-icon",3),f.Xc(7,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.Wc(8,We,2,1,"div",4),f.Wc(9,Ue,6,0,"div",5)),2&e&&(f.Rb(8),f.Ac("ngIf",c.tomes&&c.tomes.length),f.Rb(1),f.Ac("ngIf",c.tomes&&!c.tomes.length))},directives:[Z.a,x.b,P.a,n.t,G.f,G.e,n.s,G.b,Y.a,Y.f,Y.m,Y.l,Y.g,Y.b,x.a,m.c,Y.d],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container[_ngcontent-%COMP%], .pack-tile[_ngcontent-%COMP%]{margin:4px}"]});class Be{constructor(e){this.data=e}ngOnInit(){}}function Ze(e,c){if(1&e){const e=f.kc();f.jc(0,"button",9),f.rc("click",(function(){f.Mc(e);return f.vc().beginDelete()})),f.Xc(1,"Delete"),f.ic()}}Be.\u0275fac=function(e){return new(e||Be)(f.dc(k.a))},Be.\u0275cmp=f.Xb({type:Be,selectors:[["avr-tome-delete-dialog"]],decls:12,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Xc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"p"),f.Xc(4),f.jc(5,"b"),f.Xc(6,"This cannot be undone."),f.ic(),f.ic(),f.ic(),f.jc(7,"mat-dialog-actions"),f.jc(8,"button",2),f.Xc(9,"Cancel"),f.ic(),f.jc(10,"button",3),f.Xc(11," Delete "),f.ic(),f.ic()),2&e&&(f.Rb(1),f.Zc("Deleting ",c.data.name,"..."),f.Rb(3),f.Zc(" Are you sure you want to delete ",c.data.name,"? This will remove the tome from all editors' libraries, and invalidate any sharing links. "),f.Rb(6),f.Ac("mat-dialog-close",!0))},directives:[k.i,k.f,k.c,x.b,k.d],encapsulation:2});const Ge=function(e,c,t){return{name:e,image:c,desc:t}};class Ye{constructor(e,c,t){this.data=e,this.dialog=c,this.dialogRef=t,this.name=e.name,this.image=e.image,this.desc=e.desc,this.isOwner=Object(h.d)().id===e.owner}ngOnInit(){}beginDelete(){this.dialog.open(Be,{data:this.data,width:"40%"}).afterClosed().subscribe(e=>{e&&this.dialogRef.close({delete:!0})})}}Ye.\u0275fac=function(e){return new(e||Ye)(f.dc(k.a),f.dc(k.b),f.dc(k.h))},Ye.\u0275cmp=f.Xb({type:Ye,selectors:[["avr-tome-options-dialog"]],decls:16,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],["matInput","","placeholder","Name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Image URL",3,"ngModel","ngModelChange"],["matInput","","placeholder","Description",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"h2",0),f.Xc(1),f.ic(),f.jc(2,"mat-dialog-content",1),f.jc(3,"div",2),f.jc(4,"mat-form-field"),f.jc(5,"input",3),f.rc("ngModelChange",(function(e){return c.name=e})),f.ic(),f.ic(),f.jc(6,"mat-form-field"),f.jc(7,"input",4),f.rc("ngModelChange",(function(e){return c.image=e})),f.ic(),f.ic(),f.jc(8,"mat-form-field"),f.jc(9,"textarea",5),f.rc("ngModelChange",(function(e){return c.desc=e})),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(10,"mat-dialog-actions"),f.jc(11,"button",6),f.Xc(12,"Cancel"),f.ic(),f.jc(13,"button",7),f.Xc(14," Save "),f.ic(),f.Wc(15,Ze,2,0,"button",8),f.ic()),2&e&&(f.Rb(1),f.Yc(c.data.name),f.Rb(4),f.Ac("ngModel",c.name),f.Rb(2),f.Ac("ngModel",c.image),f.Rb(2),f.Ac("ngModel",c.desc),f.Rb(4),f.Ac("mat-dialog-close",f.Gc(7,Ge,c.name,c.image,c.desc))("disabled",!c.name),f.Rb(2),f.Ac("ngIf",c.isOwner))},directives:[k.i,k.f,C.c,X.a,o.c,o.n,o.q,k.c,x.b,k.d,n.t],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}"]});var qe=t("wZkO"),ze=(t("rHON"),t("5w/X"));class He{constructor(){}genDesc(){this.description=this.level?`${Object(Ie.d)(this.level)} ${Object(Ie.e)(this.school)}`:`${Object(Ie.e)(this.school)} ${Object(Ie.d)(this.level)}`}ngOnInit(){this.genDesc()}ngOnChanges(e){this.genDesc()}}He.\u0275fac=function(e){return new(e||He)},He.\u0275cmp=f.Xb({type:He,selectors:[["avr-spell-panel-description"]],inputs:{level:"level",school:"school"},features:[f.Pb],decls:2,vars:1,template:function(e,c){1&e&&(f.jc(0,"mat-panel-description"),f.Xc(1),f.ic()),2&e&&(f.Rb(1),f.Yc(c.description))},directives:[D.f],encapsulation:2});var Ve=t("d3UM"),Ke=t("FKr1"),Qe=t("bSwM");function ec(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-form-field",5),f.jc(1,"input",34),f.rc("change",(function(){f.Mc(e);return f.vc(2).emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc(2).spell.image=c})),f.ic(),f.ic()}if(2&e){const e=f.vc(2);f.Rb(1),f.Ac("ngModel",e.spell.image)}}function cc(e,c){if(1&e){const e=f.kc();f.jc(0,"mat-select",9),f.rc("valueChange",(function(c){f.Mc(e);return f.vc(2).spell.school=c}))("selectionChange",(function(){f.Mc(e);return f.vc(2).emitChange()})),f.jc(1,"mat-option",35),f.Xc(2,"Abjuration"),f.ic(),f.jc(3,"mat-option",36),f.Xc(4,"Conjuration"),f.ic(),f.jc(5,"mat-option",37),f.Xc(6,"Divination"),f.ic(),f.jc(7,"mat-option",38),f.Xc(8,"Enchantment"),f.ic(),f.jc(9,"mat-option",39),f.Xc(10,"Evocation"),f.ic(),f.jc(11,"mat-option",40),f.Xc(12,"Illusion"),f.ic(),f.jc(13,"mat-option",41),f.Xc(14,"Necromancy"),f.ic(),f.jc(15,"mat-option",42),f.Xc(16,"Transmutation"),f.ic(),f.jc(17,"mat-option",43),f.rc("click",(function(){f.Mc(e);return f.vc(2).customSpellSchool=!0})),f.Xc(18,"Custom"),f.ic(),f.ic()}if(2&e){const e=f.vc(2);f.Ac("value",e.spell.school)}}function tc(e,c){if(1&e){const e=f.kc();f.jc(0,"input",44),f.rc("change",(function(){f.Mc(e);return f.vc(2).emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc(2).spell.school=c})),f.ic()}if(2&e){const e=f.vc(2);f.Ac("ngModel",e.spell.school)}}function nc(e,c){if(1&e){const e=f.kc();f.jc(0,"button",45),f.rc("click",(function(){f.Mc(e);return f.vc(2).customSpellSchool=!1})),f.jc(1,"mat-icon"),f.Xc(2,"remove_circle_outline"),f.ic(),f.ic()}}function ic(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",46),f.rc("click",(function(){f.Mc(e);const c=f.vc(2);return c.spell.image="",c.emitChange()})),f.jc(2,"mat-icon",47),f.Xc(3,"add_photo_alternate"),f.ic(),f.ic(),f.ic()}}function oc(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",48),f.rc("click",(function(){f.Mc(e);return f.vc(2).moveUp.emit()})),f.jc(2,"mat-icon",49),f.Xc(3,"arrow_upward"),f.ic(),f.ic(),f.ic()}}function ac(e,c){if(1&e){const e=f.kc();f.jc(0,"span",5),f.jc(1,"button",50),f.rc("click",(function(){f.Mc(e);return f.vc(2).moveDown.emit()})),f.jc(2,"mat-icon",51),f.Xc(3,"arrow_downward"),f.ic(),f.ic(),f.ic()}}function lc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",3),f.jc(1,"div",4),f.jc(2,"mat-form-field",5),f.jc(3,"input",6),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.name=c})),f.ic(),f.ic(),f.Wc(4,ec,2,1,"mat-form-field",7),f.ic(),f.jc(5,"div",8),f.jc(6,"mat-form-field",5),f.jc(7,"mat-label"),f.Xc(8,"Level"),f.ic(),f.jc(9,"mat-select",9),f.rc("valueChange",(function(c){f.Mc(e);return f.vc().spell.level=c}))("selectionChange",(function(){f.Mc(e);return f.vc().emitChange()})),f.jc(10,"mat-option",10),f.Xc(11,"Cantrip"),f.ic(),f.jc(12,"mat-option",10),f.Xc(13,"1st Level"),f.ic(),f.jc(14,"mat-option",10),f.Xc(15,"2nd Level"),f.ic(),f.jc(16,"mat-option",10),f.Xc(17,"3rd Level"),f.ic(),f.jc(18,"mat-option",10),f.Xc(19,"4th Level"),f.ic(),f.jc(20,"mat-option",10),f.Xc(21,"5th Level"),f.ic(),f.jc(22,"mat-option",10),f.Xc(23,"6th Level"),f.ic(),f.jc(24,"mat-option",10),f.Xc(25,"7th Level"),f.ic(),f.jc(26,"mat-option",10),f.Xc(27,"8th Level"),f.ic(),f.jc(28,"mat-option",10),f.Xc(29,"9th Level"),f.ic(),f.ic(),f.ic(),f.jc(30,"mat-form-field",5),f.jc(31,"mat-label"),f.Xc(32,"School"),f.ic(),f.Wc(33,cc,19,1,"mat-select",11),f.Wc(34,tc,1,1,"input",12),f.Wc(35,nc,3,0,"button",13),f.ic(),f.jc(36,"mat-checkbox",14),f.rc("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.ritual=c}))("change",(function(){f.Mc(e);return f.vc().emitChange()})),f.Xc(37,"Ritual"),f.ic(),f.ic(),f.jc(38,"div",15),f.jc(39,"mat-form-field",5),f.jc(40,"input",16),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.casttime=c})),f.ic(),f.ic(),f.jc(41,"mat-form-field",5),f.jc(42,"input",17),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.range=c})),f.ic(),f.ic(),f.ic(),f.jc(43,"div",8),f.jc(44,"mat-checkbox",14),f.rc("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.components.verbal=c}))("change",(function(){f.Mc(e);return f.vc().emitChange()})),f.Xc(45," Verbal "),f.ic(),f.jc(46,"mat-checkbox",14),f.rc("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.components.somatic=c}))("change",(function(){f.Mc(e);return f.vc().emitChange()})),f.Xc(47," Somatic "),f.ic(),f.jc(48,"mat-form-field",5),f.jc(49,"input",18),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.components.material=c})),f.ic(),f.ic(),f.ic(),f.jc(50,"div",8),f.jc(51,"mat-form-field",5),f.jc(52,"input",19),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.duration=c})),f.ic(),f.ic(),f.jc(53,"mat-checkbox",14),f.rc("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.concentration=c}))("change",(function(){f.Mc(e);return f.vc().emitChange()})),f.Xc(54," Concentration "),f.ic(),f.ic(),f.jc(55,"mat-form-field"),f.jc(56,"textarea",20),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.description=c})),f.ic(),f.ic(),f.jc(57,"mat-form-field"),f.jc(58,"textarea",21),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.higherlevels=c})),f.ic(),f.ic(),f.jc(59,"div",15),f.jc(60,"mat-form-field",22),f.jc(61,"input",23),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.classes=c})),f.ic(),f.ic(),f.jc(62,"mat-form-field",24),f.jc(63,"input",25),f.rc("change",(function(){f.Mc(e);return f.vc().emitChange()}))("ngModelChange",(function(c){f.Mc(e);return f.vc().spell.subclasses=c})),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(64,"div",26),f.Wc(65,ic,4,0,"span",7),f.jc(66,"span",5),f.jc(67,"button",27),f.rc("click",(function(){f.Mc(e);return f.vc().beginJSONExport()})),f.jc(68,"mat-icon",28),f.Xc(69,"vertical_align_top"),f.ic(),f.ic(),f.ic(),f.jc(70,"span",5),f.jc(71,"button",29),f.rc("click",(function(){f.Mc(e);return f.vc().moveToEditor.emit()})),f.jc(72,"mat-icon",30),f.Xc(73,"build"),f.ic(),f.ic(),f.ic(),f.Wc(74,oc,4,0,"span",7),f.Wc(75,ac,4,0,"span",7),f.ec(76,"span",31),f.jc(77,"span",5),f.jc(78,"button",32),f.rc("click",(function(){f.Mc(e);return f.vc().delete.emit()})),f.jc(79,"mat-icon",33),f.Xc(80,"delete"),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(3),f.Ac("ngModel",e.spell.name),f.Rb(1),f.Ac("ngIf",null!=e.spell.image),f.Rb(5),f.Ac("value",e.spell.level),f.Rb(1),f.Ac("value",0),f.Rb(2),f.Ac("value",1),f.Rb(2),f.Ac("value",2),f.Rb(2),f.Ac("value",3),f.Rb(2),f.Ac("value",4),f.Rb(2),f.Ac("value",5),f.Rb(2),f.Ac("value",6),f.Rb(2),f.Ac("value",7),f.Rb(2),f.Ac("value",8),f.Rb(2),f.Ac("value",9),f.Rb(5),f.Ac("ngIf",!e.customSpellSchool),f.Rb(1),f.Ac("ngIf",e.customSpellSchool),f.Rb(1),f.Ac("ngIf",e.customSpellSchool),f.Rb(1),f.Ac("ngModel",e.spell.ritual),f.Rb(4),f.Ac("ngModel",e.spell.casttime),f.Rb(2),f.Ac("ngModel",e.spell.range),f.Rb(2),f.Ac("ngModel",e.spell.components.verbal),f.Rb(2),f.Ac("ngModel",e.spell.components.somatic),f.Rb(3),f.Ac("ngModel",e.spell.components.material),f.Rb(3),f.Ac("ngModel",e.spell.duration),f.Rb(1),f.Ac("ngModel",e.spell.concentration),f.Rb(3),f.Ac("ngModel",e.spell.description),f.Rb(2),f.Ac("ngModel",e.spell.higherlevels),f.Rb(3),f.Ac("ngModel",e.spell.classes),f.Rb(2),f.Ac("ngModel",e.spell.subclasses),f.Rb(2),f.Ac("ngIf",void 0===e.spell.image),f.Rb(9),f.Ac("ngIf",!e.isFirst),f.Rb(1),f.Ac("ngIf",!e.isLast)}}class sc{constructor(e){this.dialog=e,this.moveUp=new f.u,this.moveDown=new f.u,this.changed=new f.u,this.opened=new f.u,this.delete=new f.u,this.moveToEditor=new f.u}ngOnInit(){this.customSpellSchool=!Ie.a.includes(this.spell.school)}emitChange(){this.changed.emit()}beginJSONExport(){this.dialog.open(A.a,{data:{name:this.spell.name,data:this.spell},width:"60%"})}}function rc(e,c){if(1&e){const e=f.kc();f.jc(0,"avr-spell-detail",15),f.rc("moveUp",(function(){f.Mc(e);const t=c.$implicit;return f.vc(2).moveUp(t)}))("moveDown",(function(){f.Mc(e);const t=c.$implicit;return f.vc(2).moveDown(t)}))("changed",(function(){f.Mc(e);return f.vc(2).changed.emit()}))("opened",(function(){f.Mc(e);const t=c.$implicit,n=f.vc(2);return n.selectedSpell=t,n.selected.emit(t)}))("delete",(function(){f.Mc(e);const t=c.$implicit;return f.vc(2).deleteSpell(t)}))("moveToEditor",(function(){f.Mc(e);return f.vc(2).moveToEditor.emit()})),f.ic()}if(2&e){const e=c.$implicit,t=c.first,n=c.last;f.Ac("spell",e)("isFirst",t)("isLast",n)}}function dc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",4),f.jc(1,"mat-accordion"),f.Wc(2,rc,1,3,"avr-spell-detail",5),f.jc(3,"mat-card",6),f.jc(4,"span",7),f.Xc(5,"New..."),f.ic(),f.ec(6,"span",8),f.jc(7,"span"),f.jc(8,"button",9),f.rc("click",(function(){f.Mc(e);return f.vc().newFromJSON()})),f.jc(9,"mat-icon",10),f.Xc(10,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(11,"button",11),f.rc("click",(function(){f.Mc(e);return f.vc().newFromSRD()})),f.jc(12,"mat-icon",12),f.Xc(13,"scanner"),f.ic(),f.ic(),f.jc(14,"button",13),f.rc("click",(function(){f.Mc(e);return f.vc().newSpell()})),f.jc(15,"mat-icon",14),f.Xc(16,"add"),f.ic(),f.ic(),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(2),f.Ac("ngForOf",e.tome.spells)}}function mc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",4),f.jc(1,"mat-card"),f.jc(2,"p"),f.Xc(3,"Looks like this tome is empty."),f.ic(),f.jc(4,"button",16),f.rc("click",(function(){f.Mc(e);return f.vc().newSpell()})),f.Xc(5,"Make a Spell"),f.ic(),f.jc(6,"button",9),f.rc("click",(function(){f.Mc(e);return f.vc().newFromJSON()})),f.jc(7,"mat-icon",10),f.Xc(8,"vertical_align_bottom"),f.ic(),f.ic(),f.jc(9,"button",11),f.rc("click",(function(){f.Mc(e);return f.vc().newFromSRD()})),f.jc(10,"mat-icon",12),f.Xc(11,"scanner"),f.ic(),f.ic(),f.ic(),f.ic()}}sc.\u0275fac=function(e){return new(e||sc)(f.dc(k.b))},sc.\u0275cmp=f.Xb({type:sc,selectors:[["avr-spell-detail"]],inputs:{spell:"spell",isFirst:"isFirst",isLast:"isLast"},outputs:{moveUp:"moveUp",moveDown:"moveDown",changed:"changed",opened:"opened",delete:"delete",moveToEditor:"moveToEditor"},decls:7,vars:3,consts:[[3,"opened"],[3,"level","school"],["matExpansionPanelContent",""],[1,"form-container"],["fxLayout","row","fxLayoutGap","4px"],["fxFlex",""],["matInput","","placeholder","Name",3,"ngModel","change","ngModelChange"],["fxFlex","",4,"ngIf"],["fxLayout","row","fxLayoutGap","6px","fxLayoutAlign","center center"],[3,"value","valueChange","selectionChange"],[3,"value"],[3,"value","valueChange","selectionChange",4,"ngIf"],["matInput","","placeholder","School",3,"ngModel","change","ngModelChange",4,"ngIf"],["mat-icon-button","","matSuffix","","matTooltip","Delete custom school",3,"click",4,"ngIf"],["fxFlex","nogrow",3,"ngModel","ngModelChange","change"],["fxLayout","row","fxLayoutGap","6px"],["matInput","","placeholder","Casting Time",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Range",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Material",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Duration",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Description","rows","7",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","At Higher Levels","rows","3",3,"ngModel","change","ngModelChange"],["fxFlex","","matTooltip","Separate classes with commas."],["matInput","","placeholder","Classes",3,"ngModel","change","ngModelChange"],["fxFlex","","matTooltip","Separate subclasses with commas."],["matInput","","placeholder","Subclasses",3,"ngModel","change","ngModelChange"],["fxLayout","row",1,"actions"],["mat-icon-button","","matTooltip","Export to JSON",3,"click"],["aria-label","Export to JSON"],["mat-icon-button","","matTooltip","Edit Automation",3,"click"],["aria-label","Edit Automation"],["fxFlex","grow"],["mat-icon-button","","color","warn",3,"click"],["aria-label","Delete"],["matInput","","placeholder","Image URL",3,"ngModel","change","ngModelChange"],["value","A"],["value","C"],["value","D"],["value","E"],["value","V"],["value","I"],["value","N"],["value","T"],["value","Custom",3,"click"],["matInput","","placeholder","School",3,"ngModel","change","ngModelChange"],["mat-icon-button","","matSuffix","","matTooltip","Delete custom school",3,"click"],["mat-icon-button","","matTooltip","Add image",3,"click"],["aria-label","Add image"],["mat-icon-button","","matTooltip","Move Up",3,"click"],["aria-label","Move Up"],["mat-icon-button","","matTooltip","Move Down",3,"click"],["aria-label","Move Down"]],template:function(e,c){1&e&&(f.jc(0,"mat-expansion-panel",0),f.rc("opened",(function(){return c.opened.emit()})),f.jc(1,"mat-expansion-panel-header"),f.jc(2,"mat-panel-title"),f.jc(3,"div"),f.Xc(4),f.ic(),f.ic(),f.ec(5,"avr-spell-panel-description",1),f.ic(),f.Wc(6,lc,81,31,"ng-template",2),f.ic()),2&e&&(f.Rb(4),f.Zc(" ",c.spell.name," "),f.Rb(1),f.Ac("level",c.spell.level)("school",c.spell.school))},directives:[D.c,D.g,D.h,He,D.e,G.f,G.g,C.c,G.b,X.a,o.c,o.n,o.q,n.t,G.e,C.g,Ve.a,Ke.j,Qe.a,_.a,x.b,P.a,C.j],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}mat-panel-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:auto 0}"]});class uc{constructor(e,c){this.dialog=e,this.hbService=c,this.selected=new f.u,this.changed=new f.u,this.moveToEditor=new f.u}ngOnInit(){}newSpell(){this.tome.spells.push(new Ie.b),this.changed.emit()}newFromJSON(){const e=this.dialog.open(ee.a,{width:"60%",disableClose:!0,data:{validator:c=>this.validateSpellJSON(e,c)}});e.afterClosed().subscribe(e=>{if(e){let c=e;console.log(c),c instanceof Array?this.tome.spells.push(...c):this.tome.spells.push(c),this.changed.emit()}})}newFromSRD(){this.dialog.open(ce.a,{width:"60%",disableClose:!0,data:{getter:()=>this.hbService.getTemplateSpells(),namer:e=>e.name}}).afterClosed().subscribe(e=>{e&&(this.tome.spells.push(e),this.changed.emit())})}deleteSpell(e){this.tome.spells=this.tome.spells.filter(c=>c!==e),this.changed.emit()}validateSpellJSON(e,c){this.hbService.validateSpellJSON(c).subscribe(c=>this.onValidationReply(e,c))}onValidationReply(e,c){console.log(c),e.componentInstance.loading=!1,c.success?e.close(JSON.parse(e.componentInstance.data)):e.componentInstance.error=c.result}moveUp(e){const c=this.tome.spells.indexOf(e),t=c-1;t>-1&&(Object(Q.a)(this.tome.spells,c,t),this.changed.emit())}moveDown(e){const c=this.tome.spells.indexOf(e),t=c+1;t<this.tome.spells.length&&(Object(Q.a)(this.tome.spells,c,t),this.changed.emit())}}uc.\u0275fac=function(e){return new(e||uc)(f.dc(k.b),f.dc(w))},uc.\u0275cmp=f.Xb({type:uc,selectors:[["avr-spell-list"]],inputs:{tome:"tome",user:"user"},outputs:{selected:"selected",changed:"changed",moveToEditor:"moveToEditor"},decls:5,vars:19,consts:[["fxLayout","row","fxLayoutGap","8px",1,"container"],["class","spell-list","fxFlex","grow",4,"ngIf"],["fxFlex","grow",1,"spell-preview","mat-typography","mat-elevation-z3"],[3,"name","image","level","school","classes","subclasses","verbal","somatic","material","time","ritual","range","concentration","duration","description","higherlevels","user"],["fxFlex","grow",1,"spell-list"],[3,"spell","isFirst","isLast","moveUp","moveDown","changed","opened","delete","moveToEditor",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"new-spell-card"],[1,"no-text-cursor"],[1,"toolbar-spacer"],["mat-icon-button","","matTooltip","Import from JSON",3,"click"],["aria-label","Import from JSON"],["mat-icon-button","","matTooltip","Copy SRD spell",3,"click"],["aria-label","From existing spell"],["mat-icon-button","",3,"click"],["aria-label","New"],[3,"spell","isFirst","isLast","moveUp","moveDown","changed","opened","delete","moveToEditor"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.jc(0,"div",0),f.Wc(1,dc,17,1,"div",1),f.Wc(2,mc,12,0,"div",1),f.jc(3,"div",2),f.ec(4,"avr-spell-embed",3),f.ic(),f.ic()),2&e&&(f.Rb(1),f.Ac("ngIf",c.tome.spells.length),f.Rb(1),f.Ac("ngIf",!c.tome.spells.length),f.Rb(2),f.Ac("name",null==c.selectedSpell?null:c.selectedSpell.name)("image",null==c.selectedSpell?null:c.selectedSpell.image)("level",null==c.selectedSpell?null:c.selectedSpell.level)("school",null==c.selectedSpell?null:c.selectedSpell.school)("classes",null==c.selectedSpell?null:c.selectedSpell.classes)("subclasses",null==c.selectedSpell?null:c.selectedSpell.subclasses)("verbal",null==c.selectedSpell?null:c.selectedSpell.components.verbal)("somatic",null==c.selectedSpell?null:c.selectedSpell.components.somatic)("material",null==c.selectedSpell?null:c.selectedSpell.components.material)("time",null==c.selectedSpell?null:c.selectedSpell.casttime)("ritual",null==c.selectedSpell?null:c.selectedSpell.ritual)("range",null==c.selectedSpell?null:c.selectedSpell.range)("concentration",null==c.selectedSpell?null:c.selectedSpell.concentration)("duration",null==c.selectedSpell?null:c.selectedSpell.duration)("description",null==c.selectedSpell?null:c.selectedSpell.description)("higherlevels",null==c.selectedSpell?null:c.selectedSpell.higherlevels)("user",c.user))},directives:[G.f,G.g,n.t,G.b,ze.a,D.a,n.s,Y.a,G.e,x.b,_.a,P.a,sc],styles:[".container[_ngcontent-%COMP%]{margin:8px}.spell-list[_ngcontent-%COMP%], .spell-preview[_ngcontent-%COMP%]{max-height:calc(100vh - 240px);overflow-y:auto}.new-spell-card[_ngcontent-%COMP%]{height:48px;padding:0 24px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]});var pc=t("UgTo");function gc(e,c){if(1&e){const e=f.kc();f.jc(0,"div",1),f.jc(1,"mat-card"),f.jc(2,"p"),f.Xc(3),f.ic(),f.jc(4,"p"),f.Xc(5,"You can find help on how to use the spell editor "),f.jc(6,"a",2),f.Xc(7,"here"),f.ic(),f.Xc(8,"."),f.ic(),f.jc(9,"avr-automation-editor",3),f.rc("changed",(function(){f.Mc(e);return f.vc().changed.emit()})),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(3),f.Zc("Editing ",e.spell.name,"..."),f.Rb(6),f.Ac("automation",e.getAutomation(e.spell))("spell",e.spell)}}function hc(e,c){1&e&&(f.jc(0,"div",1),f.jc(1,"mat-card"),f.jc(2,"p"),f.Xc(3," No spell selected. "),f.ic(),f.ic(),f.ic())}class bc{constructor(){this.changed=new f.u}ngOnInit(){}getAutomation(e){return null===e.automation&&(e.automation=[]),e.automation}}function fc(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"mat-toolbar",1),f.jc(2,"span"),f.jc(3,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().back()})),f.jc(4,"mat-icon",3),f.Xc(5,"arrow_back"),f.ic(),f.ic(),f.ic(),f.jc(6,"span"),f.Xc(7),f.ic(),f.ec(8,"span",4),f.jc(9,"span"),f.jc(10,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().commit()})),f.jc(11,"mat-icon",5),f.Xc(12,"save"),f.ic(),f.ic(),f.jc(13,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().beginSettings()})),f.jc(14,"mat-icon",6),f.Xc(15,"settings"),f.ic(),f.ic(),f.jc(16,"button",2),f.rc("click",(function(){f.Mc(e);return f.vc().beginShare()})),f.jc(17,"mat-icon",7),f.Xc(18,"launch"),f.ic(),f.ic(),f.ic(),f.ic(),f.jc(19,"mat-tab-group",8,9),f.jc(21,"mat-tab",10),f.jc(22,"avr-spell-list",11),f.rc("selected",(function(c){f.Mc(e);return f.vc().selectedSpell=c}))("changed",(function(){f.Mc(e);return f.vc().ensureChangesNotif()}))("moveToEditor",(function(){f.Mc(e);return f.Jc(20).selectedIndex=1})),f.ic(),f.ic(),f.jc(23,"mat-tab",12),f.jc(24,"avr-spell-editor",13),f.rc("changed",(function(){f.Mc(e);return f.vc().ensureChangesNotif()})),f.ic(),f.ic(),f.ic(),f.ic()}if(2&e){const e=f.vc();f.Rb(7),f.Zc(" ",e.tome.name," "),f.Rb(15),f.Ac("tome",e.tome)("user",e.user),f.Rb(2),f.Ac("spell",e.selectedSpell)}}function vc(e,c){1&e&&(f.jc(0,"div"),f.jc(1,"div",14),f.jc(2,"mat-card"),f.ec(3,"mat-spinner",15),f.ic(),f.ic(),f.ic()),2&e&&(f.Rb(3),f.Ac("diameter",24))}function jc(e,c){if(1&e){const e=f.kc();f.jc(0,"div"),f.jc(1,"div",14),f.jc(2,"mat-card"),f.jc(3,"p"),f.Xc(4,"You do not have permission to edit this tome."),f.ic(),f.jc(5,"button",16),f.rc("click",(function(){f.Mc(e);return f.vc().back()})),f.Xc(6,"Go Back"),f.ic(),f.ic(),f.ic(),f.ic()}}bc.\u0275fac=function(e){return new(e||bc)},bc.\u0275cmp=f.Xb({type:bc,selectors:[["avr-spell-editor"]],inputs:{spell:"spell"},outputs:{changed:"changed"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],[1,"container"],["target","_blank","href","https://avrae.readthedocs.io/en/latest/automation_ref.html"],[3,"automation","spell","changed"]],template:function(e,c){1&e&&(f.Wc(0,gc,10,3,"div",0),f.Wc(1,hc,4,0,"div",0)),2&e&&(f.Ac("ngIf",c.spell),f.Rb(1),f.Ac("ngIf",!c.spell))},directives:[n.t,Y.a,pc.a],styles:[".container[_ngcontent-%COMP%]{margin:8px}"]});class Mc{constructor(e,c,t,n,i,o,a){this.route=e,this.homebrewService=c,this.dashboardService=t,this.location=n,this.dialog=i,this.router=o,this.snackBar=a,this.user=Object(h.d)(),this.changesOpen=!1}ngOnInit(){this.getTome()}ngOnDestroy(){this.snackBar.dismiss()}getTome(){const e=this.route.snapshot.paramMap.get("tome");this.homebrewService.getTome(e).subscribe(e=>{this.tome=e,this.calcCanEdit()})}calcCanEdit(){if(this.tome&&this.user)if(this.isOwner=this.user.id===this.tome.owner,this.isOwner)this.canEdit=!0;else{const e=this.tome._id.$oid;this.homebrewService.getTomeEditors(e).subscribe(e=>this.canEdit=e.some(e=>e===this.user.id))}}ensureChangesNotif(){if(!this.changesOpen){this.changesOpen=!0,this.snackBar.open("You have unsaved changes!","Save",{duration:-1,horizontalPosition:"right"}).onAction().subscribe(()=>{this.commit()})}}beginShare(){this.dialog.open(Ne,{data:this.tome,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),this.tome=Object.assign(this.tome,e),this.commit())})}beginSettings(){this.dialog.open(Ye,{data:this.tome,width:"40%",disableClose:!0}).afterClosed().subscribe(e=>{e&&(console.log(e),e.delete?this.delete():(this.tome=Object.assign(this.tome,e),this.commit()))})}commit(){this.homebrewService.putTome(this.tome).subscribe(e=>{console.log(e),this.changesOpen=!1,this.snackBar.open(`${e} Use "!tome ${this.tome.name}" to activate the tome in Discord!`,null,{horizontalPosition:"right"})})}delete(){this.homebrewService.deleteTome(this.tome).subscribe(e=>{console.log(e),this.router.navigate(["../"],{relativeTo:this.route})})}back(){this.location.back()}}Mc.\u0275fac=function(e){return new(e||Mc)(f.dc(m.a),f.dc(w),f.dc(te.a),f.dc(n.n),f.dc(k.b),f.dc(m.b),f.dc(le.b))},Mc.\u0275cmp=f.Xb({type:Mc,selectors:[["avr-tome-detail"]],decls:3,vars:3,consts:[[4,"ngIf"],["color","primary",1,"tome-toolbar"],["mat-icon-button","",3,"click"],["aria-label","Back"],[1,"toolbar-spacer"],["aria-label","Save"],["aria-label","Settings"],["aria-label","Share"],["backgroundColor","primary"],["tabGroup",""],["label","Spells"],[3,"tome","user","selected","changed","moveToEditor"],["label","Editor"],[3,"spell","changed"],[1,"container"],[3,"diameter"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,c){1&e&&(f.Wc(0,fc,25,4,"div",0),f.Wc(1,vc,4,1,"div",0),f.Wc(2,jc,7,0,"div",0)),2&e&&(f.Ac("ngIf",c.tome&&null!=c.canEdit),f.Rb(1),f.Ac("ngIf",!c.tome),f.Rb(1),f.Ac("ngIf",c.tome&&!c.canEdit))},directives:[n.t,Z.a,x.b,P.a,qe.c,qe.a,uc,bc,Y.a,L.c],styles:[".tome-toolbar[_ngcontent-%COMP%]{height:64px}mat-tab-header[_ngcontent-%COMP%]{height:48px}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.no-text-cursor[_ngcontent-%COMP%]{cursor:default}"]});const wc=[{path:"",children:[{path:"items",component:K},{path:"items/:pack",component:Se},{path:"spells",component:Je},{path:"spells/:tome",component:Mc}]}];class kc{}kc.\u0275mod=f.bc({type:kc}),kc.\u0275inj=f.ac({factory:function(e){return new(e||kc)},imports:[[m.d.forChild(wc)],m.d]});class Cc{}Cc.\u0275mod=f.bc({type:Cc}),Cc.\u0275inj=f.ac({factory:function(e){return new(e||Cc)},imports:[[n.c,l.a,o.h,i.a,a.b.forChild(),r.a,s.a,d.a,kc]]})}}]);
//# sourceMappingURL=11-es2015.fdbecc0ea4e39c804a5c.js.map