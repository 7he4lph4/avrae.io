"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[478],{7478:(G,v,i)=>{i.r(v),i.d(v,{DevModule:()=>d});var h=i(6362),y=i(587),M=i(6774),S=i(9394),f=i(9481),O=i(4766),J=i(6269),I=i(4936),U=i(3538),t=i(3184),k=i(5758);class N{constructor(o,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=o,this._document.body.appendChild(n)}copy(){const o=this._textarea;let e=!1;try{if(o){const n=this._document.activeElement;o.select(),o.setSelectionRange(0,o.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch(n){}return e}destroy(){const o=this._textarea;o&&(o.remove(),this._textarea=void 0)}}class s{constructor(o){this._document=o}copy(o){const e=this.beginCopy(o),n=e.copy();return e.destroy(),n}beginCopy(o){return new N(o,this._document)}}s.\u0275fac=function(o){return new(o||s)(t.LFG(h.K0))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"});const _=new t.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");class g{constructor(o,e,n){this._clipboard=o,this._ngZone=e,this.text="",this.attempts=1,this.copied=new t.vpe,this._pending=new Set,n&&null!=n.attempts&&(this.attempts=n.attempts)}copy(o=this.attempts){if(o>1){let e=o;const n=this._clipboard.beginCopy(this.text);this._pending.add(n);const r=()=>{const m=n.copy();m||!--e||this._destroyed?(this._currentTimeout=null,this._pending.delete(n),n.destroy(),this.copied.emit(m)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(r,1))};r()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(o=>o.destroy()),this._pending.clear(),this._destroyed=!0}}g.\u0275fac=function(o){return new(o||g)(t.Y36(s),t.Y36(t.R0b),t.Y36(_,8))},g.\u0275dir=t.lG2({type:g,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(o,e){1&o&&t.NdJ("click",function(){return e.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}});class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({});var L=i(2528),A=i(1961),x=i(9975),E=i(2914),B=i(6623),b=i(7317),Y=i(89);class u{constructor(o,e,n){this.dialog=o,this.clipboard=e,this.snackBar=n,this.localSavedAutomation=[],this.editorDebugMode=!1}ngOnInit(){this.loadLocalAutomation()}loadLocalAutomation(){const o=JSON.parse(localStorage.getItem("dev-automation-editor"));this.localSavedAutomation=o||[]}saveLocalAutomation(){console.log("Saving local automation on change..."),localStorage.setItem("dev-automation-editor",JSON.stringify(this.localSavedAutomation))}clearLocalAutomation(){localStorage.removeItem("dev-automation-editor"),this.localSavedAutomation=[]}keyEvent(o){if(o.ctrlKey||o.metaKey)switch(o.key){case"i":o.preventDefault(),this.beginJSONImport();break;case"e":case"y":o.preventDefault(),this.copyText(this.getLocalAutomationYaml(),"YAML");break;case"j":o.preventDefault(),this.copyText(this.getLocalAutomationJson(),"JSON")}}getLocalAutomationYaml(){return(0,J.Pz)(this.localSavedAutomation)}getLocalAutomationJson(){return JSON.stringify(this.localSavedAutomation,null,2)}beginJSONImport(){this.dialog.open(U.Q,{width:"60%",data:{yaml:!0}}).afterClosed().subscribe(e=>{e&&(this.localSavedAutomation=e,this.saveLocalAutomation())})}beginJSONExport(o,e=!0){this.dialog.open(I.m,{data:{name:"Automation",data:o,yaml:e},width:"60%"})}copyText(o,e=""){const n=this.clipboard.beginCopy(o);let r=3;const m=()=>{const D=n.copy();!D&&--r?setTimeout(m):D?(n.destroy(),this.snackBar.open(`Successfully copied ${e}`)):n.destroy()};m()}}u.\u0275fac=function(o){return new(o||u)(t.Y36(k.uw),t.Y36(s),t.Y36(L.ux))},u.\u0275cmp=t.Xpm({type:u,selectors:[["avr-automation-editor-dev"]],hostBindings:function(o,e){1&o&&t.NdJ("keydown",function(r){return e.keyEvent(r)},!1,t.Jf7)},decls:36,vars:5,consts:[[1,"container"],[1,"mat-small"],[3,"automation","debugMode","changed"],[3,"ngModel","ngModelChange"],[1,"button-group"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary","matTooltip","Note that this will not be importable in the Attack or Spell editors.",3,"click"],[1,"text-monospace",3,"innerHTML"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"h1"),t._uU(3,"Automation Editor Playground"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Build automation without tying it to a character or spell here."),t.qZA(),t.TgZ(6,"p",1),t._uU(7," Keyboard shortcuts: "),t.TgZ(8,"kbd"),t._uU(9,"Ctrl-I"),t.qZA(),t._uU(10," to import, "),t.TgZ(11,"kbd"),t._uU(12,"Ctrl-E"),t.qZA(),t._uU(13," to copy YAML to clipboard, "),t.TgZ(14,"kbd"),t._uU(15,"Ctrl-J"),t.qZA(),t._uU(16," to copy JSON to clipboard "),t.qZA(),t._UZ(17,"mat-divider"),t.TgZ(18,"avr-automation-editor",2),t.NdJ("changed",function(){return e.saveLocalAutomation()}),t.qZA(),t.TgZ(19,"mat-slide-toggle",3),t.NdJ("ngModelChange",function(r){return e.editorDebugMode=r}),t._uU(20,"Debug Mode"),t.qZA(),t.TgZ(21,"div",4)(22,"button",5),t.NdJ("click",function(){return e.clearLocalAutomation()}),t._uU(23,"Clear"),t.qZA(),t.TgZ(24,"button",6),t.NdJ("click",function(){return e.beginJSONImport()}),t._uU(25,"Import"),t.qZA(),t.TgZ(26,"button",7),t.NdJ("click",function(){return e.beginJSONExport(e.localSavedAutomation)}),t._uU(27," Export YAML "),t.qZA(),t.TgZ(28,"button",7),t.NdJ("click",function(){return e.beginJSONExport(e.localSavedAutomation,!1)}),t._uU(29," Export JSON "),t.qZA()(),t.TgZ(30,"h3"),t._uU(31,"YAML"),t.qZA(),t._UZ(32,"pre",8),t.TgZ(33,"h3"),t._uU(34,"JSON"),t.qZA(),t._UZ(35,"pre",8),t.qZA()()),2&o&&(t.xp6(18),t.Q6J("automation",e.localSavedAutomation)("debugMode",e.editorDebugMode),t.xp6(1),t.Q6J("ngModel",e.editorDebugMode),t.xp6(13),t.Q6J("innerHTML",e.getLocalAutomationYaml(),t.oJD),t.xp6(3),t.Q6J("innerHTML",e.getLocalAutomationJson(),t.oJD))},directives:[A.a8,x.d,E._,B.Rr,y.JJ,y.On,b.lW,Y.gM],styles:[".container[_ngcontent-%COMP%]{padding:8px}.button-group[_ngcontent-%COMP%]{margin-top:8px}.button-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:0 4px}\n/*# sourceMappingURL=automation-editor-dev.component.css.map*/"]});var T=i(5590),F=i(318),C=i(6131),R=i(1130);function P(a,o){if(1&a&&(t.TgZ(0,"mat-list-item"),t._UZ(1,"mat-icon",4),t.TgZ(2,"h3",5),t._uU(3),t.qZA()()),2&a){const e=o.$implicit;t.xp6(1),t.MGl("svgIcon","ddb:",e,""),t.xp6(2),t.hij(" ddb:",e," ")}}class p{constructor(o,e){this.iconRegistry=o,this.domSanitizer=e,this.CUSTOM_ICONS=["digital-dice","fire","force","healing","melee-attack","piercing","ranged-attack","resistant","spells"],o.addSvgIconResolver((n,r)=>"ddb"===r?e.bypassSecurityTrustResourceUrl(`/assets/icon/${n}.svg`):null)}}p.\u0275fac=function(o){return new(o||p)(t.Y36(T.jv),t.Y36(F.H7))},p.\u0275cmp=t.Xpm({type:p,selectors:[["avr-custom-icon-dev"]],decls:15,vars:1,consts:[[1,"container"],[4,"ngFor","ngForOf"],["mat-icon-button","","disabled",""],["svgIcon","ddb:healing"],["matListIcon","",3,"svgIcon"],["matLine",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"h1"),t._uU(3,"Icon Dev"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Test custom icons here"),t.qZA(),t.TgZ(6,"p"),t._uU(7," Note: when pulling icons from Figma it's easiest to use Copy as SVG, you'll need to remove any fill= attributes from the SVG too to make sure styling works "),t.qZA(),t.TgZ(8,"mat-list"),t.YNc(9,P,4,2,"mat-list-item",1),t.qZA(),t.TgZ(10,"button",2),t._UZ(11,"mat-icon",3),t.qZA(),t.TgZ(12,"button",2)(13,"mat-icon"),t._uU(14,"comment"),t.qZA()()()()),2&o&&(t.xp6(9),t.Q6J("ngForOf",e.CUSTOM_ICONS))},directives:[A.a8,C.i$,h.sg,C.Tg,T.Hw,C.Nh,R.X2,b.lW],styles:[".container[_ngcontent-%COMP%]{padding:8px}\n/*# sourceMappingURL=custom-icon-dev.component.css.map*/"]});const Z=[{path:"automation",component:u}],H=[{path:"icons",component:p}];O.N.production||Z.push(...H);class c{}c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Z)],f.Bz]});class d{}d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[[h.ez,M.q,y.u5,c,S.l]]})}}]);
//# sourceMappingURL=478.ae3a00adc361573c.js.map