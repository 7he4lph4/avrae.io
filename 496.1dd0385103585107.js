(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[496],{2914:(dn,Pt,j)=>{"use strict";j.d(Pt,{_:()=>Xt});var U=j(8205),e=j(3184),K=j(4972),be=j(4505);class Se{constructor(){this.changed=new e.vpe,this.treeChanged=new e.vpe,this.deleted=new e.vpe}get effect(){return this.effectNode.effect}get isIEffect(){return this.effectNode.isInIEffect}}Se.\u0275fac=function(u){return new(u||Se)},Se.\u0275cmp=e.Xpm({type:Se,selectors:[["ng-component"]],inputs:{effectNode:"effectNode",spell:"spell"},outputs:{changed:"changed",treeChanged:"treeChanged",deleted:"deleted"},decls:0,vars:0,template:function(u,l){},encapsulation:2});class ce{get href(){return`https://avrae.readthedocs.io/en/latest/automation_ref.html#${this.anchor}`}}ce.\u0275fac=function(u){return new(u||ce)},ce.\u0275cmp=e.Xpm({type:ce,selectors:[["avr-autodoc-link"]],inputs:{anchor:"anchor"},decls:2,vars:1,consts:[["target","_blank",3,"href"]],template:function(u,l){1&u&&(e.TgZ(0,"a",0),e._uU(1,"View the documentation on ReadTheDocs."),e.qZA()),2&u&&e.Q6J("href",l.href,e.LSH)},encapsulation:2});var ee=j(5434),ye=j(6362),Le=j(1534),Ce=j(89),k=j(587),J=j(4770),oe=j(4683),ie=j(5590),de=j(1434),Oe=j(1130);function ut(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-checkbox",11),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().custom=b})("change",function(){e.CHM(l);const b=e.oxw();return b.changed.emit(),b.onCustomChange()}),e._uU(1," Has custom attack bonus "),e.qZA()}if(2&C){const l=e.oxw();e.Q6J("ngModel",l.custom)}}function Kt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",12)(1,"input",13),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.attackBonus=b}),e.qZA(),e.TgZ(2,"mat-icon",14),e._uU(3," calculate "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("ngModel",l.effect.attackBonus)}}function Ft(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",12)(1,"input",15),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().customadvantage=b})("change",function(){e.CHM(l);const b=e.oxw();return b.onCustomAdvantageChange(),b.changed.emit()}),e.qZA(),e.TgZ(2,"mat-icon",14),e._uU(3," calculate "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("ngModel",l.customadvantage)("matTooltipClass","adv-tooltip")}}class dt extends Se{constructor(){super(),this.custom=!1,this.advantage="0",this.customadvantage=""}ngOnInit(){(this.effect.attackBonus||null==this.spell)&&(this.custom=!0),this.effect.adv&&!["-1","0","1","2"].includes(this.effect.adv)?(this.advantage="custom",this.customadvantage=this.effect.adv):this.advantage=this.effect.adv||"0"}onCustomChange(){this.custom||(this.effect.attackBonus=void 0)}onAdvantageSelectChange(u){"custom"===u.value?this.effect.adv=this.customadvantage:this.effect.adv=u.value,this.changed.emit()}onCustomAdvantageChange(){this.effect.adv=this.customadvantage}}dt.\u0275fac=function(u){return new(u||dt)},dt.\u0275cmp=e.Xpm({type:dt,selectors:[["avr-attack-effect"]],features:[e.qOj],decls:24,vars:4,consts:[["anchor","attack"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["matTooltip","If not checked, uses the caster's default spell attack bonus.",3,"ngModel","ngModelChange","change",4,"ngIf"],["fxFlex","grow",4,"ngIf"],["matTooltip","The default advantage for this attack roll."],[3,"value","valueChange","selectionChange"],["value","0"],["value","1"],["value","2"],["value","-1"],["value","custom"],["matTooltip","If not checked, uses the caster's default spell attack bonus.",3,"ngModel","ngModelChange","change"],["fxFlex","grow"],["matInput","","placeholder","Attack Bonus",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],["matInput","","placeholder","Custom Advantage","matTooltip","0 for Flat\n1 for Advantage\n2 for Elven Accuracy\n-1 for Disadvantage",1,"text-monospace",3,"ngModel","matTooltipClass","ngModelChange","change"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," An Attack effect makes an attack roll against a targeted creature. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,ut,2,1,"mat-checkbox",2),e.YNc(5,Kt,4,1,"mat-form-field",3),e.qZA(),e.TgZ(6,"div",1)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Advantage"),e.qZA(),e.TgZ(10,"mat-select",5),e.NdJ("valueChange",function(b){return l.advantage=b})("selectionChange",function(b){return l.onAdvantageSelectChange(b)}),e.TgZ(11,"mat-option",6),e._uU(12,"Flat"),e.qZA(),e.TgZ(13,"mat-option",7),e._uU(14,"Advantage"),e.qZA(),e.TgZ(15,"mat-option",8),e._uU(16,"Elven Accuracy"),e.qZA(),e.TgZ(17,"mat-option",9),e._uU(18,"Disadvantage"),e.qZA(),e.TgZ(19,"mat-option",10),e._uU(20,"Custom"),e.qZA()()(),e.YNc(21,Ft,4,2,"mat-form-field",3),e.qZA(),e.TgZ(22,"p"),e._uU(23," Use the Effect Tree to edit the on-hit and on-miss effects!\n"),e.qZA()),2&u&&(e.xp6(4),e.Q6J("ngIf",null!=l.spell),e.xp6(1),e.Q6J("ngIf",l.custom),e.xp6(5),e.Q6J("value",l.advantage),e.xp6(11),e.Q6J("ngIf","custom"===l.advantage))},directives:[ce,ee.xw,ee.SQ,ee.Wh,ye.O5,Le.oG,Ce.gM,k.JJ,k.On,J.KE,ee.yH,oe.Nt,k.Fj,ie.Hw,J.R9,J.hX,de.gD,Oe.ey],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}",".adv-tooltip{white-space:pre-line!important}\n/*# sourceMappingURL=attack-effect.component.css.map*/"]});var Ge=j(5722),xt=j(6942),ht=j(1196),It=j(3188);const rt=["skillInput"];function Un(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-chip",9),e.NdJ("removed",function(){const H=e.CHM(l).$implicit;return e.oxw().remove(H)}),e._uU(1),e.TgZ(2,"button",10)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&C){const l=u.$implicit,v=e.oxw();e.xp6(1),e.hij(" ",v.skillKeyToName(l)," ")}}function _i(C,u){if(1&C&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l[0]),e.xp6(1),e.hij(" ",l[1]," ")}}const ti={acrobatics:"Acrobatics",animalHandling:"Animal Handling",arcana:"Arcana",athletics:"Athletics",deception:"Deception",history:"History",initiative:"Initiative",insight:"Insight",intimidation:"Intimidation",investigation:"Investigation",medicine:"Medicine",nature:"Nature",perception:"Perception",performance:"Performance",persuasion:"Persuasion",religion:"Religion",sleightOfHand:"Sleight of Hand",stealth:"Stealth",survival:"Survival",strength:"Strength",dexterity:"Dexterity",constitution:"Constitution",intelligence:"Intelligence",wisdom:"Wisdom",charisma:"Charisma"};class hn{constructor(){this.label="Skills",this.required=!1,this.skillsChange=new e.vpe,this.skillCtrl=new k.NI(""),this.filteredSkills=this.skillCtrl.valueChanges.pipe((0,Ge.O)(""),(0,xt.U)(u=>this._filter(u)))}skillKeyToName(u){var l;return null!==(l=ti[u])&&void 0!==l?l:"Invalid Skill"}remove(u){const l=this.skills.indexOf(u);l>=0&&(this.skills.splice(l,1),this.skillsChange.emit(this.skills))}selected(u){this.skills.push(u.option.value),this.skillsChange.emit(this.skills),this.skillInput.nativeElement.value="",this.skillCtrl.setValue("")}_filter(u){if(!u)return Object.entries(ti).filter(([v,b])=>!this.skills.includes(v));const l=u.toLowerCase();return Object.entries(ti).filter(([v,b])=>(v.toLowerCase().includes(l)||b.toLowerCase().includes(l))&&!this.skills.includes(v))}}function bn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",12)(2,"input",13),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.dc=b}),e.qZA(),e.TgZ(3,"mat-icon",14),e._uU(4," calculate "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.effect.dc)}}function wn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"avr-ability-select",15),e.NdJ("skillsChange",function(b){e.CHM(l);return e.oxw().contestAbilityWrapper=b})("skillsChange",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("skills",l.contestAbilityWrapper)}}function pt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-label"),e._uU(2,"Tie Behaviour"),e.qZA(),e.TgZ(3,"mat-select",1),e.NdJ("valueChange",function(b){e.CHM(l);return e.oxw().effect.contestTie=b})("selectionChange",function(){return e.CHM(l),e.oxw().changed.emit()}),e.TgZ(4,"mat-option",17),e._uU(5,"Target Wins"),e.qZA(),e.TgZ(6,"mat-option",18),e._uU(7,"Caster Wins"),e.qZA(),e.TgZ(8,"mat-option",19),e._uU(9,"Neither"),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(3),e.Q6J("value",l.effect.contestTie)}}function Yt(C,u){1&C&&(e.TgZ(0,"p"),e._uU(1," Use the Effect Tree to edit the on-fail and on-success effects!\n"),e.qZA())}hn.\u0275fac=function(u){return new(u||hn)},hn.\u0275cmp=e.Xpm({type:hn,selectors:[["avr-ability-select"]],viewQuery:function(u,l){if(1&u&&e.Gf(rt,5),2&u){let v;e.iGM(v=e.CRH())&&(l.skillInput=v.first)}},inputs:{label:"label",required:"required",skills:"skills"},outputs:{skillsChange:"skillsChange"},decls:12,vars:9,consts:[["matTooltip","The highest of any listed abilities will be used.",1,"is-fullwidth"],["aria-label","Fruit selection",3,"required"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Add skill...",3,"formControl","matAutocomplete","matChipInputFor"],["skillInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(u,l){if(1&u&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-chip-list",1,2),e.YNc(5,Un,5,1,"mat-chip",3),e._UZ(6,"input",4,5),e.qZA(),e.TgZ(8,"mat-autocomplete",6,7),e.NdJ("optionSelected",function(b){return l.selected(b)}),e.YNc(10,_i,2,2,"mat-option",8),e.ALo(11,"async"),e.qZA()()),2&u){const v=e.MAs(4),b=e.MAs(9);e.xp6(2),e.Oqu(l.label),e.xp6(1),e.Q6J("required",l.required),e.xp6(2),e.Q6J("ngForOf",l.skills),e.xp6(1),e.Q6J("formControl",l.skillCtrl)("matAutocomplete",b)("matChipInputFor",v),e.xp6(4),e.Q6J("ngForOf",e.lcZ(11,7,l.filteredSkills))}},directives:[J.KE,Ce.gM,J.hX,ht.qn,ye.sg,ht.HS,ht.qH,ie.Hw,k.Fj,It.ZL,ht.oH,k.JJ,k.oH,It.XC,Oe.ey],pipes:[ye.Ov],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class le extends Se{constructor(){super(),this.checkType="basic"}ngOnInit(){null!=this.effect.contestAbility?this.checkType="contest":null!=this.effect.dc&&(this.checkType="dc")}onCheckTypeChange(){var u,l,v,b,H,ve,Te;"basic"===this.checkType?(this.effect.contestAbility=void 0,this.effect.dc=void 0,this.effect.contestTie=void 0):"dc"===this.checkType?(this.effect.contestAbility=void 0,this.effect.contestTie=void 0,this.effect.dc=null!==(u=this.effect.dc)&&void 0!==u?u:"",this.effect.success=null!==(l=this.effect.success)&&void 0!==l?l:[],this.effect.fail=null!==(v=this.effect.fail)&&void 0!==v?v:[]):(this.effect.dc=void 0,this.effect.contestAbility=null!==(b=this.effect.contestAbility)&&void 0!==b?b:"athletics",this.effect.contestTie=null!==(H=this.effect.contestTie)&&void 0!==H?H:"success",this.effect.success=null!==(ve=this.effect.success)&&void 0!==ve?ve:[],this.effect.fail=null!==(Te=this.effect.fail)&&void 0!==Te?Te:[]),this.changed.emit(),this.treeChanged.emit()}get abilityWrapper(){return"string"!=typeof this.effect.ability?this.effect.ability:[this.effect.ability]}set abilityWrapper(u){1===u.length?this.effect.ability=u[0]:this.effect.ability=u}get contestAbilityWrapper(){return"string"!=typeof this.effect.contestAbility?this.effect.contestAbility:[this.effect.contestAbility]}set contestAbilityWrapper(u){1===u.length?this.effect.contestAbility=u[0]:this.effect.contestAbility=u}get advantageWrapper(){var u;return null!==(u=this.effect.adv)&&void 0!==u?u:0}set advantageWrapper(u){this.effect.adv=u||void 0}}le.\u0275fac=function(u){return new(u||le)},le.\u0275cmp=e.Xpm({type:le,selectors:[["avr-check-effect"]],features:[e.qOj],decls:33,vars:10,consts:[["anchor","ability-check"],[3,"value","valueChange","selectionChange"],["value","basic"],["value","dc"],["value","contest"],["required","",1,"is-fullwidth",3,"skills","skillsChange"],[4,"ngIf"],[1,"auto-label"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row"],["matTooltip","The default advantage for the target's ability check."],[3,"value"],["matTooltip","Which list of effects to run if the ability contest results in a tie.",4,"ngIf"],[1,"is-fullwidth"],["matInput","","required","","placeholder","DC",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],["required","","label","Caster Skills (Contest)",1,"is-fullwidth",3,"skills","skillsChange"],["matTooltip","Which list of effects to run if the ability contest results in a tie."],["value","success"],["value","fail"],["value","neither"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Makes an ability check as the targeted creature, optionally as a contest against the caster. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Check Type"),e.qZA(),e.TgZ(7,"mat-select",1),e.NdJ("valueChange",function(b){return l.checkType=b})("selectionChange",function(){return l.onCheckTypeChange()}),e.TgZ(8,"mat-option",2),e._uU(9,"Check Roll"),e.qZA(),e.TgZ(10,"mat-option",3),e._uU(11,"Check Against DC"),e.qZA(),e.TgZ(12,"mat-option",4),e._uU(13,"Contest Against Caster"),e.qZA()()()(),e.TgZ(14,"div")(15,"avr-ability-select",5),e.NdJ("skillsChange",function(b){return l.abilityWrapper=b})("skillsChange",function(){return l.changed.emit()}),e.qZA()(),e.YNc(16,bn,5,1,"div",6),e.YNc(17,wn,2,1,"div",6),e.TgZ(18,"span",7),e._uU(19,"Additional Options"),e.qZA(),e.TgZ(20,"div",8)(21,"mat-form-field",9)(22,"mat-label"),e._uU(23,"Advantage"),e.qZA(),e.TgZ(24,"mat-select",1),e.NdJ("valueChange",function(b){return l.advantageWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(25,"mat-option",10),e._uU(26,"Flat"),e.qZA(),e.TgZ(27,"mat-option",10),e._uU(28,"Advantage"),e.qZA(),e.TgZ(29,"mat-option",10),e._uU(30,"Disadvantage"),e.qZA()()(),e.YNc(31,pt,10,1,"mat-form-field",11),e.qZA(),e.YNc(32,Yt,2,0,"p",6)),2&u&&(e.xp6(7),e.Q6J("value",l.checkType),e.xp6(8),e.Q6J("skills",l.abilityWrapper),e.xp6(1),e.Q6J("ngIf","dc"===l.checkType),e.xp6(1),e.Q6J("ngIf","contest"===l.checkType),e.xp6(7),e.Q6J("value",l.advantageWrapper),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngIf","contest"===l.checkType),e.xp6(1),e.Q6J("ngIf","basic"!==l.checkType))},directives:[ce,J.KE,J.hX,de.gD,Oe.ey,hn,ye.O5,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,ie.Hw,J.R9,Ce.gM,ee.xw,ee.SQ,ee.Wh],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class xn extends Se{constructor(){super()}ngOnInit(){}}xn.\u0275fac=function(u){return new(u||xn)},xn.\u0275cmp=e.Xpm({type:xn,selectors:[["avr-condition-effect"]],features:[e.qOj],decls:25,vars:2,consts:[["anchor","condition-branch"],[1,"is-fullwidth"],["matInput","","placeholder","Condition","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],[3,"value","valueChange","selectionChange"],["value","true"],["value","false"],["value","both"],["value","neither"],["value","raise"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1,' A Branch effect runs certain effects if a certain condition is met, or other effects otherwise. AKA "condition" or "if-else". '),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field",1)(5,"input",2),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.condition=b}),e.qZA(),e.TgZ(6,"mat-icon",3),e._uU(7," calculate "),e.qZA()()(),e.TgZ(8,"div")(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Error Behaviour"),e.qZA(),e.TgZ(12,"mat-select",4),e.NdJ("valueChange",function(b){return l.effect.errorBehaviour=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(13,"mat-option",5),e._uU(14,"Treat as True"),e.qZA(),e.TgZ(15,"mat-option",6),e._uU(16,"Treat as False"),e.qZA(),e.TgZ(17,"mat-option",7),e._uU(18,"Run Both"),e.qZA(),e.TgZ(19,"mat-option",8),e._uU(20,"Skip Effect"),e.qZA(),e.TgZ(21,"mat-option",9),e._uU(22,"Stop Execution"),e.qZA()()()(),e.TgZ(23,"p"),e._uU(24," Use the Effect Tree to edit the on-true and on-false effects!\n"),e.qZA()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.condition),e.xp6(7),e.Q6J("value",l.effect.errorBehaviour))},directives:[ce,J.KE,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,ie.Hw,J.R9,Ce.gM,J.hX,de.gD,Oe.ey],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});var Dt=j(2938),ze=j(7963),pn=j(4815);function Tn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"span"),e._uU(2," named "),e.qZA(),e.TgZ(3,"mat-form-field")(4,"input",19),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.counter=b}),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("ngModel",l.effect.counter)}}function qn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"span"),e._uU(2," of level "),e.qZA(),e.TgZ(3,"mat-form-field")(4,"input",20),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.counter.slot=b}),e.qZA(),e.TgZ(5,"mat-icon",12),e._uU(6," calculate "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("ngModel",l.effect.counter.slot)}}function Bt(C,u){if(1&C&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij(" ",l.name," ")}}function En(C,u){if(1&C&&(e.TgZ(0,"mat-optgroup",25),e.YNc(1,Bt,2,2,"mat-option",26),e.qZA()),2&C){const l=u.$implicit;e.Q6J("label",l[0]),e.xp6(1),e.Q6J("ngForOf",l[1])}}function An(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"span"),e._uU(2," named "),e.qZA(),e.TgZ(3,"mat-form-field",21)(4,"mat-select",22),e.NdJ("selectionChange",function(b){return e.CHM(l),e.oxw().onAbilitySelectionChange(b)}),e.TgZ(5,"mat-option")(6,"ngx-mat-select-search",23),e.NdJ("ngModelChange",function(b){return e.CHM(l),e.oxw().updateSearchFilteredGroupedLimitedUse(b)}),e.qZA()(),e.YNc(7,En,2,2,"mat-optgroup",24),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("value",l.selectedLimitedUse),e.xp6(3),e.Q6J("ngForOf",l.searchFilteredGroupedLimitedUse)}}class Tt extends Se{constructor(u){super(),this.gamedataService=u,this.limitedUse=[],this.searchFilteredGroupedLimitedUse=[]}get errorBehaviourWrapper(){var u;return void 0===this.effect.errorBehaviour?"warn":null!==(u=this.effect.errorBehaviour)&&void 0!==u?u:"ignore"}set errorBehaviourWrapper(u){this.effect.errorBehaviour="warn"===u?void 0:u}ngOnInit(){this.loadLimitedUse(),"string"==typeof this.effect.counter?this.counterType="counter":"slot"in this.effect.counter?this.counterType="slot":"id"in this.effect.counter&&(this.counterType="ability")}onCounterTypeChange(){"counter"===this.counterType?this.effect.counter="":"slot"===this.counterType?this.effect.counter={slot:1}:"ability"===this.counterType&&(this.effect.counter={id:1091,typeId:222216831})}onAbilitySelectionChange(u){this.effect.counter={id:u.value.id,typeId:u.value.typeId},this.selectedLimitedUse=u.value}updateSearchFilteredGroupedLimitedUse(u){let l=this.limitedUse.filter(v=>v.name.toLowerCase().includes(u.toLowerCase()));this.searchFilteredGroupedLimitedUse=Object.entries((0,Dt.groupBy)(l,v=>v.type))}loadLimitedUse(){this.gamedataService.getLimitedUse().subscribe(u=>{if(u.success){this.limitedUse=u.data;const l=this.effect.counter;this.selectedLimitedUse=this.limitedUse.find(v=>v.id===l.id&&v.typeId===l.typeId),this.updateSearchFilteredGroupedLimitedUse("")}})}}Tt.\u0275fac=function(u){return new(u||Tt)(e.Y36(ze.u))},Tt.\u0275cmp=e.Xpm({type:Tt,selectors:[["avr-counter-effect"]],features:[e.qOj],decls:42,vars:8,consts:[["anchor","use-counter"],[1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","ability"],["value","counter"],["value","slot"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","grow"],["matInput","","placeholder","Amount","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],[1,"auto-label"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row"],[3,"ngModel","ngModelChange","change"],["value","ignore"],["value","warn"],["value","raise"],["matInput","","placeholder","Counter Name","required","",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Slot Level","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matTooltip","When you run this action, I'll find the best counter to use for this ability automatically."],[3,"value","selectionChange"],["placeholderLabel","Search","noEntriesFoundLabel","No matches found.","ngModel","",3,"ngModelChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Uses a number of charges of the given counter, and displays the remaining amount and delta. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Counter Type"),e.qZA(),e.TgZ(9,"mat-select",2),e.NdJ("valueChange",function(b){return l.counterType=b})("selectionChange",function(){return l.changed.emit(),l.onCounterTypeChange()}),e.TgZ(10,"mat-option",3),e._uU(11,"ability"),e.qZA(),e.TgZ(12,"mat-option",4),e._uU(13,"custom counter"),e.qZA(),e.TgZ(14,"mat-option",5),e._uU(15,"spell slot"),e.qZA()()(),e.TgZ(16,"span",6),e.YNc(17,Tn,5,1,"span",7),e.YNc(18,qn,7,1,"span",8),e.YNc(19,An,8,2,"span",8),e.qZA()(),e.TgZ(20,"div",9)(21,"mat-form-field",10)(22,"input",11),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.amount=b}),e.qZA(),e.TgZ(23,"mat-icon",12),e._uU(24," calculate "),e.qZA()()(),e.TgZ(25,"span",13),e._uU(26,"Additional Options"),e.qZA(),e.TgZ(27,"div",14)(28,"mat-checkbox",15),e.NdJ("ngModelChange",function(b){return l.effect.allowOverflow=b})("change",function(){return l.changed.emit()}),e._uU(29," Allow Overflow "),e.qZA(),e.TgZ(30,"span"),e._uU(31,"|"),e.qZA(),e.TgZ(32,"mat-form-field")(33,"mat-label"),e._uU(34,"Error Behaviour"),e.qZA(),e.TgZ(35,"mat-select",2),e.NdJ("valueChange",function(b){return l.errorBehaviourWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(36,"mat-option",16),e._uU(37,"Ignore"),e.qZA(),e.TgZ(38,"mat-option",17),e._uU(39,"Show Warning"),e.qZA(),e.TgZ(40,"mat-option",18),e._uU(41,"Stop Execution"),e.qZA()()()()),2&u&&(e.xp6(5),e.hij("Use ","ability"===l.counterType?"an":"a"," "),e.xp6(4),e.Q6J("value",l.counterType),e.xp6(7),e.Q6J("ngSwitch",l.counterType),e.xp6(2),e.Q6J("ngSwitchCase","slot"),e.xp6(1),e.Q6J("ngSwitchCase","ability"),e.xp6(3),e.Q6J("ngModel",l.effect.amount),e.xp6(6),e.Q6J("ngModel",l.effect.allowOverflow),e.xp6(7),e.Q6J("value",l.errorBehaviourWrapper))},directives:[ce,J.KE,J.hX,de.gD,Oe.ey,ye.RF,ye.ED,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,ye.n9,ie.Hw,J.R9,Ce.gM,pn.nu,ye.sg,Oe.Nv,ee.xw,ee.SQ,ee.Wh,ee.yH,Le.oG],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});var Xe=j(6531),kt=j(7317);function Nt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"input",7),e.NdJ("change",function(){return e.CHM(l),e.oxw(2).changed.emit()})("ngModelChange",function(b){const ve=e.CHM(l).$implicit;return e.oxw(2).parent.higher[ve]=b}),e.qZA()()}if(2&C){const l=u.$implicit,v=e.oxw(2);e.xp6(1),e.MGl("placeholder","Level ",l,""),e.Q6J("ngModel",v.parent.higher[l])}}function Fn(C,u){if(1&C&&(e.TgZ(0,"div",2)(1,"mat-expansion-panel",3)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," At Higher Levels "),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,Nt,2,2,"mat-form-field",5),e.qZA()()()),2&C){const l=e.oxw();e.xp6(6),e.Q6J("ngForOf",l.possibleLevels)}}function Lt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"button",8),e.NdJ("click",function(){return e.CHM(l),e.oxw().addHigher()}),e._uU(2,"Add Higher Level"),e.qZA()()}}class _t{constructor(){this.changed=new e.vpe,this.undefined=void 0,this.possibleLevels=[]}calcLevels(){var C,u;this.possibleLevels=(C=this.spell.level+1,u=10,Array.from({length:u-C},(l,v)=>v+C))}addHigher(){this.parent.higher=new Map,this.changed.emit()}ngOnInit(){this.calcLevels()}ngOnChanges(u){this.calcLevels()}}function pr(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div",7)(1,"avr-higher-level",8),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA(),e.TgZ(2,"mat-checkbox",5),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.cantripScale=b})("change",function(){return e.CHM(l),e.oxw().changed.emit()}),e._uU(3," Scales like Cantrip "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("parent",l.effect)("spell",l.spell),e.xp6(1),e.Q6J("ngModel",l.effect.cantripScale)}}_t.\u0275fac=function(u){return new(u||_t)},_t.\u0275cmp=e.Xpm({type:_t,selectors:[["avr-higher-level"]],inputs:{parent:"parent",spell:"spell"},outputs:{changed:"changed"},features:[e.TTD],decls:2,vars:2,consts:[["style","min-width: 300px;",4,"ngIf"],[4,"ngIf"],[2,"min-width","300px"],[1,"higher-level-panel"],["fxLayout","column"],["fxFlex","",4,"ngFor","ngForOf"],["fxFlex",""],["matInput","",3,"placeholder","ngModel","change","ngModelChange"],["mat-stroked-button","",3,"click"]],template:function(u,l){1&u&&(e.YNc(0,Fn,7,1,"div",0),e.YNc(1,Lt,3,0,"div",1)),2&u&&(e.Q6J("ngIf",null!=l.parent.higher),e.xp6(1),e.Q6J("ngIf",void 0===l.parent.higher))},directives:[ye.O5,Xe.ib,Xe.yz,Xe.yK,ee.xw,ye.sg,J.KE,ee.yH,oe.Nt,k.Fj,k.JJ,k.On,kt.lW],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Qe extends Se{constructor(){super()}ngOnInit(){}}function ni(C,u){1&C&&(e.TgZ(0,"div",21)(1,"span"),e._uU(2," Concentration spells create an effect with the spell name automatically, this will overwrite it, potentially breaking things. "),e.qZA()())}Qe.\u0275fac=function(u){return new(u||Qe)},Qe.\u0275cmp=e.Xpm({type:Qe,selectors:[["avr-damage-effect"]],features:[e.qOj],decls:12,vars:4,consts:[["anchor","damage"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex",""],["matInput","","placeholder","Damage","required","",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[3,"ngModel","ngModelChange","change"],["fxLayout","column","fxFill","","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutAlign","space-evenly center","fxLayoutAlign.gt-xs","left center",4,"ngIf"],["fxLayout","column","fxFill","","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutAlign","space-evenly center","fxLayoutAlign.gt-xs","left center"],["fxFlex","",3,"parent","spell","changed"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Deals damage to or heals a targeted creature. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.damage=b}),e.qZA(),e.TgZ(6,"span",4),e._uU(7),e.qZA()(),e.TgZ(8,"span")(9,"mat-checkbox",5),e.NdJ("ngModelChange",function(b){return l.effect.overheal=b})("change",function(){return l.changed.emit()}),e._uU(10," Allow Overheal "),e.qZA()()(),e.YNc(11,pr,4,3,"div",6)),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.damage),e.xp6(2),e.Oqu("{ }"),e.xp6(2),e.Q6J("ngModel",l.effect.overheal),e.xp6(2),e.Q6J("ngIf",null!=l.spell))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,J.R9,Ce.gM,Le.oG,ye.O5,ee.s9,_t],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Sn extends Se{constructor(){super()}ngOnInit(){}}Sn.\u0275fac=function(u){return new(u||Sn)},Sn.\u0275cmp=e.Xpm({type:Sn,selectors:[["avr-ieffect-effect"]],features:[e.qOj],decls:34,vars:12,consts:[["anchor","ieffect"],["fxLayout","row","fxLayoutGap","4px",1,"auto-row"],["fxFlex","1 2 auto"],["matInput","","placeholder","Name","required","",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Duration","required","","matTooltip","Use -1 for infinite duration.",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],["fxFlex","2 1 auto"],["matInput","","placeholder","Effects",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],["style","color: red; font-weight: bold; margin-bottom: 10px; margin-top: -10px;",4,"ngIf"],["fxLayout","row","fxLayoutGap","8px",1,"auto-row"],["matTooltip","Whether the effect duration ticks down at the end of the turn rather than the start.",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","change"],["matTooltip","If another effect with the same name exists, add this effect as a child instead of overwriting it.",3,"ngModel","ngModelChange","change"],["fxLayout","row"],[1,"is-fullwidth"],["matInput","","placeholder","Description","rows","3","maxlength","500",3,"ngModel","change","ngModelChange"],["fxLayout","row",2,"gap","8px"],["fxFlex","",2,"max-width","calc(50% - 4px)"],["matInput","","placeholder","Save As","matTooltip","If supplied, saves the added effect as an automation variable. Use this in another IEffect's parent field to set this effect as its parent.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Parent","matTooltip","If supplied, sets the added effect's parent to the given effect. This must be the same as another IEffect's save_as.",1,"text-monospace",3,"ngModel","change","ngModelChange"],[2,"color","red","font-weight","bold","margin-bottom","10px","margin-top","-10px"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," This IEffect version (v1) has been deprecated in v4 of Avrae. Please recreate this effect to migrate to the new effect version! "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA()(),e.TgZ(6,"mat-form-field",2)(7,"input",4),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.duration=b}),e.qZA(),e.TgZ(8,"mat-icon",5),e._uU(9,"calculate "),e.qZA()(),e.TgZ(10,"mat-form-field",6)(11,"input",7),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.effects=b}),e.qZA(),e.TgZ(12,"span",8),e._uU(13),e.qZA()()(),e.YNc(14,ni,3,0,"div",9),e.TgZ(15,"div",10)(16,"span")(17,"mat-checkbox",11),e.NdJ("ngModelChange",function(b){return l.effect.end=b})("change",function(){return l.changed.emit()}),e._uU(18," Ticks on end of turn? "),e.qZA(),e.TgZ(19,"mat-checkbox",12),e.NdJ("ngModelChange",function(b){return l.effect.conc=b})("change",function(){return l.changed.emit()}),e._uU(20," Requires concentration? "),e.qZA(),e.TgZ(21,"mat-checkbox",13),e.NdJ("ngModelChange",function(b){return l.effect.stacking=b})("change",function(){return l.changed.emit()}),e._uU(22," Stacking? "),e.qZA()()(),e.TgZ(23,"div",14)(24,"mat-form-field",15)(25,"textarea",16),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.desc=b}),e._uU(26,"    "),e.qZA(),e.TgZ(27,"span",8),e._uU(28),e.qZA()()(),e.TgZ(29,"div",17)(30,"mat-form-field",18)(31,"input",19),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.save_as=b}),e.qZA()(),e.TgZ(32,"mat-form-field",18)(33,"input",20),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.parent=b}),e.qZA()()()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(2),e.Q6J("ngModel",l.effect.duration),e.xp6(4),e.Q6J("ngModel",l.effect.effects),e.xp6(2),e.Oqu("{ }"),e.xp6(1),e.Q6J("ngIf",null!=l.spell&&l.spell.concentration&&l.spell.name==l.effect.name),e.xp6(3),e.Q6J("ngModel",l.effect.end),e.xp6(2),e.Q6J("ngModel",l.effect.conc),e.xp6(2),e.Q6J("ngModel",l.effect.stacking),e.xp6(4),e.Q6J("ngModel",l.effect.desc),e.xp6(3),e.Oqu("{ }"),e.xp6(3),e.Q6J("ngModel",l.effect.save_as),e.xp6(2),e.Q6J("ngModel",l.effect.parent))},directives:[ce,ee.xw,ee.SQ,J.KE,ee.yH,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,Ce.gM,ie.Hw,J.R9,ye.O5,Le.oG,k.nD],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});const et="annotatedstring",Re="intexpression",mt=[{name:"Bludgeoning",value:"bludgeoning"},{name:"Piercing",value:"piercing"},{name:"Slashing",value:"slashing"},{name:"Acid",value:"acid"},{name:"Cold",value:"cold"},{name:"Fire",value:"fire"},{name:"Force",value:"force"},{name:"Lightning",value:"lightning"},{name:"Necrotic",value:"necrotic"},{name:"Poison",value:"poison"},{name:"Psychic",value:"psychic"},{name:"Radiant",value:"radiant"},{name:"Thunder",value:"thunder"}],Jt=[{name:"All",value:"all"},{name:"Strength",value:"str"},{name:"Dexterity",value:"dex"},{name:"Constitution",value:"con"},{name:"Intelligence",value:"int"},{name:"Wisdom",value:"wis"},{name:"Charisma",value:"cha"}],Bn=[{name:"All",value:"all"},{name:"Acrobatics",value:"acrobatics"},{name:"Animal Handling",value:"animalHandling"},{name:"Arcana",value:"arcana"},{name:"Athletics",value:"athletics"},{name:"Deception",value:"deception"},{name:"History",value:"history"},{name:"Initiative",value:"initiative"},{name:"Insight",value:"insight"},{name:"Intimidation",value:"intimidation"},{name:"Investigation",value:"investigation"},{name:"Medicine",value:"medicine"},{name:"Nature",value:"nature"},{name:"Perception",value:"perception"},{name:"Performance",value:"performance"},{name:"Persuasion",value:"persuasion"},{name:"Religion",value:"religion"},{name:"Sleight of Hand",value:"sleightOfHand"},{name:"Stealth",value:"stealth"},{name:"Survival",value:"survival"},{name:"Strength",value:"strength"},{name:"Dexterity",value:"dexterity"},{name:"Constitution",value:"constitution"},{name:"Intelligence",value:"intelligence"},{name:"Wisdom",value:"wisdom"},{name:"Charisma",value:"charisma"}],Ke={attack_advantage:{name:"Attack Advantage",type:Re,defaultOptions:[{name:"Flat",value:"0"},{name:"Advantage",value:"1"},{name:"Disadvantage",value:"-1"},{name:"Elven Accuracy",value:"2"}]},to_hit_bonus:{name:"To Hit Bonus",type:et},damage_bonus:{name:"Damage Bonus",type:et},magical_damage:{name:"Magical Damage",type:Re,defaultOptions:[{name:"True",value:"1"}]},silvered_damage:{name:"Silvered Damage",type:Re,defaultOptions:[{name:"True",value:"1"}]},resistances:{name:"Resistance",type:et,isList:!0,defaultOptions:mt},immunities:{name:"Immunity",type:et,isList:!0,defaultOptions:mt},vulnerabilities:{name:"Vulnerability",type:et,isList:!0,defaultOptions:mt},ignored_resistances:{name:"Ignore Resistance",type:et,isList:!0,defaultOptions:mt},ac_value:{name:"Set AC",type:Re},ac_bonus:{name:"AC Bonus",type:Re},max_hp_value:{name:"Set Max HP",type:Re},max_hp_bonus:{name:"Max HP Bonus",type:Re},save_bonus:{name:"Saving Throw Bonus",type:et},save_adv:{name:"Saving Throw Advantage",type:et,isList:!0,defaultOptions:Jt},save_dis:{name:"Saving Throw Disadvantage",type:et,isList:!0,defaultOptions:Jt},check_bonus:{name:"Ability Check Bonus",type:et},check_adv:{name:"Ability Check Advantage",type:et,isList:!0,defaultOptions:Bn},check_dis:{name:"Ability Check Disadvantage",type:et,isList:!0,defaultOptions:Bn}};var Ii=j(345);class We{constructor(){this.delete=new e.vpe,this.deleteState=0}deleteClicked(){this.deleteState++,2===this.deleteState&&(this.delete.emit(),this.deleteState=0)}}function jt(C,u){1&C&&(e.TgZ(0,"mat-error"),e._uU(1," Concentration spells create an effect with the spell name automatically. This will overwrite it, potentially creating issues. "),e.qZA())}function Jn(C,u){if(1&C&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(1),e.hij(" ",l.name," ")}}function Vt(C,u){if(1&C&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(1),e.hij(" ",l.name," ")}}function ii(C,u){if(1&C&&(e.TgZ(0,"mat-form-field",26)(1,"mat-label"),e._uU(2,"Value"),e.qZA(),e.TgZ(3,"mat-select",33),e.YNc(4,Vt,2,2,"mat-option",28),e.TgZ(5,"mat-option",32),e._uU(6,"Custom"),e.qZA()()()),2&C){const l=e.oxw().$implicit,v=e.oxw();e.xp6(4),e.Q6J("ngForOf",v.PASSIVE_EFFECTS[l.get("effectType").value].defaultOptions),e.xp6(1),e.Q6J("value",v.CUSTOM_SENTINEL)}}function ri(C,u){1&C&&(e.TgZ(0,"mat-icon",7),e._uU(1," calculate "),e.qZA())}function ot(C,u){1&C&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&C&&(e.xp6(1),e.hij(" ","{ }"," "))}function Hn(C,u){if(1&C&&(e.TgZ(0,"mat-form-field",34)(1,"mat-label"),e._uU(2,"Custom Expression"),e.qZA(),e._UZ(3,"input",35),e.YNc(4,ri,2,0,"mat-icon",36),e.YNc(5,ot,2,1,"span",37),e.qZA()),2&C){const l=e.oxw().$implicit,v=e.oxw();e.xp6(4),e.Q6J("ngIf",v.isValueIntExpression(l)),e.xp6(1),e.Q6J("ngIf",!v.isValueIntExpression(l))}}function vt(C,u){1&C&&e._UZ(0,"span",34)}function Zt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"div",25)(2,"mat-form-field",26)(3,"mat-label"),e._uU(4,"Passive Effect"),e.qZA(),e.TgZ(5,"mat-select",27),e.YNc(6,Jn,2,2,"mat-option",28),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8,"Only one instance of this effect may be specified."),e.qZA()(),e.YNc(9,ii,7,2,"mat-form-field",29),e.YNc(10,Hn,6,2,"mat-form-field",30),e.YNc(11,vt,1,0,"span",30),e.TgZ(12,"avr-doubleclick-delete-button",31),e.NdJ("delete",function(){const H=e.CHM(l).index;return e.oxw().deletePassiveEffect(H)}),e.qZA()()()}if(2&C){const l=u.$implicit,v=u.index,b=e.oxw();e.xp6(1),e.Q6J("formGroupName",v),e.xp6(5),e.Q6J("ngForOf",b.passiveEffectTypeOptions),e.xp6(3),e.Q6J("ngIf",b.hasDefaultOptions(l)),e.xp6(1),e.Q6J("ngIf",b.isCustomValue(l)),e.xp6(1),e.Q6J("ngIf",!b.isCustomValue(l))}}function Ye(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.qZA()(),e.TgZ(4,"div",38)(5,"mat-form-field",1),e._UZ(6,"input",39),e.qZA(),e.TgZ(7,"p",4),e._uU(8," Display Options "),e.qZA(),e.TgZ(9,"div",40)(10,"mat-form-field",41)(11,"mat-label"),e._uU(12,"Verb"),e.qZA(),e._UZ(13,"input",42),e.qZA(),e.TgZ(14,"mat-form-field",21),e._UZ(15,"input",43),e.qZA()(),e.TgZ(16,"mat-form-field",1),e._UZ(17,"input",44),e.qZA(),e.TgZ(18,"mat-checkbox",45),e._uU(19," Name is proper noun "),e.qZA(),e.TgZ(20,"p",4),e._uU(21," Critical Hit Options "),e.qZA(),e.TgZ(22,"div",40)(23,"mat-form-field",41)(24,"mat-label"),e._uU(25,"Crit On"),e.qZA(),e._UZ(26,"input",46),e.qZA(),e.TgZ(27,"mat-form-field",21),e._UZ(28,"input",47),e.qZA()(),e.TgZ(29,"p",4),e._uU(30," Default Casting Information Overrides "),e.qZA(),e.TgZ(31,"p"),e._uU(32," For Attack and Save nodes without an explicitly defined attack bonus/DC, the default DC and attack modifier to use. If left blank, the target's default spellcasting information is used. "),e.qZA(),e.TgZ(33,"div",40)(34,"mat-form-field",21),e._UZ(35,"input",48),e.TgZ(36,"mat-icon",7),e._uU(37," calculate "),e.qZA()(),e.TgZ(38,"mat-form-field",21),e._UZ(39,"input",49),e.TgZ(40,"mat-icon",7),e._uU(41," calculate "),e.qZA()(),e.TgZ(42,"mat-form-field",21),e._UZ(43,"input",50),e.TgZ(44,"mat-icon",7),e._uU(45," calculate "),e.qZA()()(),e.TgZ(46,"p",4),e._uU(47," Effects "),e.qZA(),e.TgZ(48,"p"),e._uU(49," To edit this action's effects, use the Effect Tree! "),e.qZA()(),e.TgZ(50,"mat-action-row")(51,"avr-doubleclick-delete-button",31),e.NdJ("delete",function(){const H=e.CHM(l).index;return e.oxw().deleteAttack(H)}),e.qZA()()()}if(2&C){const l=u.$implicit,v=u.index;e.xp6(3),e.hij(" ",l.get("name").value," "),e.xp6(1),e.Q6J("formGroupName",v)}}function Di(C,u){if(1&C&&(e.TgZ(0,"mat-option",32)(1,"div",54),e._UZ(2,"span"),e.TgZ(3,"span"),e._uU(4),e.qZA()()()),2&C){const l=u.$implicit;e.Q6J("value",l.value),e.xp6(2),e.Gre("button-style button-style-",l.value,""),e.xp6(2),e.Oqu(l.name)}}function Ht(C,u){1&C&&(e.TgZ(0,"mat-form-field",34)(1,"mat-label"),e._uU(2,"Custom Expression"),e.qZA(),e._UZ(3,"input",55),e.TgZ(4,"mat-icon",7),e._uU(5," calculate "),e.qZA()())}function gn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.qZA()(),e.TgZ(4,"div",38)(5,"mat-form-field",1),e._UZ(6,"input",51),e.TgZ(7,"span",19),e._uU(8),e.qZA()(),e.TgZ(9,"p",4),e._uU(10," Display Options "),e.qZA(),e.TgZ(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Verb"),e.qZA(),e._UZ(14,"input",52),e.TgZ(15,"span",19),e._uU(16),e.qZA()(),e.TgZ(17,"div",40)(18,"mat-form-field",26)(19,"mat-label"),e._uU(20,"Style"),e.qZA(),e.TgZ(21,"mat-select",53),e.YNc(22,Di,5,5,"mat-option",28),e.TgZ(23,"mat-option",32),e._uU(24," Custom Expression "),e.qZA()()(),e.YNc(25,Ht,6,0,"mat-form-field",30),e.qZA(),e.TgZ(26,"p",4),e._uU(27," Default Casting Information Overrides "),e.qZA(),e.TgZ(28,"p"),e._uU(29," For Attack and Save nodes without an explicitly defined attack bonus/DC, the default DC and attack modifier to use. If left blank, the target's default spellcasting information is used. "),e.qZA(),e.TgZ(30,"div",40)(31,"mat-form-field",21),e._UZ(32,"input",48),e.TgZ(33,"mat-icon",7),e._uU(34," calculate "),e.qZA()(),e.TgZ(35,"mat-form-field",21),e._UZ(36,"input",49),e.TgZ(37,"mat-icon",7),e._uU(38," calculate "),e.qZA()(),e.TgZ(39,"mat-form-field",21),e._UZ(40,"input",50),e.TgZ(41,"mat-icon",7),e._uU(42," calculate "),e.qZA()()(),e.TgZ(43,"p",4),e._uU(44," Effects "),e.qZA(),e.TgZ(45,"p"),e._uU(46," To edit this button's effects, use the Effect Tree! "),e.qZA()(),e.TgZ(47,"mat-action-row")(48,"avr-doubleclick-delete-button",31),e.NdJ("delete",function(){const H=e.CHM(l).index;return e.oxw().deleteButton(H)}),e.qZA()()()}if(2&C){const l=u.$implicit,v=u.index,b=e.oxw();e.xp6(3),e.hij(" ",l.get("label").value," "),e.xp6(1),e.Q6J("formGroupName",v),e.xp6(4),e.hij(" ","{ }"," "),e.xp6(6),e.Q6J("placeholder","uses "+l.get("label").value),e.xp6(2),e.hij(" ","{ }"," "),e.xp6(6),e.Q6J("ngForOf",b.buttonStyleOptions),e.xp6(1),e.Q6J("value",b.CUSTOM_SENTINEL),e.xp6(2),e.Q6J("ngIf",b.isCustomButtonStyle(l))}}We.\u0275fac=function(u){return new(u||We)},We.\u0275cmp=e.Xpm({type:We,selectors:[["avr-doubleclick-delete-button"]],outputs:{delete:"delete"},decls:3,vars:1,consts:[["mat-icon-button","","matTooltip","Double click to delete.",3,"color","click","clickOutside"],["aria-label","Delete"]],template:function(u,l){1&u&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return l.deleteClicked()})("clickOutside",function(){return l.deleteState=0}),e.TgZ(1,"mat-icon",1),e._uU(2,"delete"),e.qZA()()),2&u&&e.Q6J("color",0===l.deleteState?"warn":"accent")},directives:[kt.lW,Ce.gM,Ii.t,ie.Hw],encapsulation:2});const st="__custom";class On extends Se{constructor(u){super(),this.fb=u,this.passiveEffects=this.fb.array([]),this.attacks=this.fb.array([]),this.buttons=this.fb.array([]),this.effectGroup=this.fb.group({passiveEffects:this.passiveEffects,attacks:this.attacks,buttons:this.buttons}),this.PASSIVE_EFFECTS=Ke,this.CUSTOM_SENTINEL=st,this.passiveEffectTypeOptions=Object.entries(Ke).map(([l,v])=>({value:l,name:v.name})),this.buttonStyleOptions=[{name:"Blurple",value:"1"},{name:"Grey",value:"2"},{name:"Green",value:"3"},{name:"Red",value:"4"}]}ngOnInit(){this.populatePassiveEffectForm(),this.passiveEffects.valueChanges.subscribe(u=>this.onPassiveEffectsChange(u)),this.populateAttackForm(),this.attacks.valueChanges.subscribe(u=>this.onAttacksChange(u)),this.populateButtonForm(),this.buttons.valueChanges.subscribe(u=>this.onButtonsChange(u))}get durationWrapper(){var u,l;return null!==(l=null===(u=this.effect.duration)||void 0===u?void 0:u.toString())&&void 0!==l?l:""}set durationWrapper(u){this.effect.duration=u||void 0}populatePassiveEffectForm(){if(this.effect.effects)for(const[u,l]of Object.entries(this.effect.effects)){const v=Ke[u];if(!v)continue;const b=H=>{var ve;return(null===(ve=v.defaultOptions)||void 0===ve?void 0:ve.map(Te=>Te.value).includes(H))?[H,null,!1]:[st,H,!1]};if(v.isList)for(const H of l)this.addPassiveEffect(u,...b(H));else this.addPassiveEffect(u,...b(l))}}addPassiveEffect(u=null,l="",v="",b=!0){const H=this.fb.control(u,tt=>this.passiveEffectTypeValidator(tt)),ve=this.fb.control(l),Te=this.fb.control(v);H.valueChanges.subscribe(()=>{ve.setValue(null),Te.setValue(null)}),this.passiveEffects.push(this.fb.group({effectType:H,defaultOptions:ve,value:Te}),{emitEvent:b})}deletePassiveEffect(u){this.passiveEffects.removeAt(u)}onPassiveEffectsChange(u){var l;const v={};for(const{effectType:b,defaultOptions:H,value:ve}of u){if(!(b in Ke))continue;const Te=H===st?ve:H||ve;Ke[b].isList?v[b]=[...null!==(l=v[b])&&void 0!==l?l:[],Te]:v[b]=Te}this.effect.effects=(0,Dt.isEmpty)(v)?void 0:v,this.changed.emit()}passiveEffectTypeValidator(u){return this.passiveEffects.controls.filter(v=>v.get("effectType")!==u).map(v=>v.get("effectType").value).filter(v=>!Ke[v].isList).includes(u.value)?{effectType:{name:`Can only specify one ${u.value} per IEffect`}}:null}hasDefaultOptions(u){const l=Ke[u.get("effectType").value];return!!l&&null!=l.defaultOptions}isCustomValue(u){var l,v;const b=u.get("effectType").value;return null!=b&&(u.get("defaultOptions").value===st||!(null===(v=null===(l=Ke[b])||void 0===l?void 0:l.defaultOptions)||void 0===v?void 0:v.length))}isValueIntExpression(u){const l=Ke[u.get("effectType").value];return!l||"intexpression"===l.type}populateAttackForm(){if(this.effect.attacks)for(const u of this.effect.attacks)this.addAttack(u,!1)}addAttack(u,l=!0){var v,b,H,ve,Te,tt,Rt,je,nt,tr,nr;const Cr=this.fb.control(null!==(v=null==u?void 0:u.attack.name)&&void 0!==v?v:"New Action");Cr.valueChanges.subscribe(()=>{setTimeout(()=>this.treeChanged.emit())}),this.attacks.push(this.fb.group({name:Cr,verb:this.fb.control(null!==(b=null==u?void 0:u.attack.verb)&&void 0!==b?b:null),thumb:this.fb.control(null!==(H=null==u?void 0:u.attack.thumb)&&void 0!==H?H:null),phrase:this.fb.control(null!==(ve=null==u?void 0:u.attack.phrase)&&void 0!==ve?ve:null),proper:this.fb.control(null!==(Te=null==u?void 0:u.attack.proper)&&void 0!==Te&&Te),criton:this.fb.control(null!==(tt=null==u?void 0:u.attack.criton)&&void 0!==tt?tt:null),extraCritDamage:this.fb.control(null!==(Rt=null==u?void 0:u.attack.extra_crit_damage)&&void 0!==Rt?Rt:null),defaultDc:this.fb.control(null!==(je=null==u?void 0:u.defaultDC)&&void 0!==je?je:null),defaultAttackBonus:this.fb.control(null!==(nt=null==u?void 0:u.defaultAttackBonus)&&void 0!==nt?nt:null),defaultCastingMod:this.fb.control(null!==(tr=null==u?void 0:u.defaultCastingMod)&&void 0!==tr?tr:null),_automation:this.fb.control(null!==(nr=null==u?void 0:u.attack.automation)&&void 0!==nr?nr:[])},{emitEvent:l})),l&&this.treeChanged.emit()}deleteAttack(u){this.attacks.removeAt(u),this.treeChanged.emit()}onAttacksChange(u){const l=[];for(const v of u)l.push({attack:{_v:2,name:v.name,automation:v._automation,verb:v.verb||void 0,thumb:v.thumb||void 0,phrase:v.phrase||void 0,proper:v.proper||void 0,criton:v.criton||void 0,extra_crit_damage:v.extraCritDamage||void 0},defaultDC:v.defaultDc||void 0,defaultAttackBonus:v.defaultAttackBonus||void 0,defaultCastingMod:v.defaultCastingMod||void 0});this.effect.attacks=(0,Dt.isEmpty)(l)?void 0:l,this.changed.emit()}populateButtonForm(){if(this.effect.buttons)for(const u of this.effect.buttons)this.addButton(u,!1)}addButton(u,l=!0){var v,b,H,ve,Te,tt;const Rt=this.fb.control(null!==(v=null==u?void 0:u.label)&&void 0!==v?v:"New Button");let je;Rt.valueChanges.subscribe(()=>{setTimeout(()=>this.treeChanged.emit())}),je=!(null==u?void 0:u.style)||this.buttonStyleOptions.some(nt=>nt.value===u.style)?{style:this.fb.control((null==u?void 0:u.style)||"1"),customStyle:this.fb.control(null)}:{style:this.fb.control(st),customStyle:this.fb.control((null==u?void 0:u.style)||null)},this.buttons.push(this.fb.group(Object.assign(Object.assign({label:Rt,verb:this.fb.control(null!==(b=null==u?void 0:u.verb)&&void 0!==b?b:null)},je),{defaultDc:this.fb.control(null!==(H=null==u?void 0:u.defaultDC)&&void 0!==H?H:null),defaultAttackBonus:this.fb.control(null!==(ve=null==u?void 0:u.defaultAttackBonus)&&void 0!==ve?ve:null),defaultCastingMod:this.fb.control(null!==(Te=null==u?void 0:u.defaultCastingMod)&&void 0!==Te?Te:null),_automation:this.fb.control(null!==(tt=null==u?void 0:u.automation)&&void 0!==tt?tt:[])}),{emitEvent:l})),l&&this.treeChanged.emit()}deleteButton(u){this.buttons.removeAt(u),this.treeChanged.emit()}onButtonsChange(u){const l=[];for(const v of u){const b=v.style===st?v.customStyle:v.style;l.push({label:v.label,automation:v._automation,verb:v.verb||void 0,style:b||void 0,defaultDC:v.defaultDc||void 0,defaultAttackBonus:v.defaultAttackBonus||void 0,defaultCastingMod:v.defaultCastingMod||void 0})}this.effect.buttons=(0,Dt.isEmpty)(l)?void 0:l,this.changed.emit()}isCustomButtonStyle(u){return u.get("style").value===st}}On.\u0275fac=function(u){return new(u||On)(e.Y36(k.qu))},On.\u0275cmp=e.Xpm({type:On,selectors:[["avr-ieffect2-effect"]],features:[e.qOj],decls:64,vars:16,consts:[["anchor","ieffect"],[1,"is-fullwidth"],["matInput","","placeholder","Name","required","",3,"ngModel","change","ngModelChange"],[4,"ngIf"],[1,"auto-label"],["floatLabel","always",1,"is-fullwidth"],["matInput","","placeholder","Indefinite","matTooltip","The duration, in rounds. Leave blank for infinite duration.",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","left baseline",1,"auto-row"],["matTooltip","Whether the effect duration ticks down at the end of the turn rather than the start.",3,"ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","change"],[3,"formGroup"],["formArrayName","passiveEffects"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],["formArrayName","attacks"],["multi",""],["formArrayName","buttons"],["matInput","","placeholder","Description","rows","3","maxlength","500",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline"],["fxFlex",""],["matInput","","placeholder","Save As","matTooltip","If supplied, saves the added effect as an automation variable. Use this in another IEffect's parent field to set this effect as its parent.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Parent","matTooltip","If supplied, sets the added effect's parent to the given effect. This must be the same as another IEffect's save_as.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matTooltip","If another effect with the same name exists, add this effect as a child instead of overwriting it.",3,"ngModel","ngModelChange","change"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row",3,"formGroupName"],["fxFlex","1 4 auto"],["formControlName","effectType"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","1 4 auto",4,"ngIf"],["fxFlex","4 1 auto",4,"ngIf"],[3,"delete"],[3,"value"],["formControlName","defaultOptions"],["fxFlex","4 1 auto"],["matInput","","formControlName","value"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional",4,"ngIf"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces",4,"ngIf"],[3,"formGroupName"],["matInput","","formControlName","name","placeholder","Name","required",""],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","","floatLabel","always"],["matInput","","formControlName","verb","placeholder","attacks with"],["matInput","","formControlName","thumb","placeholder","Thumbnail URL"],["matInput","","formControlName","phrase","placeholder","Flavor Text"],["formControlName","proper"],["matInput","","formControlName","criton","placeholder","(target's criton setting)","type","number","min","1","max","20"],["matInput","","formControlName","extraCritDamage","placeholder","Extra Crit Damage"],["matInput","","formControlName","defaultDc","placeholder","DC",1,"text-monospace"],["matInput","","formControlName","defaultAttackBonus","placeholder","Spell Attack Bonus",1,"text-monospace"],["matInput","","formControlName","defaultCastingMod","placeholder","Spellcasting Modifier",1,"text-monospace"],["matInput","","formControlName","label","placeholder","Label","required",""],["matInput","","formControlName","verb",3,"placeholder"],["formControlName","style"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","left center"],["matInput","","formControlName","customStyle"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Adds an InitTracker Effect to a targeted creature, if the target is in combat. Initiative Effects are a versatile method to modify a combatant's bonuses, maluses, grant temporary actions, and create automation that runs at the click of a button! "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field",1)(5,"input",2),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA(),e.YNc(6,jt,2,0,"mat-error",3),e.qZA()(),e.TgZ(7,"p",4),e._uU(8," Duration Options\n"),e.qZA(),e.TgZ(9,"div")(10,"mat-form-field",5)(11,"mat-label"),e._uU(12,"Duration"),e.qZA(),e.TgZ(13,"input",6),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.durationWrapper=b}),e.qZA(),e.TgZ(14,"mat-icon",7),e._uU(15," calculate "),e.qZA()()(),e.TgZ(16,"div",8)(17,"mat-checkbox",9),e.NdJ("ngModelChange",function(b){return l.effect.end=b})("change",function(){return l.changed.emit()}),e._uU(18," Ticks on end of turn "),e.qZA(),e.TgZ(19,"mat-checkbox",10),e.NdJ("ngModelChange",function(b){return l.effect.conc=b})("change",function(){return l.changed.emit()}),e._uU(20," Requires concentration "),e.qZA()(),e.TgZ(21,"div",11)(22,"div",12)(23,"p",4),e._uU(24," Passive Effects "),e.qZA(),e.YNc(25,Zt,13,5,"div",13),e.TgZ(26,"button",14),e.NdJ("click",function(){return l.addPassiveEffect()}),e._uU(27," + Add passive effect "),e.qZA()()(),e.TgZ(28,"div",11)(29,"div",15)(30,"p",4),e._uU(31," Granted Actions "),e.qZA(),e.TgZ(32,"mat-accordion",16),e.YNc(33,Ye,52,2,"mat-expansion-panel",13),e.qZA(),e.TgZ(34,"button",14),e.NdJ("click",function(){return l.addAttack()}),e._uU(35," + Add granted action "),e.qZA()()(),e.TgZ(36,"div",11)(37,"div",17)(38,"p",4),e._uU(39," Granted Buttons "),e.qZA(),e.TgZ(40,"mat-accordion",16),e.YNc(41,gn,49,8,"mat-expansion-panel",13),e.qZA(),e.TgZ(42,"button",14),e.NdJ("click",function(){return l.addButton()}),e._uU(43," + Add granted button "),e.qZA()()(),e.TgZ(44,"p",4),e._uU(45," Description\n"),e.qZA(),e.TgZ(46,"div")(47,"mat-form-field",1)(48,"textarea",18),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.desc=b}),e._uU(49,"    "),e.qZA(),e.TgZ(50,"span",19),e._uU(51),e.qZA()()(),e.TgZ(52,"p",4),e._uU(53," Parenting Options\n"),e.qZA(),e.TgZ(54,"div",20)(55,"mat-form-field",21)(56,"input",22),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.save_as=b}),e.qZA()(),e.TgZ(57,"mat-form-field",21)(58,"input",23),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.parent=b}),e.qZA()()(),e.TgZ(59,"p",4),e._uU(60," Other Options\n"),e.qZA(),e.TgZ(61,"div")(62,"mat-checkbox",24),e.NdJ("ngModelChange",function(b){return l.effect.stacking=b})("change",function(){return l.changed.emit()}),e._uU(63," Enable Effect Stacking "),e.qZA()()),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(1),e.Q6J("ngIf",null!=l.spell&&l.spell.concentration&&l.spell.name===l.effect.name),e.xp6(7),e.Q6J("ngModel",l.durationWrapper),e.xp6(4),e.Q6J("ngModel",l.effect.end),e.xp6(2),e.Q6J("ngModel",l.effect.conc),e.xp6(2),e.Q6J("formGroup",l.effectGroup),e.xp6(4),e.Q6J("ngForOf",l.passiveEffects.controls),e.xp6(3),e.Q6J("formGroup",l.effectGroup),e.xp6(5),e.Q6J("ngForOf",l.attacks.controls),e.xp6(3),e.Q6J("formGroup",l.effectGroup),e.xp6(5),e.Q6J("ngForOf",l.buttons.controls),e.xp6(7),e.Q6J("ngModel",l.effect.desc),e.xp6(3),e.Oqu("{ }"),e.xp6(5),e.Q6J("ngModel",l.effect.save_as),e.xp6(2),e.Q6J("ngModel",l.effect.parent),e.xp6(4),e.Q6J("ngModel",l.effect.stacking))},directives:[ce,J.KE,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,ye.O5,J.TO,J.hX,Ce.gM,ie.Hw,J.R9,ee.xw,ee.SQ,ee.Wh,Le.oG,k.JL,k.sg,k.CE,ye.sg,k.x0,ee.yH,de.gD,k.u,Oe.ey,We,kt.lW,Xe.pp,Xe.ib,Xe.yz,Xe.yK,k.wV,k.qQ,k.Fd,Xe.VG,k.nD],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}",".button-style[_ngcontent-%COMP%]{border-radius:50%;width:1.25em;height:1.25em;display:inline-block}.button-style-1[_ngcontent-%COMP%]{background:rgb(88,101,242)}.button-style-2[_ngcontent-%COMP%]{background:rgb(79,84,92)}.button-style-3[_ngcontent-%COMP%]{background:rgb(45,125,70)}.button-style-4[_ngcontent-%COMP%]{background:rgb(216,60,62)}\n/*# sourceMappingURL=ieffect2-effect.component.css.map*/"]});class $e extends Se{constructor(){super()}ngOnInit(){}get removeParentWrapper(){var u;return null!==(u=this.effect.removeParent)&&void 0!==u?u:"never"}set removeParentWrapper(u){this.effect.removeParent="never"==u?void 0:u}}function sn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p",7),e._uU(2,"Spell Options"),e.qZA(),e.TgZ(3,"div",10)(4,"avr-higher-level",11),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA(),e.TgZ(5,"mat-checkbox",12),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.cantripScale=b})("change",function(){return e.CHM(l),e.oxw().changed.emit()}),e._uU(6," Scales like Cantrip "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("parent",l.effect)("spell",l.spell),e.xp6(1),e.Q6J("ngModel",l.effect.cantripScale)}}$e.\u0275fac=function(u){return new(u||$e)},$e.\u0275cmp=e.Xpm({type:$e,selectors:[["avr-remove-ieffect-effect"]],features:[e.qOj],decls:17,vars:1,consts:[["anchor","remove-ieffect"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","never"],["value","always"],["value","if_no_children"],["aria-hidden","false","aria-label","Remove parent help","inline","","matTooltip","If the removed effect has a parent effect, whether to remove it as well."]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Removes the initiative effect that triggered this automation. Only works when run in execution triggered by an initiative effect, such as a ButtonInteraction. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Remove Parent"),e.qZA(),e.TgZ(7,"mat-select",2),e.NdJ("valueChange",function(b){return l.removeParentWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(8,"mat-option",3),e._uU(9,"Never"),e.qZA(),e.TgZ(10,"mat-option",4),e._uU(11,"Always"),e.qZA(),e.TgZ(12,"mat-option",5),e._uU(13,"If No Children"),e.qZA()()(),e.TgZ(14,"span")(15,"mat-icon",6),e._uU(16," help "),e.qZA()()()),2&u&&(e.xp6(7),e.Q6J("value",l.removeParentWrapper))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,J.hX,de.gD,Oe.ey,ie.Hw,Ce.gM],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class L extends Se{constructor(){super()}ngOnInit(){}}function d(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-checkbox",13),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().custom=b})("change",function(){e.CHM(l);const b=e.oxw();return b.changed.emit(),b.onCustomChange()}),e._uU(1," Has custom DC "),e.qZA()}if(2&C){const l=e.oxw();e.Q6J("ngModel",l.custom)}}function _(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",14)(1,"input",15),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.dc=b}),e.qZA(),e.TgZ(2,"mat-icon",16),e._uU(3," calculate "),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("ngModel",l.effect.dc)}}L.\u0275fac=function(u){return new(u||L)},L.\u0275cmp=e.Xpm({type:L,selectors:[["avr-roll-effect"]],features:[e.qOj],decls:16,vars:5,consts:[["anchor","roll"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","1 3 auto"],["matInput","","placeholder","Name","required","","matTooltip","The result of the roll will be saved to an automation variable with this name.",1,"text-monospace",3,"ngModel","change","ngModelChange"],["fxFlex","3 1 auto"],["matInput","","placeholder","Dice","required","",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[1,"auto-label"],["matTooltip","If checked, the roll won't display in the automation's Meta field or apply bonuses from the -d argument.",3,"ngModel","ngModelChange","change"],[4,"ngIf"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["fxFlex","",3,"parent","spell","changed"],[3,"ngModel","ngModelChange","change"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Rolls some dice and saves the result in a variable. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA()(),e.TgZ(6,"mat-form-field",4)(7,"input",5),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.dice=b}),e.qZA(),e.TgZ(8,"span",6),e._uU(9),e.qZA()()(),e.TgZ(10,"p",7),e._uU(11,"Additional Options"),e.qZA(),e.TgZ(12,"div")(13,"mat-checkbox",8),e.NdJ("ngModelChange",function(b){return l.effect.hidden=b})("change",function(){return l.changed.emit()}),e._uU(14," Hidden "),e.qZA()(),e.YNc(15,sn,7,3,"div",9)),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(2),e.Q6J("ngModel",l.effect.dice),e.xp6(2),e.Oqu("{ }"),e.xp6(4),e.Q6J("ngModel",l.effect.hidden),e.xp6(2),e.Q6J("ngIf",l.spell))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,oe.Nt,k.Fj,k.Q7,Ce.gM,k.JJ,k.On,J.R9,Le.oG,ye.O5,_t],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class w extends Se{constructor(){super(),this.custom=!1}get advantageWrapper(){var u;return null!==(u=this.effect.adv)&&void 0!==u?u:0}set advantageWrapper(u){this.effect.adv=u||void 0}ngOnInit(){(this.effect.dc||null==this.spell)&&(this.custom=!0)}onCustomChange(){this.custom||(this.effect.dc=void 0)}}function E(C,u){if(1&C&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij(" ",l.name," ")}}function P(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div",10)(1,"mat-form-field",11)(2,"input",12),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.dc=b}),e.qZA(),e.TgZ(3,"mat-icon",13),e._uU(4," calculate "),e.qZA()(),e.TgZ(5,"mat-form-field",11)(6,"input",14),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.attackBonus=b}),e.qZA(),e.TgZ(7,"mat-icon",13),e._uU(8," calculate "),e.qZA()(),e.TgZ(9,"mat-form-field",11)(10,"input",15),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.castingMod=b}),e.qZA(),e.TgZ(11,"mat-icon",13),e._uU(12," calculate "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.effect.dc),e.xp6(4),e.Q6J("ngModel",l.effect.attackBonus),e.xp6(4),e.Q6J("ngModel",l.effect.castingMod)}}w.\u0275fac=function(u){return new(u||w)},w.\u0275cmp=e.Xpm({type:w,selectors:[["avr-save-effect"]],features:[e.qOj],decls:36,vars:7,consts:[["anchor","save"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","str"],["value","dex"],["value","con"],["value","int"],["value","wis"],["value","cha"],["matTooltip","If not checked, uses the caster's default DC.",3,"ngModel","ngModelChange","change",4,"ngIf"],["fxFlex","grow",4,"ngIf"],["matTooltip","The default advantage for this saving throw."],[3,"value"],["matTooltip","If not checked, uses the caster's default DC.",3,"ngModel","ngModelChange","change"],["fxFlex","grow"],["matInput","","placeholder","DC",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," A Save effect forces a targeted creature to make a saving throw. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Save Stat"),e.qZA(),e.TgZ(7,"mat-select",2),e.NdJ("valueChange",function(b){return l.effect.stat=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(8,"mat-option",3),e._uU(9,"Strength"),e.qZA(),e.TgZ(10,"mat-option",4),e._uU(11,"Dexterity"),e.qZA(),e.TgZ(12,"mat-option",5),e._uU(13,"Constitution"),e.qZA(),e.TgZ(14,"mat-option",6),e._uU(15,"Intelligence"),e.qZA(),e.TgZ(16,"mat-option",7),e._uU(17,"Wisdom"),e.qZA(),e.TgZ(18,"mat-option",8),e._uU(19,"Charisma"),e.qZA()()()(),e.TgZ(20,"div",1),e.YNc(21,d,2,1,"mat-checkbox",9),e.YNc(22,_,4,1,"mat-form-field",10),e.qZA(),e.TgZ(23,"div")(24,"mat-form-field",11)(25,"mat-label"),e._uU(26,"Advantage"),e.qZA(),e.TgZ(27,"mat-select",2),e.NdJ("valueChange",function(b){return l.advantageWrapper=b})("selectionChange",function(){return l.changed.emit()}),e.TgZ(28,"mat-option",12),e._uU(29,"Flat"),e.qZA(),e.TgZ(30,"mat-option",12),e._uU(31,"Advantage"),e.qZA(),e.TgZ(32,"mat-option",12),e._uU(33,"Disadvantage"),e.qZA()()()(),e.TgZ(34,"p"),e._uU(35," Use the Effect Tree to edit the on-fail and on-success effects!\n"),e.qZA()),2&u&&(e.xp6(7),e.Q6J("value",l.effect.stat),e.xp6(14),e.Q6J("ngIf",null!=l.spell),e.xp6(1),e.Q6J("ngIf",l.custom),e.xp6(5),e.Q6J("value",l.advantageWrapper),e.xp6(1),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",-1))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,J.hX,de.gD,Oe.ey,ye.O5,Le.oG,Ce.gM,k.JJ,k.On,ee.yH,oe.Nt,k.Fj,ie.Hw,J.R9],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class N extends Se{constructor(u){super(),this.gamedataService=u,this.allSpells=[],this.searchFilteredSpells=[],this.custom=!1}ngOnInit(){this.loadSpells(),(this.effect.dc||this.effect.attackBonus||this.effect.castingMod)&&(this.custom=!0)}onCustomChange(){this.custom||(this.effect.dc=void 0,this.effect.attackBonus=void 0,this.effect.castingMod=void 0)}onSpellSelectionChange(u){const l=u.value;this.effect.id=l.entity_id,this.spellToCast=l}updateSearchFilteredSpells(u){this.searchFilteredSpells=this.allSpells.filter(l=>l.name.toLowerCase().includes(u.toLowerCase()))}loadSpells(){this.gamedataService.getAllEntitlements().subscribe(u=>{if(u.success){const l=Array.from(u.data.values());this.allSpells=l.filter(v=>"spell"===v.entity_type),this.spellToCast=this.allSpells.find(v=>v.entity_id===this.effect.id),this.updateSearchFilteredSpells("")}})}}function Q(C,u){1&C&&(e.TgZ(0,"mat-option",11),e._uU(1,"All"),e.qZA())}function te(C,u){1&C&&(e.TgZ(0,"mat-option",12),e._uU(1,"Position"),e.qZA())}function pe(C,u){1&C&&(e.TgZ(0,"mat-option",13),e._uU(1,"Parent"),e.qZA())}function ke(C,u){1&C&&(e.TgZ(0,"mat-option",14),e._uU(1,"Children"),e.qZA())}function at(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",15,16),e.NdJ("change",function(){e.CHM(l);const b=e.MAs(2);return e.oxw().onTargetPosChange(b)}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("value",l.effect.target.toString())}}function Et(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"mat-form-field",17)(1,"mat-label"),e._uU(2,"Sort Targets By"),e.qZA(),e.TgZ(3,"mat-select",2),e.NdJ("valueChange",function(b){e.CHM(l);return e.oxw().selectedTargetSort=b})("selectionChange",function(b){return e.CHM(l),e.oxw().onTargetSortChange(b)}),e.TgZ(4,"mat-option",18),e._uU(5,"User Input"),e.qZA(),e.TgZ(6,"mat-option",19),e._uU(7,"HP Ascending"),e.qZA(),e.TgZ(8,"mat-option",20),e._uU(9,"HP Descending"),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(3),e.Q6J("value",l.selectedTargetSort)}}N.\u0275fac=function(u){return new(u||N)(e.Y36(ze.u))},N.\u0275cmp=e.Xpm({type:N,selectors:[["avr-spell-effect"]],features:[e.qOj],decls:23,vars:5,consts:[["anchor","cast-spell"],[1,"auto-row"],[3,"value","selectionChange"],["placeholderLabel","Search","noEntriesFoundLabel","No matches found.","ngModel","",3,"ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always","matTooltip","If a level is not provided, this defaults to the spell's level."],["matInput","","placeholder","(default level)","type","number","min","0","max","9",3,"ngModel","ngModelChange"],["matTooltip","Whether to use the caster's default DC and attack modifier or the information defined here.",3,"ngModel","ngModelChange","change"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",4,"ngIf"],[3,"value"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["fxFlex",""],["matInput","","placeholder","DC",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],["matInput","","placeholder","Spell Attack Bonus",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matInput","","placeholder","Spellcasting Modifier",1,"text-monospace",3,"ngModel","change","ngModelChange"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Executes the given spell\u2019s automation as if it were immediately cast. Does not use a spell slot to cast the spell. This is usually used in features that cast spells using alternate resources. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"span"),e._uU(5,"Cast "),e.qZA(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Spell"),e.qZA(),e.TgZ(9,"mat-select",2),e.NdJ("selectionChange",function(b){return l.onSpellSelectionChange(b)}),e.TgZ(10,"mat-option")(11,"ngx-mat-select-search",3),e.NdJ("ngModelChange",function(b){return l.updateSearchFilteredSpells(b)}),e.qZA()(),e.YNc(12,E,2,2,"mat-option",4),e.qZA()(),e.TgZ(13,"span"),e._uU(14," at level "),e.qZA(),e.TgZ(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"Spell Level"),e.qZA(),e.TgZ(18,"input",6),e.NdJ("ngModelChange",function(b){return l.effect.level=b}),e.qZA()()(),e.TgZ(19,"div")(20,"mat-checkbox",7),e.NdJ("ngModelChange",function(b){return l.custom=b})("change",function(){return l.onCustomChange(),l.changed.emit()}),e._uU(21," Override caster's spellcasting information "),e.qZA()(),e.YNc(22,P,13,3,"div",8)),2&u&&(e.xp6(9),e.Q6J("value",l.spellToCast),e.xp6(3),e.Q6J("ngForOf",l.searchFilteredSpells),e.xp6(6),e.Q6J("ngModel",l.effect.level),e.xp6(2),e.Q6J("ngModel",l.custom),e.xp6(2),e.Q6J("ngIf",l.custom))},directives:[ce,J.KE,J.hX,de.gD,Oe.ey,pn.nu,k.JJ,k.On,ye.sg,Ce.gM,oe.Nt,k.qQ,k.Fd,k.wV,k.Fj,Le.oG,ye.O5,ee.xw,ee.SQ,ee.Wh,ee.yH,ie.Hw,J.R9],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class At extends Se{constructor(){super(),this.selectedTarget="self",this.selectedTargetSort="user"}ngOnInit(){var u;this.selectedTarget=this.isNumber(this.effect.target)?"position":this.effect.target,this.selectedTargetSort=null!==(u=this.effect.sortBy)&&void 0!==u?u:"user"}isNumber(u){return"number"==typeof u}onTargetSelectChange(u){"position"===u.value?this.effect.target=1:this.effect.target=u.value,"self"===u.value&&(this.selectedTargetSort="user",this.effect.sortBy=void 0),this.changed.emit()}onTargetPosChange(u){this.effect.target=+u.value,this.changed.emit()}onTargetSortChange(u){"user"===u.value?this.effect.sortBy=void 0:this.effect.sortBy=u.value,this.changed.emit()}}function yt(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p",6),e._uU(2,"Spell Options"),e.qZA(),e.TgZ(3,"div",7)(4,"avr-higher-level",8),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA(),e.TgZ(5,"mat-checkbox",9),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.cantripScale=b})("change",function(){return e.CHM(l),e.oxw().changed.emit()}),e._uU(6," Scales like Cantrip "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("parent",l.effect)("spell",l.spell),e.xp6(1),e.Q6J("ngModel",l.effect.cantripScale)}}At.\u0275fac=function(u){return new(u||At)},At.\u0275cmp=e.Xpm({type:At,selectors:[["avr-target-effect"]],features:[e.qOj],decls:20,vars:7,consts:[["anchor","target"],["fxLayout","row","fxLayoutGap","6px",1,"auto-row"],[3,"value","valueChange","selectionChange"],["value","all",4,"ngIf"],["value","self"],["value","position",4,"ngIf"],["value","parent",4,"ngIf"],["value","children",4,"ngIf"],["value","each",2,"height","0"],[4,"ngIf"],["matTooltip","By default, targets are processed in the order the -t arguments are given.",4,"ngIf"],["value","all"],["value","position"],["value","parent"],["value","children"],["matInput","","placeholder","Target Position","type","number","min","1",3,"value","change"],["targetPosInput",""],["matTooltip","By default, targets are processed in the order the -t arguments are given."],["value","user"],["value","hp_asc"],["value","hp_desc"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Designates what creatures to affect. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Target"),e.qZA(),e.TgZ(7,"mat-select",2),e.NdJ("valueChange",function(b){return l.selectedTarget=b})("selectionChange",function(b){return l.onTargetSelectChange(b)}),e.YNc(8,Q,2,0,"mat-option",3),e.TgZ(9,"mat-option",4),e._uU(10,"Caster"),e.qZA(),e.YNc(11,te,2,0,"mat-option",5),e.YNc(12,pe,2,0,"mat-option",6),e.YNc(13,ke,2,0,"mat-option",7),e.TgZ(14,"mat-option",8),e._uU(15,"All"),e.qZA()()(),e.YNc(16,at,3,1,"mat-form-field",9),e.YNc(17,Et,10,1,"mat-form-field",10),e.qZA(),e.TgZ(18,"p"),e._uU(19," Use the Effect Tree to edit the child effects!\n"),e.qZA()),2&u&&(e.xp6(7),e.Q6J("value",l.selectedTarget),e.xp6(1),e.Q6J("ngIf",!l.isIEffect),e.xp6(3),e.Q6J("ngIf",!l.isIEffect),e.xp6(1),e.Q6J("ngIf",l.isIEffect),e.xp6(1),e.Q6J("ngIf",l.isIEffect),e.xp6(3),e.Q6J("ngIf",l.isNumber(l.effect.target)),e.xp6(1),e.Q6J("ngIf","self"!==l.effect.target))},directives:[ce,ee.xw,ee.SQ,J.KE,J.hX,de.gD,ye.O5,Oe.ey,oe.Nt,Ce.gM],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class $n extends Se{constructor(){super()}ngOnInit(){}}function St(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",6)(2,"textarea",7),e.NdJ("change",function(){return e.CHM(l),e.oxw().changed.emit()})("ngModelChange",function(b){e.CHM(l);return e.oxw().effect.text=b}),e._uU(3,"    "),e.qZA(),e.TgZ(4,"span",8),e._uU(5),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.effect.text),e.xp6(3),e.Oqu("{ }")}}function ki(C,u){if(1&C&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&C){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij(" ",l.name," ")}}function oi(C,u){if(1&C&&(e.TgZ(0,"mat-optgroup",12),e.YNc(1,ki,2,2,"mat-option",13),e.qZA()),2&C){const l=u.$implicit;e.Q6J("label",l[0]),e.xp6(1),e.Q6J("ngForOf",l[1])}}function si(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Referenced Ability"),e.qZA(),e.TgZ(4,"mat-select",9),e.NdJ("selectionChange",function(b){return e.CHM(l),e.oxw().onRefSelectionChange(b)}),e.TgZ(5,"mat-option")(6,"ngx-mat-select-search",10),e.NdJ("ngModelChange",function(b){return e.CHM(l),e.oxw().debouncedUpdateSearchFilteredGroupedRefs(b)}),e.qZA()(),e.YNc(7,oi,2,2,"mat-optgroup",11),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("value",l.selectedAbilityRef),e.xp6(3),e.Q6J("ngForOf",l.searchFilteredGroupedRefs)}}$n.\u0275fac=function(u){return new(u||$n)},$n.\u0275cmp=e.Xpm({type:$n,selectors:[["avr-temphp-effect"]],features:[e.qOj],decls:9,vars:3,consts:[["anchor","temphp"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","grow"],["matInput","","placeholder","Amount","required","",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[4,"ngIf"],[1,"auto-label"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutAlign","left center"],[3,"parent","spell","changed"],[3,"ngModel","ngModelChange","change"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Sets the target's temp HP. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.amount=b}),e.qZA(),e.TgZ(6,"span",4),e._uU(7),e.qZA()()(),e.YNc(8,yt,7,3,"div",5)),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.amount),e.xp6(2),e.Oqu("{ }"),e.xp6(1),e.Q6J("ngIf",null!=l.spell))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,J.R9,Ce.gM,ye.O5,_t,Le.oG],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});const mi={text:"Display the text given below when the effect is run. This is the most common way to display an ability's effect.",ref:"Display the full description of a given feature."};class Qn extends Se{constructor(u){super(),this.gamedataService=u,this.TEXT_TYPE_HELPS=mi,this.textType="text",this.allRefs=[],this.searchFilteredGroupedRefs=[],this.debouncedUpdateSearchFilteredGroupedRefs=(0,Dt.debounce)(this.updateSearchFilteredGroupedRefs,500)}ngOnInit(){this.loadRefs(),"string"==typeof this.effect.text?this.textType="text":this.textType="ref"}onTextTypeChange(){"text"===this.textType?this.effect.text="":(this.effect.text={id:192,typeId:12168134},this.updateSelectedRef())}onRefSelectionChange(u){this.effect.text={id:u.value.entity_id,typeId:u.value.type_id},this.selectedAbilityRef=u.value}updateSearchFilteredGroupedRefs(u){let l=this.allRefs.filter(v=>v.name.toLowerCase().includes(u.toLowerCase()));this.searchFilteredGroupedRefs=Object.entries((0,Dt.groupBy)(l,v=>v.entity_type))}updateSelectedRef(){let u=this.effect.text;this.selectedAbilityRef=this.allRefs.find(l=>l.entity_id===u.id&&l.type_id===u.typeId)}loadRefs(){this.gamedataService.getDescribableEntities().subscribe(u=>{u.success&&(this.allRefs=u.data,this.updateSelectedRef(),this.updateSearchFilteredGroupedRefs(""))})}}function ai(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p",7),e._uU(2,"Spell Options"),e.qZA(),e.TgZ(3,"div",12)(4,"avr-higher-level",13),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()}),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(4),e.Q6J("parent",l.effect)("spell",l.spell)}}Qn.\u0275fac=function(u){return new(u||Qn)(e.Y36(ze.u))},Qn.\u0275cmp=e.Xpm({type:Qn,selectors:[["avr-text-effect"]],features:[e.qOj],decls:17,vars:4,consts:[["anchor","text"],[3,"value","valueChange","selectionChange"],["value","text"],["value","ref"],["aria-hidden","false","aria-label","Text type help","inline","",3,"matTooltip"],[4,"ngIf"],[1,"is-fullwidth"],["matInput","","placeholder","Description","rows","5",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","AnnotatedString - variables and functions allowed in braces"],[3,"value","selectionChange"],["placeholderLabel","Search","noEntriesFoundLabel","No matches found.","ngModel","",3,"ngModelChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Outputs a short amount of text in the result embed. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div")(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Text Type"),e.qZA(),e.TgZ(7,"mat-select",1),e.NdJ("valueChange",function(b){return l.textType=b})("selectionChange",function(){return l.changed.emit(),l.onTextTypeChange()}),e.TgZ(8,"mat-option",2),e._uU(9," Text "),e.qZA(),e.TgZ(10,"mat-option",3),e._uU(11," Ability Reference "),e.qZA()()(),e.TgZ(12,"span")(13,"mat-icon",4),e._uU(14," help "),e.qZA()()(),e.YNc(15,St,6,2,"div",5),e.YNc(16,si,8,2,"div",5)),2&u&&(e.xp6(7),e.Q6J("value",l.textType),e.xp6(6),e.Q6J("matTooltip",l.TEXT_TYPE_HELPS[l.textType]),e.xp6(2),e.Q6J("ngIf","text"===l.textType),e.xp6(1),e.Q6J("ngIf","ref"===l.textType))},directives:[ce,J.KE,J.hX,de.gD,Oe.ey,ie.Hw,Ce.gM,ye.O5,oe.Nt,k.Fj,k.JJ,k.On,J.R9,pn.nu,ye.sg,Oe.Nv],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Gn extends Se{constructor(){super()}ngOnInit(){}}Gn.\u0275fac=function(u){return new(u||Gn)},Gn.\u0275cmp=e.Xpm({type:Gn,selectors:[["avr-variable-effect"]],features:[e.qOj],decls:20,vars:4,consts:[["anchor","set-variable"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left baseline",1,"auto-row"],["fxFlex","1 3 auto"],["matInput","","placeholder","Name","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["fxFlex","3 1 auto"],["matInput","","placeholder","Value","required","",1,"text-monospace",3,"ngModel","change","ngModelChange"],["matSuffix","","matTooltip","IntExpression - variables and functions allowed, braces optional"],[1,"auto-label"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center",1,"auto-row"],["fxFlex","grow"],["matInput","","placeholder","Error Value",1,"text-monospace",3,"ngModel","change","ngModelChange"],[4,"ngIf"],["fxLayout","row","fxLayoutGap","4px","fxLayoutAlign","left center"],["fxFlex","",3,"parent","spell","changed"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," Saves the result of an IntExpression to a variable without displaying anything. "),e._UZ(2,"avr-autodoc-link",0),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"input",3),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.name=b}),e.qZA()(),e.TgZ(6,"span"),e._uU(7,"="),e.qZA(),e.TgZ(8,"mat-form-field",4)(9,"input",5),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.value=b}),e.qZA(),e.TgZ(10,"mat-icon",6),e._uU(11,"calculate "),e.qZA()()(),e.TgZ(12,"span",7),e._uU(13,"On Error"),e.qZA(),e.TgZ(14,"div",8)(15,"mat-form-field",9)(16,"input",10),e.NdJ("change",function(){return l.changed.emit()})("ngModelChange",function(b){return l.effect.onError=b}),e.qZA(),e.TgZ(17,"mat-icon",6),e._uU(18,"calculate "),e.qZA()()(),e.YNc(19,ai,5,2,"div",11)),2&u&&(e.xp6(5),e.Q6J("ngModel",l.effect.name),e.xp6(4),e.Q6J("ngModel",l.effect.value),e.xp6(7),e.Q6J("ngModel",l.effect.onError),e.xp6(3),e.Q6J("ngIf",null!=l.spell))},directives:[ce,ee.xw,ee.SQ,ee.Wh,J.KE,ee.yH,oe.Nt,k.Fj,k.Q7,k.JJ,k.On,ie.Hw,J.R9,Ce.gM,ye.O5,_t],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class lt{constructor(u,l,v,b){this.label=u,this.icon=l,this.tooltip=v,this._children=b,this.childrenSubject=new be.X(b)}get children(){return this._children}set children(u){this._children=u,this.childrenSubject.next(u)}}class Ni extends lt{constructor(u,l,v,b,H,ve,Te,tt){super(H,ve,Te,tt),this.effect=u,this.parentArray=l,this.ancestors=v,this.isInIEffect=b}}class li extends lt{constructor(u,l,v,b,H){super(l,v,b,H),this.meta=u}}class kr{constructor(u){this.ancestors=[],this.childrenBuilders={target(l){return this.effectsToNodes(l.effects)},attack(l){return[new lt("Hit",void 0,void 0,this.effectsToNodes(l.hit)),new lt("Miss",void 0,void 0,this.effectsToNodes(l.miss))]},save(l){return[new lt("Fail",void 0,void 0,this.effectsToNodes(l.fail)),new lt("Success",void 0,void 0,this.effectsToNodes(l.success))]},ieffect2(l){var v,b;const H=[];for(const ve of null!==(v=l.attacks)&&void 0!==v?v:[])H.push(this.ieffect2AttackNode(ve));for(const ve of null!==(b=l.buttons)&&void 0!==b?b:[])H.push(this.ieffect2ButtonNode(ve));return H},condition(l){return[new lt("On True",void 0,void 0,this.effectsToNodes(l.onTrue)),new lt("On False",void 0,void 0,this.effectsToNodes(l.onFalse))]},check(l){return null!=l.dc?[new lt("Success",void 0,void 0,this.effectsToNodes(l.success)),new lt("Fail",void 0,void 0,this.effectsToNodes(l.fail))]:null!=l.contestAbility?[new lt("Target Wins",void 0,void 0,this.effectsToNodes(l.success)),new lt("Caster Wins",void 0,void 0,this.effectsToNodes(l.fail))]:[]}},this.isSpell=u,this.effectTreeNodeMap=new WeakMap}effectsToNodes(u){let l=[];for(const v of u)l.push(this.effectToNode(v,u));return l.push(new li({ancestors:this.ancestors,parentArray:u,isSpell:this.isSpell,isIEffect:this.isIEffect},"Add Effect")),l}effectToNode(u,l){var v,b,H,ve;const Te=this.effectTreeNodeMap.get(u),tt=Li[u.type];let Rt,je;if(void 0===tt)Rt=new Ni(u,l,this.ancestors,this.isIEffect,"Unknown Node","help_outline","This node is not yet supported by the web builder.");else{const nt=this.ancestors;this.ancestors=[...this.ancestors,u],je=null===(v=this.childrenBuilders[u.type])||void 0===v?void 0:v.call(this,u),this.ancestors=nt,Rt=new Ni(u,l,this.ancestors,this.isIEffect,tt.label||u.type,tt.icon,tt.tooltip,je)}if(Te){if("target"===u.type)Te.children=je;else if((null===(b=Te.children)||void 0===b?void 0:b.length)===(null==je?void 0:je.length))for(let nt=0;null!==(ve=nt<(null===(H=Te.children)||void 0===H?void 0:H.length))&&void 0!==ve&&ve;nt++)Te.children[nt].label=je[nt].label,Te.children[nt].icon=je[nt].icon,Te.children[nt].tooltip=je[nt].tooltip,Te.children[nt].children=je[nt].children;else Te.children=je;return Te}return this.effectTreeNodeMap.set(u,Rt),Rt}ieffect2AttackNode(u){return this.ieffect2Node(u,`Action: ${u.attack.name}`,u.attack.automation,void 0,"Edit the parent Initiative Effect node to edit this attack!")}ieffect2ButtonNode(u){return this.ieffect2Node(u,`Button: ${u.label}`,u.automation,void 0,"Edit the parent Initiative Effect node to edit this button!")}ieffect2Node(u,l,v,b,H){const ve=this.ancestors,Te=this.isIEffect;this.ancestors=[],this.isIEffect=!0;const tt=this.effectsToNodes(v);return this.ancestors=ve,this.isIEffect=Te,new lt(l,b,H,tt)}}const Li={target:{label:"Target",icon:"my_location",component:At},attack:{label:"Attack Roll",icon:"ddb:melee-attack",component:dt},save:{label:"Saving Throw",icon:"ddb:resistant",component:w},damage:{label:"Damage",icon:"ddb:force",component:Qe},temphp:{label:"Temp HP",icon:"ddb:healing",component:$n},ieffect:{label:"Initiative Effect (Legacy)",icon:"extension",component:Sn},ieffect2:{label:"Initiative Effect",icon:"extension",component:On},remove_ieffect:{label:"Remove Initiative Effect",icon:"extension_off",component:$e},roll:{label:"Roll",icon:"ddb:digital-dice",component:L},text:{label:"Text",icon:"chat",component:Qn},variable:{label:"Set Variable",icon:"code",component:Gn},condition:{label:"Branch",icon:"call_split",component:xn},counter:{label:"Use Counter",icon:"looks_one",component:Tt},spell:{label:"Cast Spell",icon:"ddb:spells",component:N},check:{label:"Ability Check",icon:"beenhere",component:le}};var Ki=j(2796);function ci(C,u){if(1&C&&e._UZ(0,"mat-icon",8),2&C){const l=e.oxw().$implicit,v=e.oxw(2);e.Q6J("svgIcon",v.getRuleIcon(l))}}function vi(C,u){if(1&C&&(e.TgZ(0,"mat-icon"),e._uU(1),e.qZA()),2&C){const l=e.oxw().$implicit,v=e.oxw(2);e.xp6(1),e.Oqu(v.getRuleIcon(l))}}function Zi(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const H=e.CHM(l).$implicit;return e.oxw(2).addEffect(H.id)}),e.YNc(1,ci,1,1,"mat-icon",6),e.YNc(2,vi,2,1,"mat-icon",7),e.TgZ(3,"span"),e._uU(4),e.qZA()()}if(2&C){const l=u.$implicit,v=e.oxw(2);e.xp6(1),e.Q6J("ngIf",v.getRuleIcon(l)&&v.getRuleIcon(l).includes("ddb:")),e.xp6(1),e.Q6J("ngIf",v.getRuleIcon(l)&&!v.getRuleIcon(l).includes("ddb:")),e.xp6(2),e.Oqu(v.getRuleLabel(l))}}function Nr(C,u){if(1&C&&(e.TgZ(0,"div")(1,"button",3)(2,"strong"),e._uU(3),e.qZA()(),e.YNc(4,Zi,5,3,"button",4),e.qZA()),2&C){const l=u.$implicit;e.xp6(3),e.Oqu(l[0]),e.xp6(1),e.Q6J("ngForOf",l[1])}}function Wn(C){return u=>u.ancestors.some(l=>l.type===C)}function Yi(C){return u=>!Wn(C)(u)}const Lr=[{id:"target",rules:[Yi("target")]},{id:"attack",rules:[Wn("target")]},{id:"save",rules:[Wn("target")]},{id:"damage",rules:[Wn("target")]},{id:"temphp",rules:[Wn("target")]},{id:"ieffect2",rules:[Wn("target")]},{id:"remove_ieffect",rules:[C=>C.isIEffect]},{id:"roll",rules:[]},{id:"text",rules:[]},{id:"variable",rules:[]},{id:"condition",rules:[]},{id:"counter",rules:[]},{id:"spell",rules:[C=>0===C.ancestors.length,C=>!C.isSpell]},{id:"check",rules:[Wn("target")]},{id:"preset_atk_dmg",label:"Attack and Damage",group:"Presets",rules:[Yi("target")]},{id:"preset_save_half",label:"Save for Half",group:"Presets",rules:[Yi("target")]}];class zt{constructor(){this.created=new e.vpe}ngOnInit(){const u=Lr.filter(l=>l.rules.every(v=>v(this.meta)));this.satisfiedRules=Object.entries((0,Dt.groupBy)(u,l=>{var v;return null!==(v=l.group)&&void 0!==v?v:"Effects"}))}getRuleIcon(u){var l,v,b;return null!==(b=null!==(l=u.icon)&&void 0!==l?l:null===(v=Li[u.id])||void 0===v?void 0:v.icon)&&void 0!==b?b:null}getRuleLabel(u){var l,v,b;return null!==(b=null!==(l=u.label)&&void 0!==l?l:null===(v=Li[u.id])||void 0===v?void 0:v.label)&&void 0!==b?b:u.id}addEffect(u){let l;switch(u){case"target":l={type:"target",target:"self",effects:[]};break;case"attack":l={type:"attack",hit:[],miss:[]};break;case"save":l={type:"save",stat:"dex",fail:[],success:[]};break;case"damage":l={type:"damage",damage:""};break;case"temphp":l={type:"temphp",amount:""};break;case"ieffect2":l={type:"ieffect2",name:""};break;case"remove_ieffect":l={type:"remove_ieffect"};break;case"roll":l={type:"roll",dice:"",name:""};break;case"text":l={type:"text",text:""};break;case"variable":l={type:"variable",name:"",value:""};break;case"condition":l={type:"condition",condition:"",onTrue:[],onFalse:[]};break;case"counter":l={type:"counter",counter:"",amount:""};break;case"spell":l={type:"spell",id:2102};break;case"check":l={type:"check",ability:"athletics"};break;case"preset_atk_dmg":l=this.generateAttackAndDamagePreset();break;case"preset_save_half":return void this.doSaveForHalfPreset();default:return void console.error(`Unknown effect type to add: "${u}"`)}this.newEffect(l),this.created.emit()}newEffect(u){this.meta.parentArray.push(u)}generateAttackAndDamagePreset(){return{type:"target",target:"each",effects:[{type:"attack",hit:[{type:"damage",damage:"1d10[fire]"}],miss:[]}]}}doSaveForHalfPreset(){this.meta.parentArray.push({type:"roll",dice:"8d6[fire]",name:"damage"},{type:"target",target:"all",effects:[{type:"save",stat:"dex",fail:[{type:"damage",damage:"{damage}"}],success:[{type:"damage",damage:"({damage}/2)"}]}]}),this.created.emit()}}zt.\u0275fac=function(u){return new(u||zt)},zt.\u0275cmp=e.Xpm({type:zt,selectors:[["avr-new-effect-button"]],inputs:{meta:"meta"},outputs:{created:"created"},decls:6,vars:2,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","","disabled",""],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[3,"svgIcon",4,"ngIf"],[4,"ngIf"],[3,"svgIcon"]],template:function(u,l){if(1&u&&(e.TgZ(0,"button",0)(1,"mat-icon"),e._uU(2,"add"),e.qZA()(),e.TgZ(3,"mat-menu",null,1),e.YNc(5,Nr,5,2,"div",2),e.qZA()),2&u){const v=e.MAs(4);e.Q6J("matMenuTriggerFor",v),e.xp6(5),e.Q6J("ngForOf",l.satisfiedRules)}},directives:[kt.lW,Ki.p6,ie.Hw,Ki.VK,ye.sg,Ki.OP,ye.O5],styles:[".ignore-theme{color:#fff}.editor-container{display:grid;grid-template-columns:auto 1fr;background:#182026;border-radius:4px;min-height:55vh}.editor-container>div{max-height:calc(100vh - 112px);overflow:scroll}.automation-tree{border-right:1px solid rgba(115,134,148,.3);padding:6px}.tree-invisible{display:none}.tree-node{display:block;margin-top:4px}.tree-node-active{background:rgba(112,119,229,.2);border-radius:2px}.tree-children-container{padding-left:12px;border-left:1px solid #738694}.automation-tree button[mat-icon-button]{font-size:20px;line-height:24px;width:24px;height:24px}.node-icon{font-size:16px;color:#738694}.node-editor{padding:6px}\n"],encapsulation:2});var yi=j(8595),fi=j(6269);function Ri(C,u){if(1&C&&(e.TgZ(0,"pre",6),e._uU(1),e.qZA()),2&C){const l=e.oxw(2);e.xp6(1),e.Oqu(l.error)}}function gr(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"p"),e._uU(2," Good luck! Click the button below once you've edited the YAML to update the effect. "),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return e.CHM(l),e.oxw().updateEffectData()}),e._uU(4,"Update Effect Data"),e.qZA(),e.YNc(5,Ri,2,1,"pre",3),e.TgZ(6,"mat-form-field",4)(7,"textarea",5),e.NdJ("ngModelChange",function(b){e.CHM(l);return e.oxw().editedYaml=b}),e._uU(8,"    "),e.qZA()()()}if(2&C){const l=e.oxw();e.xp6(5),e.Q6J("ngIf",l.error),e.xp6(2),e.Q6J("ngModel",l.editedYaml)}}class Kn extends Se{constructor(){super(),this.userKnowsWhatTheyreDoing=!1}ngOnInit(){this.editedYaml=(0,fi.Pz)(this.effect)}updateEffectData(){let u;this.error=null;try{u=(0,fi.Qc)(this.editedYaml)}catch(v){return void(this.error=`Could not parse YAML: ${v}`)}const l=this.effectNode.parentArray.indexOf(this.effectNode.effect);this.effectNode.parentArray[l]=u,this.changed.emit(),this.treeChanged.emit(),this.deleted.emit()}}Kn.\u0275fac=function(u){return new(u||Kn)},Kn.\u0275cmp=e.Xpm({type:Kn,selectors:[["avr-unknown-effect"]],features:[e.qOj],decls:10,vars:2,consts:[[3,"ngModel","ngModelChange"],[4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["class","mat-error",4,"ngIf"],[1,"is-fullwidth","text-monospace"],["matInput","","rows","5",3,"ngModel","ngModelChange"],[1,"mat-error"]],template:function(u,l){1&u&&(e.TgZ(0,"p"),e._uU(1," This effect has not yet been implemented in the Automation Editor. Sorry about that!\n"),e.qZA(),e.TgZ(2,"p"),e._uU(3," If you know what you're doing, you can check below to edit this effect's YAML directly. "),e.TgZ(4,"em"),e._uU(5,"This can lead to automation corruption. Here be dragons."),e.qZA()(),e.TgZ(6,"p")(7,"mat-checkbox",0),e.NdJ("ngModelChange",function(b){return l.userKnowsWhatTheyreDoing=b}),e._uU(8,"I know what I'm doing"),e.qZA()(),e.YNc(9,gr,9,2,"div",1)),2&u&&(e.xp6(7),e.Q6J("ngModel",l.userKnowsWhatTheyreDoing),e.xp6(2),e.Q6J("ngIf",l.userKnowsWhatTheyreDoing))},directives:[Le.oG,k.JJ,k.On,ye.O5,kt.lW,J.KE,oe.Nt,k.Fj],styles:[".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});var Yn=j(9975);function ji(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(l),e.oxw().moveUp()}),e.TgZ(1,"mat-icon",9),e._uU(2,"arrow_upward"),e.qZA()()}}function _r(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(l),e.oxw().moveDown()}),e.TgZ(1,"mat-icon",11),e._uU(2,"arrow_downward"),e.qZA()()}}function Vi(C,u){}function mr(C,u){if(1&C&&(e.TgZ(0,"div"),e._UZ(1,"mat-divider"),e.TgZ(2,"span",12),e._uU(3,"Debug Information"),e.qZA(),e._UZ(4,"pre",13),e.qZA()),2&C){const l=e.oxw();e.xp6(4),e.Q6J("innerHTML",l.effectYAML,e.oJD)}}class Mn{constructor(u){this.viewContainerRef=u}}Mn.\u0275fac=function(u){return new(u||Mn)(e.Y36(e.s_b))},Mn.\u0275dir=e.lG2({type:Mn,selectors:[["","effectHost",""]]});class Ci{constructor(){this.debugMode=!1,this.changed=new e.vpe,this.treeChanged=new e.vpe,this.deleted=new e.vpe}get isFirst(){return 0===this.effectNode.parentArray.indexOf(this.effectNode.effect)}get isLast(){return this.effectNode.parentArray.indexOf(this.effectNode.effect)===this.effectNode.parentArray.length-1}ngOnInit(){this.loadComponent()}ngOnChanges(u){this.loadComponent()}loadComponent(){var u,l;const v=null!==(l=null===(u=Li[this.effectNode.effect.type])||void 0===u?void 0:u.component)&&void 0!==l?l:Kn,b=this.effectEditorDirective.viewContainerRef;b.clear();const H=b.createComponent(v);H.instance.effectNode=this.effectNode,H.instance.spell=this.spell,H.instance.changed.subscribe(()=>{this.changed.emit()}),H.instance.treeChanged.subscribe(()=>{this.treeChanged.emit()}),H.instance.deleted.subscribe(()=>{this.deleted.emit()})}moveUp(){const u=this.effectNode.parentArray.indexOf(this.effectNode.effect),l=u-1;l>-1&&((0,yi.bA)(this.effectNode.parentArray,u,l),this.changed.emit(),this.treeChanged.emit())}moveDown(){const u=this.effectNode.parentArray.indexOf(this.effectNode.effect),l=u+1;l<this.effectNode.parentArray.length&&((0,yi.bA)(this.effectNode.parentArray,u,l),this.changed.emit(),this.treeChanged.emit())}delete(){const u=this.effectNode.parentArray.indexOf(this.effectNode.effect);u>-1&&(this.effectNode.parentArray.splice(u,1),this.changed.emit(),this.treeChanged.emit(),this.deleted.emit())}get effectYAML(){return(0,fi.Pz)(this.effectNode.effect)}}function vr(C,u){if(1&C&&e._UZ(0,"mat-icon",18),2&C){const l=e.oxw(2).$implicit;e.Q6J("svgIcon",l.icon)}}function zi(C,u){if(1&C&&(e.TgZ(0,"mat-icon",19),e._uU(1),e.qZA()),2&C){const l=e.oxw(2).$implicit;e.xp6(1),e.Oqu(l.icon)}}function jn(C,u){if(1&C&&(e.TgZ(0,"span")(1,"button",15),e.YNc(2,vr,1,1,"mat-icon",16),e.YNc(3,zi,2,1,"mat-icon",17),e.qZA()()),2&C){const l=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",l.icon.includes("ddb:")),e.xp6(1),e.Q6J("ngIf",!l.icon.includes("ddb:"))}}function Pn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"button",20),e.NdJ("click",function(){e.CHM(l);const b=e.oxw().$implicit;return e.oxw().beginEditEffectNode(b)}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()()()}}function Vn(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"avr-new-effect-button",21),e.NdJ("created",function(){e.CHM(l);const b=e.oxw().$implicit;return e.oxw().onNewEffectCreated(b)}),e.qZA()()}if(2&C){const l=e.oxw().$implicit;e.xp6(1),e.Q6J("meta",l.meta)}}function Xi(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"span")(1,"button",20),e.NdJ("click",function(b){e.CHM(l);const H=e.oxw().$implicit;return e.oxw().toggleNode(H,b)}),e.TgZ(2,"mat-icon"),e._uU(3),e.qZA()()()}if(2&C){const l=e.oxw().$implicit,v=e.oxw();e.xp6(3),e.hij(" ",v.treeControl.isExpanded(l)?"expand_more":"chevron_right"," ")}}function bi(C,u){if(1&C&&(e.TgZ(0,"cdk-nested-tree-node",11)(1,"span",12),e.YNc(2,jn,4,2,"span",10),e._uU(3),e.YNc(4,Pn,4,0,"span",10),e.YNc(5,Vn,2,1,"span",10),e.qZA(),e.YNc(6,Xi,4,1,"span",10),e.TgZ(7,"div",13),e.GkF(8,14),e.qZA()()),2&C){const l=u.$implicit,v=e.oxw();e.ekj("tree-node-active",l===v.selectedEffectNode),e.xp6(1),e.Q6J("matTooltip",l.tooltip),e.xp6(1),e.Q6J("ngIf",l.icon),e.xp6(1),e.hij(" ",l.label," "),e.xp6(1),e.Q6J("ngIf",v.isEffectNode(l)),e.xp6(1),e.Q6J("ngIf",v.isAddEffectNode(l)),e.xp6(1),e.Q6J("ngIf",v.hasChild(l)),e.xp6(1),e.ekj("tree-invisible",!v.treeControl.isExpanded(l))}}function yr(C,u){1&C&&(e.TgZ(0,"div")(1,"div",2)(2,"span",3),e._uU(3,"Node Editor"),e.qZA()(),e._uU(4," No node selected. Select an automation effect node from the Effect Tree to edit it! "),e.qZA())}function er(C,u){if(1&C){const l=e.EpF();e.TgZ(0,"div")(1,"avr-effect-editor",22),e.NdJ("changed",function(){return e.CHM(l),e.oxw().changed.emit()})("treeChanged",function(){return e.CHM(l),e.oxw().refreshTree()})("deleted",function(){e.CHM(l);return e.oxw().selectedEffectNode=null}),e.qZA()()}if(2&C){const l=e.oxw();e.xp6(1),e.Q6J("effectNode",l.selectedEffectNode)("spell",l.spell)("debugMode",l.debugMode)}}Ci.\u0275fac=function(u){return new(u||Ci)},Ci.\u0275cmp=e.Xpm({type:Ci,selectors:[["avr-effect-editor"]],viewQuery:function(u,l){if(1&u&&e.Gf(Mn,7),2&u){let v;e.iGM(v=e.CRH())&&(l.effectEditorDirective=v.first)}},inputs:{effectNode:"effectNode",spell:"spell",debugMode:"debugMode"},outputs:{changed:"changed",treeChanged:"treeChanged",deleted:"deleted"},features:[e.TTD],decls:10,vars:4,consts:[[1,"editor-header"],[1,"editor-header-text"],[1,"toolbar-spacer"],["mat-icon-button","","matTooltip","Move Up",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Move Down",3,"click",4,"ngIf"],[3,"delete"],["effectHost",""],[4,"ngIf"],["mat-icon-button","","matTooltip","Move Up",3,"click"],["aria-label","Move Up"],["mat-icon-button","","matTooltip","Move Down",3,"click"],["aria-label","Move Down"],[1,"auto-label"],[1,"text-monospace",3,"innerHTML"]],template:function(u,l){1&u&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.qZA(),e._UZ(3,"span",2),e.TgZ(4,"span"),e.YNc(5,ji,3,0,"button",3),e.YNc(6,_r,3,0,"button",4),e.TgZ(7,"avr-doubleclick-delete-button",5),e.NdJ("delete",function(){return l.delete()}),e.qZA()()(),e.YNc(8,Vi,0,0,"ng-template",6),e.YNc(9,mr,5,1,"div",7)),2&u&&(e.xp6(2),e.hij(" ",l.effectNode.label," "),e.xp6(3),e.Q6J("ngIf",!l.isFirst),e.xp6(1),e.Q6J("ngIf",!l.isLast),e.xp6(3),e.Q6J("ngIf",l.debugMode))},directives:[ye.O5,kt.lW,Ce.gM,ie.Hw,We,Mn,Yn.d],styles:[".is-italics[_ngcontent-%COMP%]{font-style:italic}\n/*# sourceMappingURL=effect-editor.component.css.map*/",".editor-header[_ngcontent-%COMP%]{display:flex;padding-bottom:6px;border-bottom:1px solid rgba(115,134,148,.3)}.editor-header[_ngcontent-%COMP%]   .editor-header-text[_ngcontent-%COMP%]{font-weight:700;margin-right:8px}.editor-header[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.editor-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{font-size:20px;line-height:24px;width:24px;height:24px}",".hidden[_ngcontent-%COMP%]{visibility:hidden}.is-fullwidth[_ngcontent-%COMP%]{width:100%}.text-monospace[_ngcontent-%COMP%]{font-family:Source Code Pro,monospace}.auto-label[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;opacity:.7}@media (max-width: 700px){.auto-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;justify-content:space-around}.auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .auto-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}}"]});class Xt{constructor(){this.debugMode=!1,this.changed=new e.vpe,this.treeControl=new U.VY(u=>u.childrenSubject),this.dataSource=new K.WX,this.hasChild=u=>!!u.children&&u.children.length>0,this.isEffectNode=u=>u instanceof Ni,this.isAddEffectNode=u=>u instanceof li}ngOnInit(){this.nodeBuilder=new kr(!!this.spell),this.refreshTree()}ngOnChanges(u){this.refreshTree()}onNewEffectCreated(u){var l;this.refreshTree(),this.changed.emit();const v=u.meta.parentArray[u.meta.parentArray.length-1];this.selectedEffectNode=null!==(l=this.nodeBuilder.effectTreeNodeMap.get(v))&&void 0!==l?l:this.selectedEffectNode}refreshTree(){var u;this.dataSource.data=null===(u=this.nodeBuilder)||void 0===u?void 0:u.effectsToNodes(this.automation),this.treeControl.dataNodes=this.dataSource.data}toggleNode(u,l){l.metaKey||l.ctrlKey?this.treeControl.toggleDescendants(u):this.treeControl.toggle(u)}beginEditEffectNode(u){this.selectedEffectNode=u}}Xt.\u0275fac=function(u){return new(u||Xt)},Xt.\u0275cmp=e.Xpm({type:Xt,selectors:[["avr-automation-editor"]],inputs:{automation:"automation",spell:"spell",debugMode:"debugMode"},outputs:{changed:"changed"},features:[e.TTD],decls:18,vars:4,consts:[[1,"editor-container","ignore-theme"],[1,"automation-tree"],[1,"editor-header"],[1,"editor-header-text"],[1,"toolbar-spacer"],["mat-icon-button","","matTooltip","Expand All",3,"click"],["mat-icon-button","","matTooltip","Collapse All",3,"click"],[3,"dataSource","treeControl"],["class","tree-node",3,"tree-node-active",4,"cdkTreeNodeDef"],[1,"node-editor"],[4,"ngIf"],[1,"tree-node"],[3,"matTooltip"],[1,"tree-children-container"],["cdkTreeNodeOutlet",""],["mat-icon-button","","disabled",""],["class","node-icon",3,"svgIcon",4,"ngIf"],["class","node-icon",4,"ngIf"],[1,"node-icon",3,"svgIcon"],[1,"node-icon"],["mat-icon-button","",3,"click"],[3,"meta","created"],[3,"effectNode","spell","debugMode","changed","treeChanged","deleted"]],template:function(u,l){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"Effect Tree"),e.qZA(),e._UZ(5,"span",4),e.TgZ(6,"span")(7,"button",5),e.NdJ("click",function(){return l.treeControl.expandAll()}),e.TgZ(8,"mat-icon"),e._uU(9,"expand"),e.qZA()(),e.TgZ(10,"button",6),e.NdJ("click",function(){return l.treeControl.collapseAll()}),e.TgZ(11,"mat-icon"),e._uU(12,"compress"),e.qZA()()()(),e.TgZ(13,"cdk-tree",7),e.YNc(14,bi,9,10,"cdk-nested-tree-node",8),e.qZA()(),e.TgZ(15,"div",9),e.YNc(16,yr,5,0,"div",10),e.YNc(17,er,2,3,"div",10),e.qZA()()),2&u&&(e.xp6(13),e.Q6J("dataSource",l.dataSource)("treeControl",l.treeControl),e.xp6(3),e.Q6J("ngIf",!l.selectedEffectNode),e.xp6(1),e.Q6J("ngIf",l.selectedEffectNode))},directives:[kt.lW,Ce.gM,ie.Hw,U._0,U.rO,U.Xx,ye.O5,zt,U.cu,Ci],styles:[".ignore-theme[_ngcontent-%COMP%]{color:#fff}.editor-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;background:#182026;border-radius:4px;min-height:55vh}.editor-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:calc(100vh - 112px);overflow:scroll}.automation-tree[_ngcontent-%COMP%]{border-right:1px solid rgba(115,134,148,.3);padding:6px}.tree-invisible[_ngcontent-%COMP%]{display:none}.tree-node[_ngcontent-%COMP%]{display:block;margin-top:4px}.tree-node-active[_ngcontent-%COMP%]{background:rgba(112,119,229,.2);border-radius:2px}.tree-children-container[_ngcontent-%COMP%]{padding-left:12px;border-left:1px solid #738694}.automation-tree[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{font-size:20px;line-height:24px;width:24px;height:24px}.node-icon[_ngcontent-%COMP%]{font-size:16px;color:#738694}.node-editor[_ngcontent-%COMP%]{padding:6px}",".editor-header[_ngcontent-%COMP%]{display:flex;padding-bottom:6px;border-bottom:1px solid rgba(115,134,148,.3)}.editor-header[_ngcontent-%COMP%]   .editor-header-text[_ngcontent-%COMP%]{font-weight:700;margin-right:8px}.editor-header[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.editor-header[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{font-size:20px;line-height:24px;width:24px;height:24px}"]})},4936:(dn,Pt,j)=>{"use strict";j.d(Pt,{m:()=>Le});var U=j(5758),e=j(6269),K=j(3184),be=j(4770),Se=j(4683),ce=j(7317),ee=j(89),ye=j(5590);class Le{constructor(k){this.data=k,this.jsonOrYaml="JSON",k.yaml?(this.jsonOrYaml="YAML",this.jsonData=(0,e.Pz)(this.data.data)):(this.jsonOrYaml="JSON",this.jsonData=JSON.stringify(this.data.data))}ngOnInit(){}copy(k){k.select(),document.execCommand("copy"),k.setSelectionRange(0,0)}}Le.\u0275fac=function(k){return new(k||Le)(K.Y36(U.WI))},Le.\u0275cmp=K.Xpm({type:Le,selectors:[["avr-json-export-dialog"]],decls:13,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"form-container"],[1,"text-monospace"],["matInput","","readonly","","rows","10",3,"value","placeholder"],["jsonElem",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Copy","matTooltip","Copy to clipboard",3,"click"],["mat-button","","mat-dialog-close",""]],template:function(k,J){if(1&k){const oe=K.EpF();K.TgZ(0,"h2",0),K._uU(1),K.qZA(),K.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"mat-form-field",3),K._UZ(5,"textarea",4,5),K.TgZ(7,"button",6),K.NdJ("click",function(){K.CHM(oe);const de=K.MAs(6);return J.copy(de)}),K.TgZ(8,"mat-icon"),K._uU(9,"file_copy"),K.qZA()()()()(),K.TgZ(10,"mat-dialog-actions")(11,"button",7),K._uU(12,"Done"),K.qZA()()}2&k&&(K.xp6(1),K.AsE("",J.jsonOrYaml," - ",J.data.name,""),K.xp6(4),K.Q6J("value",J.jsonData)("placeholder",J.jsonOrYaml))},directives:[U.uh,U.xY,be.KE,Se.Nt,ce.lW,be.R9,ee.gM,ye.Hw,U.H8,U.ZT],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}\n/*# sourceMappingURL=json-export-dialog.component.css.map*/"]})},3538:(dn,Pt,j)=>{"use strict";j.d(Pt,{Q:()=>J});var U=j(5758),e=j(6269),K=j(3184),be=j(4770),Se=j(4683),ce=j(587),ee=j(6362),ye=j(7317),Le=j(4742);function Ce(oe,ie){if(1&oe&&(K.TgZ(0,"mat-error"),K._UZ(1,"div",10),K.qZA()),2&oe){const de=K.oxw();K.xp6(1),K.Q6J("innerHTML",de.error,K.oJD)}}function k(oe,ie){1&oe&&K._UZ(0,"mat-spinner",11),2&oe&&K.Q6J("diameter",18)}class J{constructor(ie,de){this.dialogRef=ie,this.input=de,this.loading=!1,this.jsonOrYaml="JSON"}ngOnInit(){this.jsonOrYaml=this.input.yaml?"YAML":"JSON"}validateAndExit(){let ie;this.loading=!0,this.error=null;try{ie=this.input.yaml?(0,e.Qc)(this.data):JSON.parse(this.data)}catch(de){return this.error="Invalid data format",void(this.loading=!1)}this.input.validator?this.input.validator(ie):this.dialogRef.close(ie)}}J.\u0275fac=function(ie){return new(ie||J)(K.Y36(U.so),K.Y36(U.WI))},J.\u0275cmp=K.Xpm({type:J,selectors:[["avr-json-import-dialog"]],decls:20,vars:6,consts:[["mat-dialog-title",""],[1,"mat-typography",3,"keydown.control.enter","keydown.meta.enter"],[1,"mat-small"],[1,"form-container"],[1,"text-monospace"],["matInput","","rows","10",3,"placeholder","ngModel","ngModelChange"],[4,"ngIf"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"click"],[3,"diameter",4,"ngIf"],[3,"innerHTML"],[3,"diameter"]],template:function(ie,de){1&ie&&(K.TgZ(0,"h2",0),K._uU(1),K.qZA(),K.TgZ(2,"mat-dialog-content",1),K.NdJ("keydown.control.enter",function(){return de.validateAndExit()})("keydown.meta.enter",function(){return de.validateAndExit()}),K.TgZ(3,"p"),K._uU(4),K.qZA(),K.TgZ(5,"span",2),K._uU(6,"You can use "),K.TgZ(7,"kbd"),K._uU(8,"Ctrl-Enter"),K.qZA(),K._uU(9," to save changes."),K.qZA(),K.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"textarea",5),K.NdJ("ngModelChange",function(ut){return de.data=ut}),K.qZA()()(),K.YNc(13,Ce,2,1,"mat-error",6),K.qZA(),K.TgZ(14,"mat-dialog-actions")(15,"button",7),K._uU(16,"Cancel"),K.qZA(),K.TgZ(17,"button",8),K.NdJ("click",function(){return de.validateAndExit()}),K._uU(18," Import "),K.qZA(),K.YNc(19,k,1,1,"mat-spinner",9),K.qZA()),2&ie&&(K.xp6(1),K.hij("Importing from ",de.jsonOrYaml,"..."),K.xp6(3),K.hij(" Paste your ",de.jsonOrYaml," here. This should be either an object or list exported from this site. "),K.xp6(8),K.Q6J("placeholder",de.jsonOrYaml)("ngModel",de.data),K.xp6(1),K.Q6J("ngIf",de.error),K.xp6(6),K.Q6J("ngIf",de.loading))},directives:[U.uh,U.xY,be.KE,Se.Nt,ce.Fj,ce.JJ,ce.On,ee.O5,be.TO,U.H8,ye.lW,U.ZT,Le.Ou],styles:[".form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}  .validation-error-header,   .validation-error-list{margin:0}  .validation-error-item{margin:12px 0 0!important}\n/*# sourceMappingURL=json-import-dialog.component.css.map*/"]})},7963:(dn,Pt,j)=>{"use strict";j.d(Pt,{u:()=>Ce});var U=j(4139),e=j(6942),K=j(4043),be=j(7418),Se=j(4766),ce=j(6488),ee=j(3184),ye=j(8784);const Le=`${Se.N.apiURL}/gamedata`;class Ce{constructor(J){this.http=J}getEntitlements(){if(this.entitlements)return this.entitlements;const J=this.http.get(`${Le}/entitlements`,(0,ce.vC)()).pipe((0,e.U)(oe=>(oe.success&&(oe.data=new Map(Object.entries(oe.data))),oe))).pipe((0,K.B)()).pipe((0,be.K)(ce.Vm));return this.entitlements=J,J.subscribe(oe=>this.entitlements=(0,U.of)(oe)),J}getAllEntitlements(){if(this.allEntitlements)return this.allEntitlements;const J=this.http.get(`${Le}/entitlements?free=true`,(0,ce.vC)()).pipe((0,e.U)(oe=>(oe.success&&(oe.data=new Map(Object.entries(oe.data))),oe))).pipe((0,K.B)()).pipe((0,be.K)(ce.Vm));return this.allEntitlements=J,J.subscribe(oe=>this.allEntitlements=(0,U.of)(oe)),J}getLimitedUse(){if(this.limitedUse)return this.limitedUse;const J=this.http.get(`${Le}/limiteduse`,(0,ce.vC)()).pipe((0,K.B)()).pipe((0,be.K)(ce.Vm));return this.limitedUse=J,J.subscribe(oe=>this.limitedUse=(0,U.of)(oe)),J}getDescribableEntities(){if(this.describableEntities)return this.describableEntities;const J=this.http.get(`${Le}/describable`,(0,ce.vC)()).pipe((0,K.B)()).pipe((0,be.K)(ce.Vm));return this.describableEntities=J,J.subscribe(oe=>this.describableEntities=(0,U.of)(oe)),J}entityFromEntitlement(J,oe,ie=!1){return(ie?this.getAllEntitlements():this.getEntitlements()).pipe((0,e.U)(Oe=>{if(Oe.success){const ut=Oe.data.get(`${J}-${oe.toString()}`);if(ut)return ut}return null}))}}Ce.\u0275fac=function(J){return new(J||Ce)(ee.LFG(ye.eN))},Ce.\u0275prov=ee.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})},2938:function(dn,Pt,j){var U;dn=j.nmd(dn),function(){var e,ce="Expected a function",ye="__lodash_hash_undefined__",Ce="__lodash_placeholder__",ht=128,Yt=1/0,le=9007199254740991,ze=4294967295,qn=[["ary",ht],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Bt="[object Arguments]",En="[object Array]",Tt="[object Boolean]",Xe="[object Date]",Nt="[object Error]",Fn="[object Function]",Lt="[object GeneratorFunction]",gt="[object Map]",_t="[object Number]",Qe="[object Object]",ni="[object Promise]",et="[object RegExp]",Re="[object Set]",mt="[object String]",Jt="[object Symbol]",Ke="[object WeakMap]",We="[object ArrayBuffer]",jt="[object DataView]",Jn="[object Float32Array]",Vt="[object Float64Array]",ii="[object Int8Array]",ri="[object Int16Array]",ot="[object Int32Array]",Hn="[object Uint8Array]",vt="[object Uint8ClampedArray]",Zt="[object Uint16Array]",Ye="[object Uint32Array]",Di=/\b__p \+= '';/g,Ht=/\b(__p \+=) '' \+/g,gn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,st=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,$e=RegExp(st.source),sn=RegExp(On.source),L=/<%-([\s\S]+?)%>/g,d=/<%([\s\S]+?)%>/g,_=/<%=([\s\S]+?)%>/g,w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(N.source),te=/^\s+/,pe=/\s/,ke=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,Et=/,? & /,At=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yt=/[()=,{}\[\]\/\s]/,$n=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ki=/\w*$/,oi=/^[-+]0x[0-9a-f]+$/i,si=/^0b[01]+$/i,mi=/^\[object .+?Constructor\]$/,Qn=/^0o[0-7]+$/i,ai=/^(?:0|[1-9]\d*)$/,Gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,Ni=/['\n\r\u2028\u2029\\]/g,li="\\ud800-\\udfff",ci="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",vi="\\u2700-\\u27bf",Zi="a-z\\xdf-\\xf6\\xf8-\\xff",zt="A-Z\\xc0-\\xd6\\xd8-\\xde",yi="\\ufe0e\\ufe0f",fi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ri="['\u2019]",gr="["+li+"]",Kn="["+fi+"]",Yn="["+ci+"]",ji="\\d+",_r="["+vi+"]",Vi="["+Zi+"]",mr="[^"+li+fi+ji+vi+Zi+zt+"]",Mn="\\ud83c[\\udffb-\\udfff]",vr="[^"+li+"]",zi="(?:\\ud83c[\\udde6-\\uddff]){2}",jn="[\\ud800-\\udbff][\\udc00-\\udfff]",Pn="["+zt+"]",Xi="(?:"+Vi+"|"+mr+")",bi="(?:"+Pn+"|"+mr+")",yr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",er="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xt="(?:"+Yn+"|"+Mn+")"+"?",C="["+yi+"]?",b=C+Xt+("(?:\\u200d(?:"+[vr,zi,jn].join("|")+")"+C+Xt+")*"),H="(?:"+[_r,zi,jn].join("|")+")"+b,ve="(?:"+[vr+Yn+"?",Yn,zi,jn,gr].join("|")+")",Te=RegExp(Ri,"g"),tt=RegExp(Yn,"g"),Rt=RegExp(Mn+"(?="+Mn+")|"+ve+b,"g"),je=RegExp([Pn+"?"+Vi+"+"+yr+"(?="+[Kn,Pn,"$"].join("|")+")",bi+"+"+er+"(?="+[Kn,Pn+Xi,"$"].join("|")+")",Pn+"?"+Xi+"+"+yr,Pn+"+"+er,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ji,H].join("|"),"g"),nt=RegExp("[\\u200d"+li+ci+yi+"]"),tr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Cr=-1,Je={};Je[Jn]=Je[Vt]=Je[ii]=Je[ri]=Je[ot]=Je[Hn]=Je[vt]=Je[Zt]=Je[Ye]=!0,Je[Bt]=Je[En]=Je[We]=Je[Tt]=Je[jt]=Je[Xe]=Je[Nt]=Je[Fn]=Je[gt]=Je[_t]=Je[Qe]=Je[et]=Je[Re]=Je[mt]=Je[Ke]=!1;var Ue={};Ue[Bt]=Ue[En]=Ue[We]=Ue[jt]=Ue[Tt]=Ue[Xe]=Ue[Jn]=Ue[Vt]=Ue[ii]=Ue[ri]=Ue[ot]=Ue[gt]=Ue[_t]=Ue[Qe]=Ue[et]=Ue[Re]=Ue[mt]=Ue[Jt]=Ue[Hn]=Ue[vt]=Ue[Zt]=Ue[Ye]=!0,Ue[Nt]=Ue[Fn]=Ue[Ke]=!1;var Xo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},oo=parseFloat,es=parseInt,so="object"==typeof global&&global&&global.Object===Object&&global,ts="object"==typeof self&&self&&self.Object===Object&&self,Ct=so||ts||Function("return this")(),Zr=Pt&&!Pt.nodeType&&Pt,Ui=Zr&&dn&&!dn.nodeType&&dn,ao=Ui&&Ui.exports===Zr,Rr=ao&&so.process,Ot=function(){try{return Ui&&Ui.require&&Ui.require("util").types||Rr&&Rr.binding&&Rr.binding("util")}catch(R){}}(),Ur=Ot&&Ot.isArrayBuffer,lo=Ot&&Ot.isDate,ns=Ot&&Ot.isMap,is=Ot&&Ot.isRegExp,rs=Ot&&Ot.isSet,co=Ot&&Ot.isTypedArray;function $t(O,R,D){switch(D.length){case 0:return O.call(R);case 1:return O.call(R,D[0]);case 2:return O.call(R,D[0],D[1]);case 3:return O.call(R,D[0],D[1],D[2])}return O.apply(R,D)}function qr(O,R,D,ne){for(var we=-1,Ne=null==O?0:O.length;++we<Ne;){var bt=O[we];R(ne,bt,D(bt),O)}return ne}function Qt(O,R){for(var D=-1,ne=null==O?0:O.length;++D<ne&&!1!==R(O[D],D,O););return O}function os(O,R){for(var D=null==O?0:O.length;D--&&!1!==R(O[D],D,O););return O}function Fr(O,R){for(var D=-1,ne=null==O?0:O.length;++D<ne;)if(!R(O[D],D,O))return!1;return!0}function en(O,R){for(var D=-1,ne=null==O?0:O.length,we=0,Ne=[];++D<ne;){var bt=O[D];R(bt,D,O)&&(Ne[we++]=bt)}return Ne}function ir(O,R){return!!(null==O?0:O.length)&&ui(O,R,0)>-1}function rr(O,R,D){for(var ne=-1,we=null==O?0:O.length;++ne<we;)if(D(R,O[ne]))return!0;return!1}function Be(O,R){for(var D=-1,ne=null==O?0:O.length,we=Array(ne);++D<ne;)we[D]=R(O[D],D,O);return we}function In(O,R){for(var D=-1,ne=R.length,we=O.length;++D<ne;)O[we+D]=R[D];return O}function qi(O,R,D,ne){var we=-1,Ne=null==O?0:O.length;for(ne&&Ne&&(D=O[++we]);++we<Ne;)D=R(D,O[we],we,O);return D}function ra(O,R,D,ne){var we=null==O?0:O.length;for(ne&&we&&(D=O[--we]);we--;)D=R(D,O[we],we,O);return D}function fo(O,R){for(var D=-1,ne=null==O?0:O.length;++D<ne;)if(R(O[D],D,O))return!0;return!1}var oa=xr("length");function Br(O,R,D){var ne;return D(O,function(we,Ne,bt){if(R(we,Ne,bt))return ne=Ne,!1}),ne}function br(O,R,D,ne){for(var we=O.length,Ne=D+(ne?1:-1);ne?Ne--:++Ne<we;)if(R(O[Ne],Ne,O))return Ne;return-1}function ui(O,R,D){return R==R?function he(O,R,D){for(var ne=D-1,we=O.length;++ne<we;)if(O[ne]===R)return ne;return-1}(O,R,D):br(O,_n,D)}function as(O,R,D,ne){for(var we=D-1,Ne=O.length;++we<Ne;)if(ne(O[we],R))return we;return-1}function _n(O){return O!=O}function wr(O,R){var D=null==O?0:O.length;return D?Jr(O,R)/D:NaN}function xr(O){return function(R){return null==R?e:R[O]}}function Fi(O){return function(R){return null==O?e:O[R]}}function Bi(O,R,D,ne,we){return we(O,function(Ne,bt,He){D=ne?(ne=!1,Ne):R(D,Ne,bt,He)}),D}function Jr(O,R){for(var D,ne=-1,we=O.length;++ne<we;){var Ne=R(O[ne]);Ne!==e&&(D=D===e?Ne:D+Ne)}return D}function Hr(O,R){for(var D=-1,ne=Array(O);++D<O;)ne[D]=R(D);return ne}function ls(O){return O&&O.slice(0,fe(O)+1).replace(te,"")}function tn(O){return function(R){return O(R)}}function $r(O,R){return Be(R,function(D){return O[D]})}function or(O,R){return O.has(R)}function cs(O,R){for(var D=-1,ne=O.length;++D<ne&&ui(R,O[D],0)>-1;);return D}function s(O,R){for(var D=O.length;D--&&ui(R,O[D],0)>-1;);return D}function i(O,R){for(var D=O.length,ne=0;D--;)O[D]===R&&++ne;return ne}var o=Fi({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),a=Fi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function c(O){return"\\"+Xo[O]}function g(O){return nt.test(O)}function I(O){var R=-1,D=Array(O.size);return O.forEach(function(ne,we){D[++R]=[we,ne]}),D}function Z(O,R){return function(D){return O(R(D))}}function $(O,R){for(var D=-1,ne=O.length,we=0,Ne=[];++D<ne;){var bt=O[D];(bt===R||bt===Ce)&&(O[D]=Ce,Ne[we++]=D)}return Ne}function F(O){var R=-1,D=Array(O.size);return O.forEach(function(ne){D[++R]=ne}),D}function z(O){return g(O)?function se(O){for(var R=Rt.lastIndex=0;Rt.test(O);)++R;return R}(O):oa(O)}function V(O){return g(O)?function re(O){return O.match(Rt)||[]}(O):function ss(O){return O.split("")}(O)}function fe(O){for(var R=O.length;R--&&pe.test(O.charAt(R)););return R}var ue=Fi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ut=function O(R){var t,D=(R=null==R?Ct:Ut.defaults(Ct.Object(),R,Ut.pick(Ct,nr))).Array,ne=R.Date,we=R.Error,Ne=R.Function,bt=R.Math,He=R.Object,fs=R.RegExp,Yl=R.String,Dn=R.TypeError,po=D.prototype,jl=Ne.prototype,Tr=He.prototype,go=R["__core-js_shared__"],_o=jl.toString,Fe=Tr.hasOwnProperty,Vl=0,sa=(t=/[^.]+$/.exec(go&&go.keys&&go.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",mo=Tr.toString,zl=_o.call(He),Xl=Ct._,ec=fs("^"+_o.call(Fe).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vo=ao?R.Buffer:e,Ji=R.Symbol,yo=R.Uint8Array,aa=vo?vo.allocUnsafe:e,Co=Z(He.getPrototypeOf,He),la=He.create,ca=Tr.propertyIsEnumerable,bo=po.splice,fa=Ji?Ji.isConcatSpreadable:e,Qr=Ji?Ji.iterator:e,sr=Ji?Ji.toStringTag:e,wo=function(){try{var t=ur(He,"defineProperty");return t({},"",{}),t}catch(n){}}(),tc=R.clearTimeout!==Ct.clearTimeout&&R.clearTimeout,nc=ne&&ne.now!==Ct.Date.now&&ne.now,ic=R.setTimeout!==Ct.setTimeout&&R.setTimeout,xo=bt.ceil,To=bt.floor,us=He.getOwnPropertySymbols,rc=vo?vo.isBuffer:e,ua=R.isFinite,oc=po.join,sc=Z(He.keys,He),wt=bt.max,Gt=bt.min,ac=ne.now,lc=R.parseInt,da=bt.random,cc=po.reverse,ds=ur(R,"DataView"),Gr=ur(R,"Map"),hs=ur(R,"Promise"),Er=ur(R,"Set"),Wr=ur(R,"WeakMap"),Kr=ur(He,"create"),Eo=Wr&&new Wr,Ar={},fc=dr(ds),uc=dr(Gr),dc=dr(hs),hc=dr(Er),pc=dr(Wr),Ao=Ji?Ji.prototype:e,Yr=Ao?Ao.valueOf:e,ha=Ao?Ao.toString:e;function m(t){if(it(t)&&!xe(t)&&!(t instanceof Ie)){if(t instanceof kn)return t;if(Fe.call(t,"__wrapped__"))return pl(t)}return new kn(t)}var Sr=function(){function t(){}return function(n){if(!Ve(n))return{};if(la)return la(n);t.prototype=n;var r=new t;return t.prototype=e,r}}();function So(){}function kn(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function Ie(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function ar(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var f=t[n];this.set(f[0],f[1])}}function wi(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var f=t[n];this.set(f[0],f[1])}}function xi(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var f=t[n];this.set(f[0],f[1])}}function lr(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new xi;++n<r;)this.add(t[n])}function zn(t){var n=this.__data__=new wi(t);this.size=n.size}function pa(t,n){var r=xe(t),f=!r&&hr(t),p=!r&&!f&&Wi(t),y=!r&&!f&&!p&&Ir(t),T=r||f||p||y,S=T?Hr(t.length,Yl):[],M=S.length;for(var q in t)(n||Fe.call(t,q))&&(!T||!("length"==q||p&&("offset"==q||"parent"==q)||y&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||Si(q,M)))&&S.push(q);return S}function ga(t){var n=t.length;return n?t[Ts(0,n-1)]:e}function Fc(t,n){return Bo(ln(t),cr(n,0,t.length))}function Bc(t){return Bo(ln(t))}function ps(t,n,r){(r!==e&&!Xn(t[n],r)||r===e&&!(n in t))&&Ti(t,n,r)}function jr(t,n,r){var f=t[n];(!Fe.call(t,n)||!Xn(f,r)||r===e&&!(n in t))&&Ti(t,n,r)}function Oo(t,n){for(var r=t.length;r--;)if(Xn(t[r][0],n))return r;return-1}function Jc(t,n,r,f){return Hi(t,function(p,y,T){n(f,p,r(p),T)}),f}function _a(t,n){return t&&pi(n,Mt(n),t)}function Ti(t,n,r){"__proto__"==n&&wo?wo(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}function gs(t,n){for(var r=-1,f=n.length,p=D(f),y=null==t;++r<f;)p[r]=y?e:Ys(t,n[r]);return p}function cr(t,n,r){return t==t&&(r!==e&&(t=t<=r?t:r),n!==e&&(t=t>=n?t:n)),t}function Nn(t,n,r,f,p,y){var T,S=1&n,M=2&n,q=4&n;if(r&&(T=p?r(t,f,p,y):r(t)),T!==e)return T;if(!Ve(t))return t;var B=xe(t);if(B){if(T=function Df(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&Fe.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!S)return ln(t,T)}else{var W=Wt(t),X=W==Fn||W==Lt;if(Wi(t))return Fa(t,S);if(W==Qe||W==Bt||X&&!p){if(T=M||X?{}:ol(t),!S)return M?function bf(t,n){return pi(t,il(t),n)}(t,function Hc(t,n){return t&&pi(n,fn(n),t)}(T,t)):function Cf(t,n){return pi(t,Us(t),n)}(t,_a(T,t))}else{if(!Ue[W])return p?t:{};T=function kf(t,n,r){var f=t.constructor;switch(n){case We:return Is(t);case Tt:case Xe:return new f(+t);case jt:return function _f(t,n){var r=n?Is(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case Jn:case Vt:case ii:case ri:case ot:case Hn:case vt:case Zt:case Ye:return Ba(t,r);case gt:return new f;case _t:case mt:return new f(t);case et:return function mf(t){var n=new t.constructor(t.source,ki.exec(t));return n.lastIndex=t.lastIndex,n}(t);case Re:return new f;case Jt:return function vf(t){return Yr?He(Yr.call(t)):{}}(t)}}(t,W,S)}}y||(y=new zn);var ae=y.get(t);if(ae)return ae;y.set(t,T),Nl(t)?t.forEach(function(me){T.add(Nn(me,n,r,me,t,y))}):Dl(t)&&t.forEach(function(me,Pe){T.set(Pe,Nn(me,n,r,Pe,t,y))});var Ae=B?e:(q?M?Ls:Ns:M?fn:Mt)(t);return Qt(Ae||t,function(me,Pe){Ae&&(me=t[Pe=me]),jr(T,Pe,Nn(me,n,r,Pe,t,y))}),T}function ma(t,n,r){var f=r.length;if(null==t)return!f;for(t=He(t);f--;){var p=r[f],y=n[p],T=t[p];if(T===e&&!(p in t)||!y(T))return!1}return!0}function va(t,n,r){if("function"!=typeof t)throw new Dn(ce);return io(function(){t.apply(e,r)},n)}function Vr(t,n,r,f){var p=-1,y=ir,T=!0,S=t.length,M=[],q=n.length;if(!S)return M;r&&(n=Be(n,tn(r))),f?(y=rr,T=!1):n.length>=200&&(y=or,T=!1,n=new lr(n));e:for(;++p<S;){var B=t[p],W=null==r?B:r(B);if(B=f||0!==B?B:0,T&&W==W){for(var X=q;X--;)if(n[X]===W)continue e;M.push(B)}else y(n,W,f)||M.push(B)}return M}m.templateSettings={escape:L,evaluate:d,interpolate:_,variable:"",imports:{_:m}},m.prototype=So.prototype,m.prototype.constructor=m,kn.prototype=Sr(So.prototype),kn.prototype.constructor=kn,Ie.prototype=Sr(So.prototype),Ie.prototype.constructor=Ie,ar.prototype.clear=function vc(){this.__data__=Kr?Kr(null):{},this.size=0},ar.prototype.delete=function yc(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},ar.prototype.get=function Cc(t){var n=this.__data__;if(Kr){var r=n[t];return r===ye?e:r}return Fe.call(n,t)?n[t]:e},ar.prototype.has=function bc(t){var n=this.__data__;return Kr?n[t]!==e:Fe.call(n,t)},ar.prototype.set=function wc(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Kr&&n===e?ye:n,this},wi.prototype.clear=function xc(){this.__data__=[],this.size=0},wi.prototype.delete=function Tc(t){var n=this.__data__,r=Oo(n,t);return!(r<0)&&(r==n.length-1?n.pop():bo.call(n,r,1),--this.size,!0)},wi.prototype.get=function Ec(t){var n=this.__data__,r=Oo(n,t);return r<0?e:n[r][1]},wi.prototype.has=function Ac(t){return Oo(this.__data__,t)>-1},wi.prototype.set=function Sc(t,n){var r=this.__data__,f=Oo(r,t);return f<0?(++this.size,r.push([t,n])):r[f][1]=n,this},xi.prototype.clear=function Oc(){this.size=0,this.__data__={hash:new ar,map:new(Gr||wi),string:new ar}},xi.prototype.delete=function Mc(t){var n=Fo(this,t).delete(t);return this.size-=n?1:0,n},xi.prototype.get=function Pc(t){return Fo(this,t).get(t)},xi.prototype.has=function Ic(t){return Fo(this,t).has(t)},xi.prototype.set=function Dc(t,n){var r=Fo(this,t),f=r.size;return r.set(t,n),this.size+=r.size==f?0:1,this},lr.prototype.add=lr.prototype.push=function kc(t){return this.__data__.set(t,ye),this},lr.prototype.has=function Nc(t){return this.__data__.has(t)},zn.prototype.clear=function Lc(){this.__data__=new wi,this.size=0},zn.prototype.delete=function Zc(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r},zn.prototype.get=function Rc(t){return this.__data__.get(t)},zn.prototype.has=function Uc(t){return this.__data__.has(t)},zn.prototype.set=function qc(t,n){var r=this.__data__;if(r instanceof wi){var f=r.__data__;if(!Gr||f.length<199)return f.push([t,n]),this.size=++r.size,this;r=this.__data__=new xi(f)}return r.set(t,n),this.size=r.size,this};var Hi=Qa(hi),ya=Qa(ms,!0);function Qc(t,n){var r=!0;return Hi(t,function(f,p,y){return r=!!n(f,p,y)}),r}function Mo(t,n,r){for(var f=-1,p=t.length;++f<p;){var y=t[f],T=n(y);if(null!=T&&(S===e?T==T&&!vn(T):r(T,S)))var S=T,M=y}return M}function Ca(t,n){var r=[];return Hi(t,function(f,p,y){n(f,p,y)&&r.push(f)}),r}function qt(t,n,r,f,p){var y=-1,T=t.length;for(r||(r=Lf),p||(p=[]);++y<T;){var S=t[y];n>0&&r(S)?n>1?qt(S,n-1,r,f,p):In(p,S):f||(p[p.length]=S)}return p}var _s=Ga(),ba=Ga(!0);function hi(t,n){return t&&_s(t,n,Mt)}function ms(t,n){return t&&ba(t,n,Mt)}function Po(t,n){return en(n,function(r){return Oi(t[r])})}function fr(t,n){for(var r=0,f=(n=Qi(n,t)).length;null!=t&&r<f;)t=t[gi(n[r++])];return r&&r==f?t:e}function wa(t,n,r){var f=n(t);return xe(t)?f:In(f,r(t))}function nn(t){return null==t?t===e?"[object Undefined]":"[object Null]":sr&&sr in He(t)?function Mf(t){var n=Fe.call(t,sr),r=t[sr];try{t[sr]=e;var f=!0}catch(y){}var p=mo.call(t);return f&&(n?t[sr]=r:delete t[sr]),p}(t):function Jf(t){return mo.call(t)}(t)}function vs(t,n){return t>n}function Wc(t,n){return null!=t&&Fe.call(t,n)}function Kc(t,n){return null!=t&&n in He(t)}function ys(t,n,r){for(var f=r?rr:ir,p=t[0].length,y=t.length,T=y,S=D(y),M=1/0,q=[];T--;){var B=t[T];T&&n&&(B=Be(B,tn(n))),M=Gt(B.length,M),S[T]=!r&&(n||p>=120&&B.length>=120)?new lr(T&&B):e}B=t[0];var W=-1,X=S[0];e:for(;++W<p&&q.length<M;){var ae=B[W],_e=n?n(ae):ae;if(ae=r||0!==ae?ae:0,!(X?or(X,_e):f(q,_e,r))){for(T=y;--T;){var Ae=S[T];if(!(Ae?or(Ae,_e):f(t[T],_e,r)))continue e}X&&X.push(_e),q.push(ae)}}return q}function zr(t,n,r){var f=null==(t=cl(t,n=Qi(n,t)))?t:t[gi(Zn(n))];return null==f?e:$t(f,t,r)}function xa(t){return it(t)&&nn(t)==Bt}function Xr(t,n,r,f,p){return t===n||(null==t||null==n||!it(t)&&!it(n)?t!=t&&n!=n:function Xc(t,n,r,f,p,y){var T=xe(t),S=xe(n),M=T?En:Wt(t),q=S?En:Wt(n),B=(M=M==Bt?Qe:M)==Qe,W=(q=q==Bt?Qe:q)==Qe,X=M==q;if(X&&Wi(t)){if(!Wi(n))return!1;T=!0,B=!1}if(X&&!B)return y||(y=new zn),T||Ir(t)?nl(t,n,r,f,p,y):function Sf(t,n,r,f,p,y,T){switch(r){case jt:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case We:return!(t.byteLength!=n.byteLength||!y(new yo(t),new yo(n)));case Tt:case Xe:case _t:return Xn(+t,+n);case Nt:return t.name==n.name&&t.message==n.message;case et:case mt:return t==n+"";case gt:var S=I;case Re:var M=1&f;if(S||(S=F),t.size!=n.size&&!M)return!1;var q=T.get(t);if(q)return q==n;f|=2,T.set(t,n);var B=nl(S(t),S(n),f,p,y,T);return T.delete(t),B;case Jt:if(Yr)return Yr.call(t)==Yr.call(n)}return!1}(t,n,M,r,f,p,y);if(!(1&r)){var ae=B&&Fe.call(t,"__wrapped__"),_e=W&&Fe.call(n,"__wrapped__");if(ae||_e){var Ae=ae?t.value():t,me=_e?n.value():n;return y||(y=new zn),p(Ae,me,r,f,y)}}return!!X&&(y||(y=new zn),function Of(t,n,r,f,p,y){var T=1&r,S=Ns(t),M=S.length,B=Ns(n).length;if(M!=B&&!T)return!1;for(var W=M;W--;){var X=S[W];if(!(T?X in n:Fe.call(n,X)))return!1}var ae=y.get(t),_e=y.get(n);if(ae&&_e)return ae==n&&_e==t;var Ae=!0;y.set(t,n),y.set(n,t);for(var me=T;++W<M;){var Pe=t[X=S[W]],De=n[X];if(f)var yn=T?f(De,Pe,X,n,t,y):f(Pe,De,X,t,n,y);if(!(yn===e?Pe===De||p(Pe,De,r,f,y):yn)){Ae=!1;break}me||(me="constructor"==X)}if(Ae&&!me){var on=t.constructor,Cn=n.constructor;on!=Cn&&"constructor"in t&&"constructor"in n&&!("function"==typeof on&&on instanceof on&&"function"==typeof Cn&&Cn instanceof Cn)&&(Ae=!1)}return y.delete(t),y.delete(n),Ae}(t,n,r,f,p,y))}(t,n,r,f,Xr,p))}function Cs(t,n,r,f){var p=r.length,y=p,T=!f;if(null==t)return!y;for(t=He(t);p--;){var S=r[p];if(T&&S[2]?S[1]!==t[S[0]]:!(S[0]in t))return!1}for(;++p<y;){var M=(S=r[p])[0],q=t[M],B=S[1];if(T&&S[2]){if(q===e&&!(M in t))return!1}else{var W=new zn;if(f)var X=f(q,B,M,t,n,W);if(!(X===e?Xr(B,q,3,f,W):X))return!1}}return!0}function Ta(t){return!(!Ve(t)||function Rf(t){return!!sa&&sa in t}(t))&&(Oi(t)?ec:mi).test(dr(t))}function Ea(t){return"function"==typeof t?t:null==t?un:"object"==typeof t?xe(t)?Oa(t[0],t[1]):Sa(t):Wl(t)}function bs(t){if(!no(t))return sc(t);var n=[];for(var r in He(t))Fe.call(t,r)&&"constructor"!=r&&n.push(r);return n}function of(t){if(!Ve(t))return function Bf(t){var n=[];if(null!=t)for(var r in He(t))n.push(r);return n}(t);var n=no(t),r=[];for(var f in t)"constructor"==f&&(n||!Fe.call(t,f))||r.push(f);return r}function ws(t,n){return t<n}function Aa(t,n){var r=-1,f=cn(t)?D(t.length):[];return Hi(t,function(p,y,T){f[++r]=n(p,y,T)}),f}function Sa(t){var n=Rs(t);return 1==n.length&&n[0][2]?al(n[0][0],n[0][1]):function(r){return r===t||Cs(r,t,n)}}function Oa(t,n){return qs(t)&&sl(n)?al(gi(t),n):function(r){var f=Ys(r,t);return f===e&&f===n?js(r,t):Xr(n,f,3)}}function Io(t,n,r,f,p){t!==n&&_s(n,function(y,T){if(p||(p=new zn),Ve(y))!function sf(t,n,r,f,p,y,T){var S=Bs(t,r),M=Bs(n,r),q=T.get(M);if(q)return void ps(t,r,q);var B=y?y(S,M,r+"",t,n,T):e,W=B===e;if(W){var X=xe(M),ae=!X&&Wi(M),_e=!X&&!ae&&Ir(M);B=M,X||ae||_e?xe(S)?B=S:ct(S)?B=ln(S):ae?(W=!1,B=Fa(M,!0)):_e?(W=!1,B=Ba(M,!0)):B=[]:ro(M)||hr(M)?(B=S,hr(S)?B=Rl(S):(!Ve(S)||Oi(S))&&(B=ol(M))):W=!1}W&&(T.set(M,B),p(B,M,f,y,T),T.delete(M)),ps(t,r,B)}(t,n,T,r,Io,f,p);else{var S=f?f(Bs(t,T),y,T+"",t,n,p):e;S===e&&(S=y),ps(t,T,S)}},fn)}function Ma(t,n){var r=t.length;if(r)return Si(n+=n<0?r:0,r)?t[n]:e}function Pa(t,n,r){n=n.length?Be(n,function(y){return xe(y)?function(T){return fr(T,1===y.length?y[0]:y)}:y}):[un];var f=-1;return n=Be(n,tn(ge())),function uo(O,R){var D=O.length;for(O.sort(R);D--;)O[D]=O[D].value;return O}(Aa(t,function(y,T,S){return{criteria:Be(n,function(q){return q(y)}),index:++f,value:y}}),function(y,T){return function yf(t,n,r){for(var f=-1,p=t.criteria,y=n.criteria,T=p.length,S=r.length;++f<T;){var M=Ja(p[f],y[f]);if(M)return f>=S?M:M*("desc"==r[f]?-1:1)}return t.index-n.index}(y,T,r)})}function Ia(t,n,r){for(var f=-1,p=n.length,y={};++f<p;){var T=n[f],S=fr(t,T);r(S,T)&&eo(y,Qi(T,t),S)}return y}function xs(t,n,r,f){var p=f?as:ui,y=-1,T=n.length,S=t;for(t===n&&(n=ln(n)),r&&(S=Be(t,tn(r)));++y<T;)for(var M=0,q=n[y],B=r?r(q):q;(M=p(S,B,M,f))>-1;)S!==t&&bo.call(S,M,1),bo.call(t,M,1);return t}function Da(t,n){for(var r=t?n.length:0,f=r-1;r--;){var p=n[r];if(r==f||p!==y){var y=p;Si(p)?bo.call(t,p,1):Ss(t,p)}}return t}function Ts(t,n){return t+To(da()*(n-t+1))}function Es(t,n){var r="";if(!t||n<1||n>le)return r;do{n%2&&(r+=t),(n=To(n/2))&&(t+=t)}while(n);return r}function Me(t,n){return Js(ll(t,n,un),t+"")}function ff(t){return ga(Dr(t))}function uf(t,n){var r=Dr(t);return Bo(r,cr(n,0,r.length))}function eo(t,n,r,f){if(!Ve(t))return t;for(var p=-1,y=(n=Qi(n,t)).length,T=y-1,S=t;null!=S&&++p<y;){var M=gi(n[p]),q=r;if("__proto__"===M||"constructor"===M||"prototype"===M)return t;if(p!=T){var B=S[M];(q=f?f(B,M,S):e)===e&&(q=Ve(B)?B:Si(n[p+1])?[]:{})}jr(S,M,q),S=S[M]}return t}var ka=Eo?function(t,n){return Eo.set(t,n),t}:un,df=wo?function(t,n){return wo(t,"toString",{configurable:!0,enumerable:!1,value:zs(n),writable:!0})}:un;function hf(t){return Bo(Dr(t))}function Ln(t,n,r){var f=-1,p=t.length;n<0&&(n=-n>p?0:p+n),(r=r>p?p:r)<0&&(r+=p),p=n>r?0:r-n>>>0,n>>>=0;for(var y=D(p);++f<p;)y[f]=t[f+n];return y}function pf(t,n){var r;return Hi(t,function(f,p,y){return!(r=n(f,p,y))}),!!r}function Do(t,n,r){var f=0,p=null==t?f:t.length;if("number"==typeof n&&n==n&&p<=2147483647){for(;f<p;){var y=f+p>>>1,T=t[y];null!==T&&!vn(T)&&(r?T<=n:T<n)?f=y+1:p=y}return p}return As(t,n,un,r)}function As(t,n,r,f){var p=0,y=null==t?0:t.length;if(0===y)return 0;for(var T=(n=r(n))!=n,S=null===n,M=vn(n),q=n===e;p<y;){var B=To((p+y)/2),W=r(t[B]),X=W!==e,ae=null===W,_e=W==W,Ae=vn(W);if(T)var me=f||_e;else me=q?_e&&(f||X):S?_e&&X&&(f||!ae):M?_e&&X&&!ae&&(f||!Ae):!ae&&!Ae&&(f?W<=n:W<n);me?p=B+1:y=B}return Gt(y,4294967294)}function Na(t,n){for(var r=-1,f=t.length,p=0,y=[];++r<f;){var T=t[r],S=n?n(T):T;if(!r||!Xn(S,M)){var M=S;y[p++]=0===T?0:T}}return y}function La(t){return"number"==typeof t?t:vn(t)?NaN:+t}function mn(t){if("string"==typeof t)return t;if(xe(t))return Be(t,mn)+"";if(vn(t))return ha?ha.call(t):"";var n=t+"";return"0"==n&&1/t==-Yt?"-0":n}function $i(t,n,r){var f=-1,p=ir,y=t.length,T=!0,S=[],M=S;if(r)T=!1,p=rr;else if(y>=200){var q=n?null:Ef(t);if(q)return F(q);T=!1,p=or,M=new lr}else M=n?[]:S;e:for(;++f<y;){var B=t[f],W=n?n(B):B;if(B=r||0!==B?B:0,T&&W==W){for(var X=M.length;X--;)if(M[X]===W)continue e;n&&M.push(W),S.push(B)}else p(M,W,r)||(M!==S&&M.push(W),S.push(B))}return S}function Ss(t,n){return null==(t=cl(t,n=Qi(n,t)))||delete t[gi(Zn(n))]}function Za(t,n,r,f){return eo(t,n,r(fr(t,n)),f)}function ko(t,n,r,f){for(var p=t.length,y=f?p:-1;(f?y--:++y<p)&&n(t[y],y,t););return r?Ln(t,f?0:y,f?y+1:p):Ln(t,f?y+1:0,f?p:y)}function Ra(t,n){var r=t;return r instanceof Ie&&(r=r.value()),qi(n,function(f,p){return p.func.apply(p.thisArg,In([f],p.args))},r)}function Os(t,n,r){var f=t.length;if(f<2)return f?$i(t[0]):[];for(var p=-1,y=D(f);++p<f;)for(var T=t[p],S=-1;++S<f;)S!=p&&(y[p]=Vr(y[p]||T,t[S],n,r));return $i(qt(y,1),n,r)}function Ua(t,n,r){for(var f=-1,p=t.length,y=n.length,T={};++f<p;){var S=f<y?n[f]:e;r(T,t[f],S)}return T}function Ms(t){return ct(t)?t:[]}function Ps(t){return"function"==typeof t?t:un}function Qi(t,n){return xe(t)?t:qs(t,n)?[t]:hl(Ze(t))}var gf=Me;function Gi(t,n,r){var f=t.length;return r=r===e?f:r,!n&&r>=f?t:Ln(t,n,r)}var qa=tc||function(t){return Ct.clearTimeout(t)};function Fa(t,n){if(n)return t.slice();var r=t.length,f=aa?aa(r):new t.constructor(r);return t.copy(f),f}function Is(t){var n=new t.constructor(t.byteLength);return new yo(n).set(new yo(t)),n}function Ba(t,n){var r=n?Is(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ja(t,n){if(t!==n){var r=t!==e,f=null===t,p=t==t,y=vn(t),T=n!==e,S=null===n,M=n==n,q=vn(n);if(!S&&!q&&!y&&t>n||y&&T&&M&&!S&&!q||f&&T&&M||!r&&M||!p)return 1;if(!f&&!y&&!q&&t<n||q&&r&&p&&!f&&!y||S&&r&&p||!T&&p||!M)return-1}return 0}function Ha(t,n,r,f){for(var p=-1,y=t.length,T=r.length,S=-1,M=n.length,q=wt(y-T,0),B=D(M+q),W=!f;++S<M;)B[S]=n[S];for(;++p<T;)(W||p<y)&&(B[r[p]]=t[p]);for(;q--;)B[S++]=t[p++];return B}function $a(t,n,r,f){for(var p=-1,y=t.length,T=-1,S=r.length,M=-1,q=n.length,B=wt(y-S,0),W=D(B+q),X=!f;++p<B;)W[p]=t[p];for(var ae=p;++M<q;)W[ae+M]=n[M];for(;++T<S;)(X||p<y)&&(W[ae+r[T]]=t[p++]);return W}function ln(t,n){var r=-1,f=t.length;for(n||(n=D(f));++r<f;)n[r]=t[r];return n}function pi(t,n,r,f){var p=!r;r||(r={});for(var y=-1,T=n.length;++y<T;){var S=n[y],M=f?f(r[S],t[S],S,r,t):e;M===e&&(M=t[S]),p?Ti(r,S,M):jr(r,S,M)}return r}function No(t,n){return function(r,f){var p=xe(r)?qr:Jc,y=n?n():{};return p(r,t,ge(f,2),y)}}function Or(t){return Me(function(n,r){var f=-1,p=r.length,y=p>1?r[p-1]:e,T=p>2?r[2]:e;for(y=t.length>3&&"function"==typeof y?(p--,y):e,T&&rn(r[0],r[1],T)&&(y=p<3?e:y,p=1),n=He(n);++f<p;){var S=r[f];S&&t(n,S,f,y)}return n})}function Qa(t,n){return function(r,f){if(null==r)return r;if(!cn(r))return t(r,f);for(var p=r.length,y=n?p:-1,T=He(r);(n?y--:++y<p)&&!1!==f(T[y],y,T););return r}}function Ga(t){return function(n,r,f){for(var p=-1,y=He(n),T=f(n),S=T.length;S--;){var M=T[t?S:++p];if(!1===r(y[M],M,y))break}return n}}function Wa(t){return function(n){var r=g(n=Ze(n))?V(n):e,f=r?r[0]:n.charAt(0),p=r?Gi(r,1).join(""):n.slice(1);return f[t]()+p}}function Mr(t){return function(n){return qi(Ql($l(n).replace(Te,"")),t,"")}}function to(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=Sr(t.prototype),f=t.apply(r,n);return Ve(f)?f:r}}function Ka(t){return function(n,r,f){var p=He(n);if(!cn(n)){var y=ge(r,3);n=Mt(n),r=function(S){return y(p[S],S,p)}}var T=t(n,r,f);return T>-1?p[y?n[T]:T]:e}}function Ya(t){return Ai(function(n){var r=n.length,f=r,p=kn.prototype.thru;for(t&&n.reverse();f--;){var y=n[f];if("function"!=typeof y)throw new Dn(ce);if(p&&!T&&"wrapper"==qo(y))var T=new kn([],!0)}for(f=T?f:r;++f<r;){var S=qo(y=n[f]),M="wrapper"==S?Zs(y):e;T=M&&Fs(M[0])&&424==M[1]&&!M[4].length&&1==M[9]?T[qo(M[0])].apply(T,M[3]):1==y.length&&Fs(y)?T[S]():T.thru(y)}return function(){var q=arguments,B=q[0];if(T&&1==q.length&&xe(B))return T.plant(B).value();for(var W=0,X=r?n[W].apply(this,q):B;++W<r;)X=n[W].call(this,X);return X}})}function Lo(t,n,r,f,p,y,T,S,M,q){var B=n&ht,W=1&n,X=2&n,ae=24&n,_e=512&n,Ae=X?e:to(t);return function me(){for(var Pe=arguments.length,De=D(Pe),yn=Pe;yn--;)De[yn]=arguments[yn];if(ae)var on=Pr(me),Cn=i(De,on);if(f&&(De=Ha(De,f,p,ae)),y&&(De=$a(De,y,T,ae)),Pe-=Cn,ae&&Pe<q){var ft=$(De,on);return za(t,n,Lo,me.placeholder,r,De,ft,S,M,q-Pe)}var ei=W?r:this,Pi=X?ei[t]:t;return Pe=De.length,S?De=Hf(De,S):_e&&Pe>1&&De.reverse(),B&&M<Pe&&(De.length=M),this&&this!==Ct&&this instanceof me&&(Pi=Ae||to(Pi)),Pi.apply(ei,De)}}function ja(t,n){return function(r,f){return function jc(t,n,r,f){return hi(t,function(p,y,T){n(f,r(p),y,T)}),f}(r,t,n(f),{})}}function Zo(t,n){return function(r,f){var p;if(r===e&&f===e)return n;if(r!==e&&(p=r),f!==e){if(p===e)return f;"string"==typeof r||"string"==typeof f?(r=mn(r),f=mn(f)):(r=La(r),f=La(f)),p=t(r,f)}return p}}function Ds(t){return Ai(function(n){return n=Be(n,tn(ge())),Me(function(r){var f=this;return t(n,function(p){return $t(p,f,r)})})})}function Ro(t,n){var r=(n=n===e?" ":mn(n)).length;if(r<2)return r?Es(n,t):n;var f=Es(n,xo(t/z(n)));return g(n)?Gi(V(f),0,t).join(""):f.slice(0,t)}function Va(t){return function(n,r,f){return f&&"number"!=typeof f&&rn(n,r,f)&&(r=f=e),n=Mi(n),r===e?(r=n,n=0):r=Mi(r),function cf(t,n,r,f){for(var p=-1,y=wt(xo((n-t)/(r||1)),0),T=D(y);y--;)T[f?y:++p]=t,t+=r;return T}(n,r,f=f===e?n<r?1:-1:Mi(f),t)}}function Uo(t){return function(n,r){return"string"==typeof n&&"string"==typeof r||(n=Rn(n),r=Rn(r)),t(n,r)}}function za(t,n,r,f,p,y,T,S,M,q){var B=8&n;n|=B?32:64,4&(n&=~(B?64:32))||(n&=-4);var Ae=[t,n,p,B?y:e,B?T:e,B?e:y,B?e:T,S,M,q],me=r.apply(e,Ae);return Fs(t)&&fl(me,Ae),me.placeholder=f,ul(me,t,n)}function ks(t){var n=bt[t];return function(r,f){if(r=Rn(r),(f=null==f?0:Gt(Ee(f),292))&&ua(r)){var p=(Ze(r)+"e").split("e");return+((p=(Ze(n(p[0]+"e"+(+p[1]+f)))+"e").split("e"))[0]+"e"+(+p[1]-f))}return n(r)}}var Ef=Er&&1/F(new Er([,-0]))[1]==Yt?function(t){return new Er(t)}:ta;function Xa(t){return function(n){var r=Wt(n);return r==gt?I(n):r==Re?function Y(O){var R=-1,D=Array(O.size);return O.forEach(function(ne){D[++R]=[ne,ne]}),D}(n):function ho(O,R){return Be(R,function(D){return[D,O[D]]})}(n,t(n))}}function Ei(t,n,r,f,p,y,T,S){var M=2&n;if(!M&&"function"!=typeof t)throw new Dn(ce);var q=f?f.length:0;if(q||(n&=-97,f=p=e),T=T===e?T:wt(Ee(T),0),S=S===e?S:Ee(S),q-=p?p.length:0,64&n){var B=f,W=p;f=p=e}var X=M?e:Zs(t),ae=[t,n,r,f,p,B,W,y,T,S];if(X&&function Ff(t,n){var r=t[1],f=n[1],p=r|f,y=p<131,T=f==ht&&8==r||f==ht&&256==r&&t[7].length<=n[8]||384==f&&n[7].length<=n[8]&&8==r;if(!y&&!T)return t;1&f&&(t[2]=n[2],p|=1&r?0:4);var S=n[3];if(S){var M=t[3];t[3]=M?Ha(M,S,n[4]):S,t[4]=M?$(t[3],Ce):n[4]}return(S=n[5])&&(M=t[5],t[5]=M?$a(M,S,n[6]):S,t[6]=M?$(t[5],Ce):n[6]),(S=n[7])&&(t[7]=S),f&ht&&(t[8]=null==t[8]?n[8]:Gt(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=p,t}(ae,X),t=ae[0],n=ae[1],r=ae[2],f=ae[3],p=ae[4],!(S=ae[9]=ae[9]===e?M?0:t.length:wt(ae[9]-q,0))&&24&n&&(n&=-25),n&&1!=n)_e=8==n||16==n?function xf(t,n,r){var f=to(t);return function p(){for(var y=arguments.length,T=D(y),S=y,M=Pr(p);S--;)T[S]=arguments[S];var q=y<3&&T[0]!==M&&T[y-1]!==M?[]:$(T,M);return(y-=q.length)<r?za(t,n,Lo,p.placeholder,e,T,q,e,e,r-y):$t(this&&this!==Ct&&this instanceof p?f:t,this,T)}}(t,n,S):32!=n&&33!=n||p.length?Lo.apply(e,ae):function Tf(t,n,r,f){var p=1&n,y=to(t);return function T(){for(var S=-1,M=arguments.length,q=-1,B=f.length,W=D(B+M),X=this&&this!==Ct&&this instanceof T?y:t;++q<B;)W[q]=f[q];for(;M--;)W[q++]=arguments[++S];return $t(X,p?r:this,W)}}(t,n,r,f);else var _e=function wf(t,n,r){var f=1&n,p=to(t);return function y(){return(this&&this!==Ct&&this instanceof y?p:t).apply(f?r:this,arguments)}}(t,n,r);return ul((X?ka:fl)(_e,ae),t,n)}function el(t,n,r,f){return t===e||Xn(t,Tr[r])&&!Fe.call(f,r)?n:t}function tl(t,n,r,f,p,y){return Ve(t)&&Ve(n)&&(y.set(n,t),Io(t,n,e,tl,y),y.delete(n)),t}function Af(t){return ro(t)?e:t}function nl(t,n,r,f,p,y){var T=1&r,S=t.length,M=n.length;if(S!=M&&!(T&&M>S))return!1;var q=y.get(t),B=y.get(n);if(q&&B)return q==n&&B==t;var W=-1,X=!0,ae=2&r?new lr:e;for(y.set(t,n),y.set(n,t);++W<S;){var _e=t[W],Ae=n[W];if(f)var me=T?f(Ae,_e,W,n,t,y):f(_e,Ae,W,t,n,y);if(me!==e){if(me)continue;X=!1;break}if(ae){if(!fo(n,function(Pe,De){if(!or(ae,De)&&(_e===Pe||p(_e,Pe,r,f,y)))return ae.push(De)})){X=!1;break}}else if(_e!==Ae&&!p(_e,Ae,r,f,y)){X=!1;break}}return y.delete(t),y.delete(n),X}function Ai(t){return Js(ll(t,e,ml),t+"")}function Ns(t){return wa(t,Mt,Us)}function Ls(t){return wa(t,fn,il)}var Zs=Eo?function(t){return Eo.get(t)}:ta;function qo(t){for(var n=t.name+"",r=Ar[n],f=Fe.call(Ar,n)?r.length:0;f--;){var p=r[f],y=p.func;if(null==y||y==t)return p.name}return n}function Pr(t){return(Fe.call(m,"placeholder")?m:t).placeholder}function ge(){var t=m.iteratee||Xs;return t=t===Xs?Ea:t,arguments.length?t(arguments[0],arguments[1]):t}function Fo(t,n){var r=t.__data__;return function Zf(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?r["string"==typeof n?"string":"hash"]:r.map}function Rs(t){for(var n=Mt(t),r=n.length;r--;){var f=n[r],p=t[f];n[r]=[f,p,sl(p)]}return n}function ur(t,n){var r=function h(O,R){return null==O?e:O[R]}(t,n);return Ta(r)?r:e}var Us=us?function(t){return null==t?[]:(t=He(t),en(us(t),function(n){return ca.call(t,n)}))}:na,il=us?function(t){for(var n=[];t;)In(n,Us(t)),t=Co(t);return n}:na,Wt=nn;function rl(t,n,r){for(var f=-1,p=(n=Qi(n,t)).length,y=!1;++f<p;){var T=gi(n[f]);if(!(y=null!=t&&r(t,T)))break;t=t[T]}return y||++f!=p?y:!!(p=null==t?0:t.length)&&Wo(p)&&Si(T,p)&&(xe(t)||hr(t))}function ol(t){return"function"!=typeof t.constructor||no(t)?{}:Sr(Co(t))}function Lf(t){return xe(t)||hr(t)||!!(fa&&t&&t[fa])}function Si(t,n){var r=typeof t;return!!(n=null==n?le:n)&&("number"==r||"symbol"!=r&&ai.test(t))&&t>-1&&t%1==0&&t<n}function rn(t,n,r){if(!Ve(r))return!1;var f=typeof n;return!!("number"==f?cn(r)&&Si(n,r.length):"string"==f&&n in r)&&Xn(r[n],t)}function qs(t,n){if(xe(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!vn(t))||(E.test(t)||!w.test(t)||null!=n&&t in He(n))}function Fs(t){var n=qo(t),r=m[n];if("function"!=typeof r||!(n in Ie.prototype))return!1;if(t===r)return!0;var f=Zs(r);return!!f&&t===f[0]}(ds&&Wt(new ds(new ArrayBuffer(1)))!=jt||Gr&&Wt(new Gr)!=gt||hs&&Wt(hs.resolve())!=ni||Er&&Wt(new Er)!=Re||Wr&&Wt(new Wr)!=Ke)&&(Wt=function(t){var n=nn(t),r=n==Qe?t.constructor:e,f=r?dr(r):"";if(f)switch(f){case fc:return jt;case uc:return gt;case dc:return ni;case hc:return Re;case pc:return Ke}return n});var Uf=go?Oi:ia;function no(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||Tr)}function sl(t){return t==t&&!Ve(t)}function al(t,n){return function(r){return null!=r&&(r[t]===n&&(n!==e||t in He(r)))}}function ll(t,n,r){return n=wt(n===e?t.length-1:n,0),function(){for(var f=arguments,p=-1,y=wt(f.length-n,0),T=D(y);++p<y;)T[p]=f[n+p];p=-1;for(var S=D(n+1);++p<n;)S[p]=f[p];return S[n]=r(T),$t(t,this,S)}}function cl(t,n){return n.length<2?t:fr(t,Ln(n,0,-1))}function Hf(t,n){for(var r=t.length,f=Gt(n.length,r),p=ln(t);f--;){var y=n[f];t[f]=Si(y,r)?p[y]:e}return t}function Bs(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}var fl=dl(ka),io=ic||function(t,n){return Ct.setTimeout(t,n)},Js=dl(df);function ul(t,n,r){var f=n+"";return Js(t,function Nf(t,n){var r=n.length;if(!r)return t;var f=r-1;return n[f]=(r>1?"& ":"")+n[f],n=n.join(r>2?", ":" "),t.replace(ke,"{\n/* [wrapped with "+n+"] */\n")}(f,function $f(t,n){return Qt(qn,function(r){var f="_."+r[0];n&r[1]&&!ir(t,f)&&t.push(f)}),t.sort()}(function If(t){var n=t.match(at);return n?n[1].split(Et):[]}(f),r)))}function dl(t){var n=0,r=0;return function(){var f=ac(),p=16-(f-r);if(r=f,p>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(e,arguments)}}function Bo(t,n){var r=-1,f=t.length,p=f-1;for(n=n===e?f:n;++r<n;){var y=Ts(r,p),T=t[y];t[y]=t[r],t[r]=T}return t.length=n,t}var hl=function qf(t){var n=Qo(t,function(f){return 500===r.size&&r.clear(),f}),r=n.cache;return n}(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(P,function(r,f,p,y){n.push(p?y.replace($n,"$1"):f||r)}),n});function gi(t){if("string"==typeof t||vn(t))return t;var n=t+"";return"0"==n&&1/t==-Yt?"-0":n}function dr(t){if(null!=t){try{return _o.call(t)}catch(n){}try{return t+""}catch(n){}}return""}function pl(t){if(t instanceof Ie)return t.clone();var n=new kn(t.__wrapped__,t.__chain__);return n.__actions__=ln(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var Kf=Me(function(t,n){return ct(t)?Vr(t,qt(n,1,ct,!0)):[]}),Yf=Me(function(t,n){var r=Zn(n);return ct(r)&&(r=e),ct(t)?Vr(t,qt(n,1,ct,!0),ge(r,2)):[]}),jf=Me(function(t,n){var r=Zn(n);return ct(r)&&(r=e),ct(t)?Vr(t,qt(n,1,ct,!0),e,r):[]});function gl(t,n,r){var f=null==t?0:t.length;if(!f)return-1;var p=null==r?0:Ee(r);return p<0&&(p=wt(f+p,0)),br(t,ge(n,3),p)}function _l(t,n,r){var f=null==t?0:t.length;if(!f)return-1;var p=f-1;return r!==e&&(p=Ee(r),p=r<0?wt(f+p,0):Gt(p,f-1)),br(t,ge(n,3),p,!0)}function ml(t){return(null==t?0:t.length)?qt(t,1):[]}function vl(t){return t&&t.length?t[0]:e}var au=Me(function(t){var n=Be(t,Ms);return n.length&&n[0]===t[0]?ys(n):[]}),lu=Me(function(t){var n=Zn(t),r=Be(t,Ms);return n===Zn(r)?n=e:r.pop(),r.length&&r[0]===t[0]?ys(r,ge(n,2)):[]}),cu=Me(function(t){var n=Zn(t),r=Be(t,Ms);return(n="function"==typeof n?n:e)&&r.pop(),r.length&&r[0]===t[0]?ys(r,e,n):[]});function Zn(t){var n=null==t?0:t.length;return n?t[n-1]:e}var hu=Me(yl);function yl(t,n){return t&&t.length&&n&&n.length?xs(t,n):t}var _u=Ai(function(t,n){var r=null==t?0:t.length,f=gs(t,n);return Da(t,Be(n,function(p){return Si(p,r)?+p:p}).sort(Ja)),f});function Hs(t){return null==t?t:cc.call(t)}var Du=Me(function(t){return $i(qt(t,1,ct,!0))}),ku=Me(function(t){var n=Zn(t);return ct(n)&&(n=e),$i(qt(t,1,ct,!0),ge(n,2))}),Nu=Me(function(t){var n=Zn(t);return n="function"==typeof n?n:e,$i(qt(t,1,ct,!0),e,n)});function $s(t){if(!t||!t.length)return[];var n=0;return t=en(t,function(r){if(ct(r))return n=wt(r.length,n),!0}),Hr(n,function(r){return Be(t,xr(r))})}function Cl(t,n){if(!t||!t.length)return[];var r=$s(t);return null==n?r:Be(r,function(f){return $t(n,e,f)})}var Uu=Me(function(t,n){return ct(t)?Vr(t,n):[]}),qu=Me(function(t){return Os(en(t,ct))}),Fu=Me(function(t){var n=Zn(t);return ct(n)&&(n=e),Os(en(t,ct),ge(n,2))}),Bu=Me(function(t){var n=Zn(t);return n="function"==typeof n?n:e,Os(en(t,ct),e,n)}),Ju=Me($s);var Qu=Me(function(t){var n=t.length,r=n>1?t[n-1]:e;return r="function"==typeof r?(t.pop(),r):e,Cl(t,r)});function bl(t){var n=m(t);return n.__chain__=!0,n}function Jo(t,n){return n(t)}var Wu=Ai(function(t){var n=t.length,r=n?t[0]:0,f=this.__wrapped__,p=function(y){return gs(y,t)};return!(n>1||this.__actions__.length)&&f instanceof Ie&&Si(r)?((f=f.slice(r,+r+(n?1:0))).__actions__.push({func:Jo,args:[p],thisArg:e}),new kn(f,this.__chain__).thru(function(y){return n&&!y.length&&y.push(e),y})):this.thru(p)});var td=No(function(t,n,r){Fe.call(t,r)?++t[r]:Ti(t,r,1)});var rd=Ka(gl),od=Ka(_l);function wl(t,n){return(xe(t)?Qt:Hi)(t,ge(n,3))}function xl(t,n){return(xe(t)?os:ya)(t,ge(n,3))}var cd=No(function(t,n,r){Fe.call(t,r)?t[r].push(n):Ti(t,r,[n])});var ud=Me(function(t,n,r){var f=-1,p="function"==typeof n,y=cn(t)?D(t.length):[];return Hi(t,function(T){y[++f]=p?$t(n,T,r):zr(T,n,r)}),y}),dd=No(function(t,n,r){Ti(t,r,n)});function Ho(t,n){return(xe(t)?Be:Aa)(t,ge(n,3))}var pd=No(function(t,n,r){t[r?0:1].push(n)},function(){return[[],[]]});var xd=Me(function(t,n){if(null==t)return[];var r=n.length;return r>1&&rn(t,n[0],n[1])?n=[]:r>2&&rn(n[0],n[1],n[2])&&(n=[n[0]]),Pa(t,qt(n,1),[])}),$o=nc||function(){return Ct.Date.now()};function Tl(t,n,r){return n=r?e:n,n=t&&null==n?t.length:n,Ei(t,ht,e,e,e,e,n)}function El(t,n){var r;if("function"!=typeof n)throw new Dn(ce);return t=Ee(t),function(){return--t>0&&(r=n.apply(this,arguments)),t<=1&&(n=e),r}}var Qs=Me(function(t,n,r){var f=1;if(r.length){var p=$(r,Pr(Qs));f|=32}return Ei(t,f,n,r,p)}),Al=Me(function(t,n,r){var f=3;if(r.length){var p=$(r,Pr(Al));f|=32}return Ei(n,f,t,r,p)});function Ml(t,n,r){var f,p,y,T,S,M,q=0,B=!1,W=!1,X=!0;if("function"!=typeof t)throw new Dn(ce);function ae(ft){var ei=f,Pi=p;return f=p=e,q=ft,T=t.apply(Pi,ei)}function _e(ft){return q=ft,S=io(Pe,n),B?ae(ft):T}function me(ft){var ei=ft-M;return M===e||ei>=n||ei<0||W&&ft-q>=y}function Pe(){var ft=$o();if(me(ft))return De(ft);S=io(Pe,function Ae(ft){var Kl=n-(ft-M);return W?Gt(Kl,y-(ft-q)):Kl}(ft))}function De(ft){return S=e,X&&f?ae(ft):(f=p=e,T)}function Cn(){var ft=$o(),ei=me(ft);if(f=arguments,p=this,M=ft,ei){if(S===e)return _e(M);if(W)return qa(S),S=io(Pe,n),ae(M)}return S===e&&(S=io(Pe,n)),T}return n=Rn(n)||0,Ve(r)&&(B=!!r.leading,y=(W="maxWait"in r)?wt(Rn(r.maxWait)||0,n):y,X="trailing"in r?!!r.trailing:X),Cn.cancel=function yn(){S!==e&&qa(S),q=0,f=M=p=S=e},Cn.flush=function on(){return S===e?T:De($o())},Cn}var Ed=Me(function(t,n){return va(t,1,n)}),Ad=Me(function(t,n,r){return va(t,Rn(n)||0,r)});function Qo(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new Dn(ce);var r=function(){var f=arguments,p=n?n.apply(this,f):f[0],y=r.cache;if(y.has(p))return y.get(p);var T=t.apply(this,f);return r.cache=y.set(p,T)||y,T};return r.cache=new(Qo.Cache||xi),r}function Go(t){if("function"!=typeof t)throw new Dn(ce);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}Qo.Cache=xi;var Md=gf(function(t,n){var r=(n=1==n.length&&xe(n[0])?Be(n[0],tn(ge())):Be(qt(n,1),tn(ge()))).length;return Me(function(f){for(var p=-1,y=Gt(f.length,r);++p<y;)f[p]=n[p].call(this,f[p]);return $t(t,this,f)})}),Gs=Me(function(t,n){var r=$(n,Pr(Gs));return Ei(t,32,e,n,r)}),Pl=Me(function(t,n){var r=$(n,Pr(Pl));return Ei(t,64,e,n,r)}),Pd=Ai(function(t,n){return Ei(t,256,e,e,e,n)});function Xn(t,n){return t===n||t!=t&&n!=n}var Jd=Uo(vs),Hd=Uo(function(t,n){return t>=n}),hr=xa(function(){return arguments}())?xa:function(t){return it(t)&&Fe.call(t,"callee")&&!ca.call(t,"callee")},xe=D.isArray,$d=Ur?tn(Ur):function Vc(t){return it(t)&&nn(t)==We};function cn(t){return null!=t&&Wo(t.length)&&!Oi(t)}function ct(t){return it(t)&&cn(t)}var Wi=rc||ia,Gd=lo?tn(lo):function zc(t){return it(t)&&nn(t)==Xe};function Ws(t){if(!it(t))return!1;var n=nn(t);return n==Nt||"[object DOMException]"==n||"string"==typeof t.message&&"string"==typeof t.name&&!ro(t)}function Oi(t){if(!Ve(t))return!1;var n=nn(t);return n==Fn||n==Lt||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Il(t){return"number"==typeof t&&t==Ee(t)}function Wo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=le}function Ve(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function it(t){return null!=t&&"object"==typeof t}var Dl=ns?tn(ns):function ef(t){return it(t)&&Wt(t)==gt};function kl(t){return"number"==typeof t||it(t)&&nn(t)==_t}function ro(t){if(!it(t)||nn(t)!=Qe)return!1;var n=Co(t);if(null===n)return!0;var r=Fe.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&_o.call(r)==zl}var Ks=is?tn(is):function tf(t){return it(t)&&nn(t)==et};var Nl=rs?tn(rs):function nf(t){return it(t)&&Wt(t)==Re};function Ko(t){return"string"==typeof t||!xe(t)&&it(t)&&nn(t)==mt}function vn(t){return"symbol"==typeof t||it(t)&&nn(t)==Jt}var Ir=co?tn(co):function rf(t){return it(t)&&Wo(t.length)&&!!Je[nn(t)]};var lh=Uo(ws),ch=Uo(function(t,n){return t<=n});function Ll(t){if(!t)return[];if(cn(t))return Ko(t)?V(t):ln(t);if(Qr&&t[Qr])return function A(O){for(var R,D=[];!(R=O.next()).done;)D.push(R.value);return D}(t[Qr]());var n=Wt(t);return(n==gt?I:n==Re?F:Dr)(t)}function Mi(t){return t?(t=Rn(t))===Yt||t===-Yt?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Ee(t){var n=Mi(t),r=n%1;return n==n?r?n-r:n:0}function Zl(t){return t?cr(Ee(t),0,ze):0}function Rn(t){if("number"==typeof t)return t;if(vn(t))return NaN;if(Ve(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=Ve(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=ls(t);var r=si.test(t);return r||Qn.test(t)?es(t.slice(2),r?2:8):oi.test(t)?NaN:+t}function Rl(t){return pi(t,fn(t))}function Ze(t){return null==t?"":mn(t)}var uh=Or(function(t,n){if(no(n)||cn(n))pi(n,Mt(n),t);else for(var r in n)Fe.call(n,r)&&jr(t,r,n[r])}),Ul=Or(function(t,n){pi(n,fn(n),t)}),Yo=Or(function(t,n,r,f){pi(n,fn(n),t,f)}),dh=Or(function(t,n,r,f){pi(n,Mt(n),t,f)}),hh=Ai(gs);var gh=Me(function(t,n){t=He(t);var r=-1,f=n.length,p=f>2?n[2]:e;for(p&&rn(n[0],n[1],p)&&(f=1);++r<f;)for(var y=n[r],T=fn(y),S=-1,M=T.length;++S<M;){var q=T[S],B=t[q];(B===e||Xn(B,Tr[q])&&!Fe.call(t,q))&&(t[q]=y[q])}return t}),_h=Me(function(t){return t.push(e,tl),$t(ql,e,t)});function Ys(t,n,r){var f=null==t?e:fr(t,n);return f===e?r:f}function js(t,n){return null!=t&&rl(t,n,Kc)}var Ah=ja(function(t,n,r){null!=n&&"function"!=typeof n.toString&&(n=mo.call(n)),t[n]=r},zs(un)),Sh=ja(function(t,n,r){null!=n&&"function"!=typeof n.toString&&(n=mo.call(n)),Fe.call(t,n)?t[n].push(r):t[n]=[r]},ge),Oh=Me(zr);function Mt(t){return cn(t)?pa(t):bs(t)}function fn(t){return cn(t)?pa(t,!0):of(t)}var Ih=Or(function(t,n,r){Io(t,n,r)}),ql=Or(function(t,n,r,f){Io(t,n,r,f)}),Dh=Ai(function(t,n){var r={};if(null==t)return r;var f=!1;n=Be(n,function(y){return y=Qi(y,t),f||(f=y.length>1),y}),pi(t,Ls(t),r),f&&(r=Nn(r,7,Af));for(var p=n.length;p--;)Ss(r,n[p]);return r});var Nh=Ai(function(t,n){return null==t?{}:function af(t,n){return Ia(t,n,function(r,f){return js(t,f)})}(t,n)});function Fl(t,n){if(null==t)return{};var r=Be(Ls(t),function(f){return[f]});return n=ge(n),Ia(t,r,function(f,p){return n(f,p[0])})}var Bl=Xa(Mt),Jl=Xa(fn);function Dr(t){return null==t?[]:$r(t,Mt(t))}var Gh=Mr(function(t,n,r){return n=n.toLowerCase(),t+(r?Hl(n):n)});function Hl(t){return Vs(Ze(t).toLowerCase())}function $l(t){return(t=Ze(t))&&t.replace(Gn,o).replace(tt,"")}var jh=Mr(function(t,n,r){return t+(r?"-":"")+n.toLowerCase()}),Vh=Mr(function(t,n,r){return t+(r?" ":"")+n.toLowerCase()}),zh=Wa("toLowerCase");var op=Mr(function(t,n,r){return t+(r?"_":"")+n.toLowerCase()});var ap=Mr(function(t,n,r){return t+(r?" ":"")+Vs(n)});var mp=Mr(function(t,n,r){return t+(r?" ":"")+n.toUpperCase()}),Vs=Wa("toUpperCase");function Ql(t,n,r){return t=Ze(t),(n=r?e:n)===e?function x(O){return tr.test(O)}(t)?function qe(O){return O.match(je)||[]}(t):function an(O){return O.match(At)||[]}(t):t.match(n)||[]}var Gl=Me(function(t,n){try{return $t(t,e,n)}catch(r){return Ws(r)?r:new we(r)}}),vp=Ai(function(t,n){return Qt(n,function(r){r=gi(r),Ti(t,r,Qs(t[r],t))}),t});function zs(t){return function(){return t}}var wp=Ya(),xp=Ya(!0);function un(t){return t}function Xs(t){return Ea("function"==typeof t?t:Nn(t,1))}var Ap=Me(function(t,n){return function(r){return zr(r,t,n)}}),Sp=Me(function(t,n){return function(r){return zr(t,r,n)}});function ea(t,n,r){var f=Mt(n),p=Po(n,f);null==r&&(!Ve(n)||!p.length&&f.length)&&(r=n,n=t,t=this,p=Po(n,Mt(n)));var y=!(Ve(r)&&"chain"in r&&!r.chain),T=Oi(t);return Qt(p,function(S){var M=n[S];t[S]=M,T&&(t.prototype[S]=function(){var q=this.__chain__;if(y||q){var B=t(this.__wrapped__),W=B.__actions__=ln(this.__actions__);return W.push({func:M,args:arguments,thisArg:t}),B.__chain__=q,B}return M.apply(t,In([this.value()],arguments))})}),t}function ta(){}var Pp=Ds(Be),Ip=Ds(Fr),Dp=Ds(fo);function Wl(t){return qs(t)?xr(gi(t)):function lf(t){return function(n){return fr(n,t)}}(t)}var Np=Va(),Lp=Va(!0);function na(){return[]}function ia(){return!1}var Jp=Zo(function(t,n){return t+n},0),Hp=ks("ceil"),$p=Zo(function(t,n){return t/n},1),Qp=ks("floor");var zp=Zo(function(t,n){return t*n},1),Xp=ks("round"),eg=Zo(function(t,n){return t-n},0);return m.after=function Td(t,n){if("function"!=typeof n)throw new Dn(ce);return t=Ee(t),function(){if(--t<1)return n.apply(this,arguments)}},m.ary=Tl,m.assign=uh,m.assignIn=Ul,m.assignInWith=Yo,m.assignWith=dh,m.at=hh,m.before=El,m.bind=Qs,m.bindAll=vp,m.bindKey=Al,m.castArray=function Zd(){if(!arguments.length)return[];var t=arguments[0];return xe(t)?t:[t]},m.chain=bl,m.chunk=function Qf(t,n,r){n=(r?rn(t,n,r):n===e)?1:wt(Ee(n),0);var f=null==t?0:t.length;if(!f||n<1)return[];for(var p=0,y=0,T=D(xo(f/n));p<f;)T[y++]=Ln(t,p,p+=n);return T},m.compact=function Gf(t){for(var n=-1,r=null==t?0:t.length,f=0,p=[];++n<r;){var y=t[n];y&&(p[f++]=y)}return p},m.concat=function Wf(){var t=arguments.length;if(!t)return[];for(var n=D(t-1),r=arguments[0],f=t;f--;)n[f-1]=arguments[f];return In(xe(r)?ln(r):[r],qt(n,1))},m.cond=function yp(t){var n=null==t?0:t.length,r=ge();return t=n?Be(t,function(f){if("function"!=typeof f[1])throw new Dn(ce);return[r(f[0]),f[1]]}):[],Me(function(f){for(var p=-1;++p<n;){var y=t[p];if($t(y[0],this,f))return $t(y[1],this,f)}})},m.conforms=function Cp(t){return function $c(t){var n=Mt(t);return function(r){return ma(r,t,n)}}(Nn(t,1))},m.constant=zs,m.countBy=td,m.create=function ph(t,n){var r=Sr(t);return null==n?r:_a(r,n)},m.curry=function Sl(t,n,r){var f=Ei(t,8,e,e,e,e,e,n=r?e:n);return f.placeholder=Sl.placeholder,f},m.curryRight=function Ol(t,n,r){var f=Ei(t,16,e,e,e,e,e,n=r?e:n);return f.placeholder=Ol.placeholder,f},m.debounce=Ml,m.defaults=gh,m.defaultsDeep=_h,m.defer=Ed,m.delay=Ad,m.difference=Kf,m.differenceBy=Yf,m.differenceWith=jf,m.drop=function Vf(t,n,r){var f=null==t?0:t.length;return f?Ln(t,(n=r||n===e?1:Ee(n))<0?0:n,f):[]},m.dropRight=function zf(t,n,r){var f=null==t?0:t.length;return f?Ln(t,0,(n=f-(n=r||n===e?1:Ee(n)))<0?0:n):[]},m.dropRightWhile=function Xf(t,n){return t&&t.length?ko(t,ge(n,3),!0,!0):[]},m.dropWhile=function eu(t,n){return t&&t.length?ko(t,ge(n,3),!0):[]},m.fill=function tu(t,n,r,f){var p=null==t?0:t.length;return p?(r&&"number"!=typeof r&&rn(t,n,r)&&(r=0,f=p),function Gc(t,n,r,f){var p=t.length;for((r=Ee(r))<0&&(r=-r>p?0:p+r),(f=f===e||f>p?p:Ee(f))<0&&(f+=p),f=r>f?0:Zl(f);r<f;)t[r++]=n;return t}(t,n,r,f)):[]},m.filter=function id(t,n){return(xe(t)?en:Ca)(t,ge(n,3))},m.flatMap=function sd(t,n){return qt(Ho(t,n),1)},m.flatMapDeep=function ad(t,n){return qt(Ho(t,n),Yt)},m.flatMapDepth=function ld(t,n,r){return r=r===e?1:Ee(r),qt(Ho(t,n),r)},m.flatten=ml,m.flattenDeep=function nu(t){return(null==t?0:t.length)?qt(t,Yt):[]},m.flattenDepth=function iu(t,n){return(null==t?0:t.length)?qt(t,n=n===e?1:Ee(n)):[]},m.flip=function Sd(t){return Ei(t,512)},m.flow=wp,m.flowRight=xp,m.fromPairs=function ru(t){for(var n=-1,r=null==t?0:t.length,f={};++n<r;){var p=t[n];f[p[0]]=p[1]}return f},m.functions=function xh(t){return null==t?[]:Po(t,Mt(t))},m.functionsIn=function Th(t){return null==t?[]:Po(t,fn(t))},m.groupBy=cd,m.initial=function su(t){return(null==t?0:t.length)?Ln(t,0,-1):[]},m.intersection=au,m.intersectionBy=lu,m.intersectionWith=cu,m.invert=Ah,m.invertBy=Sh,m.invokeMap=ud,m.iteratee=Xs,m.keyBy=dd,m.keys=Mt,m.keysIn=fn,m.map=Ho,m.mapKeys=function Mh(t,n){var r={};return n=ge(n,3),hi(t,function(f,p,y){Ti(r,n(f,p,y),f)}),r},m.mapValues=function Ph(t,n){var r={};return n=ge(n,3),hi(t,function(f,p,y){Ti(r,p,n(f,p,y))}),r},m.matches=function Tp(t){return Sa(Nn(t,1))},m.matchesProperty=function Ep(t,n){return Oa(t,Nn(n,1))},m.memoize=Qo,m.merge=Ih,m.mergeWith=ql,m.method=Ap,m.methodOf=Sp,m.mixin=ea,m.negate=Go,m.nthArg=function Mp(t){return t=Ee(t),Me(function(n){return Ma(n,t)})},m.omit=Dh,m.omitBy=function kh(t,n){return Fl(t,Go(ge(n)))},m.once=function Od(t){return El(2,t)},m.orderBy=function hd(t,n,r,f){return null==t?[]:(xe(n)||(n=null==n?[]:[n]),xe(r=f?e:r)||(r=null==r?[]:[r]),Pa(t,n,r))},m.over=Pp,m.overArgs=Md,m.overEvery=Ip,m.overSome=Dp,m.partial=Gs,m.partialRight=Pl,m.partition=pd,m.pick=Nh,m.pickBy=Fl,m.property=Wl,m.propertyOf=function kp(t){return function(n){return null==t?e:fr(t,n)}},m.pull=hu,m.pullAll=yl,m.pullAllBy=function pu(t,n,r){return t&&t.length&&n&&n.length?xs(t,n,ge(r,2)):t},m.pullAllWith=function gu(t,n,r){return t&&t.length&&n&&n.length?xs(t,n,e,r):t},m.pullAt=_u,m.range=Np,m.rangeRight=Lp,m.rearg=Pd,m.reject=function md(t,n){return(xe(t)?en:Ca)(t,Go(ge(n,3)))},m.remove=function mu(t,n){var r=[];if(!t||!t.length)return r;var f=-1,p=[],y=t.length;for(n=ge(n,3);++f<y;){var T=t[f];n(T,f,t)&&(r.push(T),p.push(f))}return Da(t,p),r},m.rest=function Id(t,n){if("function"!=typeof t)throw new Dn(ce);return Me(t,n=n===e?n:Ee(n))},m.reverse=Hs,m.sampleSize=function yd(t,n,r){return n=(r?rn(t,n,r):n===e)?1:Ee(n),(xe(t)?Fc:uf)(t,n)},m.set=function Zh(t,n,r){return null==t?t:eo(t,n,r)},m.setWith=function Rh(t,n,r,f){return f="function"==typeof f?f:e,null==t?t:eo(t,n,r,f)},m.shuffle=function Cd(t){return(xe(t)?Bc:hf)(t)},m.slice=function vu(t,n,r){var f=null==t?0:t.length;return f?(r&&"number"!=typeof r&&rn(t,n,r)?(n=0,r=f):(n=null==n?0:Ee(n),r=r===e?f:Ee(r)),Ln(t,n,r)):[]},m.sortBy=xd,m.sortedUniq=function Eu(t){return t&&t.length?Na(t):[]},m.sortedUniqBy=function Au(t,n){return t&&t.length?Na(t,ge(n,2)):[]},m.split=function sp(t,n,r){return r&&"number"!=typeof r&&rn(t,n,r)&&(n=r=e),(r=r===e?ze:r>>>0)?(t=Ze(t))&&("string"==typeof n||null!=n&&!Ks(n))&&(!(n=mn(n))&&g(t))?Gi(V(t),0,r):t.split(n,r):[]},m.spread=function Dd(t,n){if("function"!=typeof t)throw new Dn(ce);return n=null==n?0:wt(Ee(n),0),Me(function(r){var f=r[n],p=Gi(r,0,n);return f&&In(p,f),$t(t,this,p)})},m.tail=function Su(t){var n=null==t?0:t.length;return n?Ln(t,1,n):[]},m.take=function Ou(t,n,r){return t&&t.length?Ln(t,0,(n=r||n===e?1:Ee(n))<0?0:n):[]},m.takeRight=function Mu(t,n,r){var f=null==t?0:t.length;return f?Ln(t,(n=f-(n=r||n===e?1:Ee(n)))<0?0:n,f):[]},m.takeRightWhile=function Pu(t,n){return t&&t.length?ko(t,ge(n,3),!1,!0):[]},m.takeWhile=function Iu(t,n){return t&&t.length?ko(t,ge(n,3)):[]},m.tap=function Gu(t,n){return n(t),t},m.throttle=function kd(t,n,r){var f=!0,p=!0;if("function"!=typeof t)throw new Dn(ce);return Ve(r)&&(f="leading"in r?!!r.leading:f,p="trailing"in r?!!r.trailing:p),Ml(t,n,{leading:f,maxWait:n,trailing:p})},m.thru=Jo,m.toArray=Ll,m.toPairs=Bl,m.toPairsIn=Jl,m.toPath=function Fp(t){return xe(t)?Be(t,gi):vn(t)?[t]:ln(hl(Ze(t)))},m.toPlainObject=Rl,m.transform=function Uh(t,n,r){var f=xe(t),p=f||Wi(t)||Ir(t);if(n=ge(n,4),null==r){var y=t&&t.constructor;r=p?f?new y:[]:Ve(t)&&Oi(y)?Sr(Co(t)):{}}return(p?Qt:hi)(t,function(T,S,M){return n(r,T,S,M)}),r},m.unary=function Nd(t){return Tl(t,1)},m.union=Du,m.unionBy=ku,m.unionWith=Nu,m.uniq=function Lu(t){return t&&t.length?$i(t):[]},m.uniqBy=function Zu(t,n){return t&&t.length?$i(t,ge(n,2)):[]},m.uniqWith=function Ru(t,n){return n="function"==typeof n?n:e,t&&t.length?$i(t,e,n):[]},m.unset=function qh(t,n){return null==t||Ss(t,n)},m.unzip=$s,m.unzipWith=Cl,m.update=function Fh(t,n,r){return null==t?t:Za(t,n,Ps(r))},m.updateWith=function Bh(t,n,r,f){return f="function"==typeof f?f:e,null==t?t:Za(t,n,Ps(r),f)},m.values=Dr,m.valuesIn=function Jh(t){return null==t?[]:$r(t,fn(t))},m.without=Uu,m.words=Ql,m.wrap=function Ld(t,n){return Gs(Ps(n),t)},m.xor=qu,m.xorBy=Fu,m.xorWith=Bu,m.zip=Ju,m.zipObject=function Hu(t,n){return Ua(t||[],n||[],jr)},m.zipObjectDeep=function $u(t,n){return Ua(t||[],n||[],eo)},m.zipWith=Qu,m.entries=Bl,m.entriesIn=Jl,m.extend=Ul,m.extendWith=Yo,ea(m,m),m.add=Jp,m.attempt=Gl,m.camelCase=Gh,m.capitalize=Hl,m.ceil=Hp,m.clamp=function Hh(t,n,r){return r===e&&(r=n,n=e),r!==e&&(r=(r=Rn(r))==r?r:0),n!==e&&(n=(n=Rn(n))==n?n:0),cr(Rn(t),n,r)},m.clone=function Rd(t){return Nn(t,4)},m.cloneDeep=function qd(t){return Nn(t,5)},m.cloneDeepWith=function Fd(t,n){return Nn(t,5,n="function"==typeof n?n:e)},m.cloneWith=function Ud(t,n){return Nn(t,4,n="function"==typeof n?n:e)},m.conformsTo=function Bd(t,n){return null==n||ma(t,n,Mt(n))},m.deburr=$l,m.defaultTo=function bp(t,n){return null==t||t!=t?n:t},m.divide=$p,m.endsWith=function Wh(t,n,r){t=Ze(t),n=mn(n);var f=t.length,p=r=r===e?f:cr(Ee(r),0,f);return(r-=n.length)>=0&&t.slice(r,p)==n},m.eq=Xn,m.escape=function Kh(t){return(t=Ze(t))&&sn.test(t)?t.replace(On,a):t},m.escapeRegExp=function Yh(t){return(t=Ze(t))&&Q.test(t)?t.replace(N,"\\$&"):t},m.every=function nd(t,n,r){var f=xe(t)?Fr:Qc;return r&&rn(t,n,r)&&(n=e),f(t,ge(n,3))},m.find=rd,m.findIndex=gl,m.findKey=function mh(t,n){return Br(t,ge(n,3),hi)},m.findLast=od,m.findLastIndex=_l,m.findLastKey=function vh(t,n){return Br(t,ge(n,3),ms)},m.floor=Qp,m.forEach=wl,m.forEachRight=xl,m.forIn=function yh(t,n){return null==t?t:_s(t,ge(n,3),fn)},m.forInRight=function Ch(t,n){return null==t?t:ba(t,ge(n,3),fn)},m.forOwn=function bh(t,n){return t&&hi(t,ge(n,3))},m.forOwnRight=function wh(t,n){return t&&ms(t,ge(n,3))},m.get=Ys,m.gt=Jd,m.gte=Hd,m.has=function Eh(t,n){return null!=t&&rl(t,n,Wc)},m.hasIn=js,m.head=vl,m.identity=un,m.includes=function fd(t,n,r,f){t=cn(t)?t:Dr(t),r=r&&!f?Ee(r):0;var p=t.length;return r<0&&(r=wt(p+r,0)),Ko(t)?r<=p&&t.indexOf(n,r)>-1:!!p&&ui(t,n,r)>-1},m.indexOf=function ou(t,n,r){var f=null==t?0:t.length;if(!f)return-1;var p=null==r?0:Ee(r);return p<0&&(p=wt(f+p,0)),ui(t,n,p)},m.inRange=function $h(t,n,r){return n=Mi(n),r===e?(r=n,n=0):r=Mi(r),function Yc(t,n,r){return t>=Gt(n,r)&&t<wt(n,r)}(t=Rn(t),n,r)},m.invoke=Oh,m.isArguments=hr,m.isArray=xe,m.isArrayBuffer=$d,m.isArrayLike=cn,m.isArrayLikeObject=ct,m.isBoolean=function Qd(t){return!0===t||!1===t||it(t)&&nn(t)==Tt},m.isBuffer=Wi,m.isDate=Gd,m.isElement=function Wd(t){return it(t)&&1===t.nodeType&&!ro(t)},m.isEmpty=function Kd(t){if(null==t)return!0;if(cn(t)&&(xe(t)||"string"==typeof t||"function"==typeof t.splice||Wi(t)||Ir(t)||hr(t)))return!t.length;var n=Wt(t);if(n==gt||n==Re)return!t.size;if(no(t))return!bs(t).length;for(var r in t)if(Fe.call(t,r))return!1;return!0},m.isEqual=function Yd(t,n){return Xr(t,n)},m.isEqualWith=function jd(t,n,r){var f=(r="function"==typeof r?r:e)?r(t,n):e;return f===e?Xr(t,n,e,r):!!f},m.isError=Ws,m.isFinite=function Vd(t){return"number"==typeof t&&ua(t)},m.isFunction=Oi,m.isInteger=Il,m.isLength=Wo,m.isMap=Dl,m.isMatch=function zd(t,n){return t===n||Cs(t,n,Rs(n))},m.isMatchWith=function Xd(t,n,r){return r="function"==typeof r?r:e,Cs(t,n,Rs(n),r)},m.isNaN=function eh(t){return kl(t)&&t!=+t},m.isNative=function th(t){if(Uf(t))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ta(t)},m.isNil=function ih(t){return null==t},m.isNull=function nh(t){return null===t},m.isNumber=kl,m.isObject=Ve,m.isObjectLike=it,m.isPlainObject=ro,m.isRegExp=Ks,m.isSafeInteger=function rh(t){return Il(t)&&t>=-le&&t<=le},m.isSet=Nl,m.isString=Ko,m.isSymbol=vn,m.isTypedArray=Ir,m.isUndefined=function oh(t){return t===e},m.isWeakMap=function sh(t){return it(t)&&Wt(t)==Ke},m.isWeakSet=function ah(t){return it(t)&&"[object WeakSet]"==nn(t)},m.join=function fu(t,n){return null==t?"":oc.call(t,n)},m.kebabCase=jh,m.last=Zn,m.lastIndexOf=function uu(t,n,r){var f=null==t?0:t.length;if(!f)return-1;var p=f;return r!==e&&(p=(p=Ee(r))<0?wt(f+p,0):Gt(p,f-1)),n==n?function G(O,R,D){for(var ne=D+1;ne--;)if(O[ne]===R)return ne;return ne}(t,n,p):br(t,_n,p,!0)},m.lowerCase=Vh,m.lowerFirst=zh,m.lt=lh,m.lte=ch,m.max=function Gp(t){return t&&t.length?Mo(t,un,vs):e},m.maxBy=function Wp(t,n){return t&&t.length?Mo(t,ge(n,2),vs):e},m.mean=function Kp(t){return wr(t,un)},m.meanBy=function Yp(t,n){return wr(t,ge(n,2))},m.min=function jp(t){return t&&t.length?Mo(t,un,ws):e},m.minBy=function Vp(t,n){return t&&t.length?Mo(t,ge(n,2),ws):e},m.stubArray=na,m.stubFalse=ia,m.stubObject=function Zp(){return{}},m.stubString=function Rp(){return""},m.stubTrue=function Up(){return!0},m.multiply=zp,m.nth=function du(t,n){return t&&t.length?Ma(t,Ee(n)):e},m.noConflict=function Op(){return Ct._===this&&(Ct._=Xl),this},m.noop=ta,m.now=$o,m.pad=function Xh(t,n,r){t=Ze(t);var f=(n=Ee(n))?z(t):0;if(!n||f>=n)return t;var p=(n-f)/2;return Ro(To(p),r)+t+Ro(xo(p),r)},m.padEnd=function ep(t,n,r){t=Ze(t);var f=(n=Ee(n))?z(t):0;return n&&f<n?t+Ro(n-f,r):t},m.padStart=function tp(t,n,r){t=Ze(t);var f=(n=Ee(n))?z(t):0;return n&&f<n?Ro(n-f,r)+t:t},m.parseInt=function np(t,n,r){return r||null==n?n=0:n&&(n=+n),lc(Ze(t).replace(te,""),n||0)},m.random=function Qh(t,n,r){if(r&&"boolean"!=typeof r&&rn(t,n,r)&&(n=r=e),r===e&&("boolean"==typeof n?(r=n,n=e):"boolean"==typeof t&&(r=t,t=e)),t===e&&n===e?(t=0,n=1):(t=Mi(t),n===e?(n=t,t=0):n=Mi(n)),t>n){var f=t;t=n,n=f}if(r||t%1||n%1){var p=da();return Gt(t+p*(n-t+oo("1e-"+((p+"").length-1))),n)}return Ts(t,n)},m.reduce=function gd(t,n,r){var f=xe(t)?qi:Bi,p=arguments.length<3;return f(t,ge(n,4),r,p,Hi)},m.reduceRight=function _d(t,n,r){var f=xe(t)?ra:Bi,p=arguments.length<3;return f(t,ge(n,4),r,p,ya)},m.repeat=function ip(t,n,r){return n=(r?rn(t,n,r):n===e)?1:Ee(n),Es(Ze(t),n)},m.replace=function rp(){var t=arguments,n=Ze(t[0]);return t.length<3?n:n.replace(t[1],t[2])},m.result=function Lh(t,n,r){var f=-1,p=(n=Qi(n,t)).length;for(p||(p=1,t=e);++f<p;){var y=null==t?e:t[gi(n[f])];y===e&&(f=p,y=r),t=Oi(y)?y.call(t):y}return t},m.round=Xp,m.runInContext=O,m.sample=function vd(t){return(xe(t)?ga:ff)(t)},m.size=function bd(t){if(null==t)return 0;if(cn(t))return Ko(t)?z(t):t.length;var n=Wt(t);return n==gt||n==Re?t.size:bs(t).length},m.snakeCase=op,m.some=function wd(t,n,r){var f=xe(t)?fo:pf;return r&&rn(t,n,r)&&(n=e),f(t,ge(n,3))},m.sortedIndex=function yu(t,n){return Do(t,n)},m.sortedIndexBy=function Cu(t,n,r){return As(t,n,ge(r,2))},m.sortedIndexOf=function bu(t,n){var r=null==t?0:t.length;if(r){var f=Do(t,n);if(f<r&&Xn(t[f],n))return f}return-1},m.sortedLastIndex=function wu(t,n){return Do(t,n,!0)},m.sortedLastIndexBy=function xu(t,n,r){return As(t,n,ge(r,2),!0)},m.sortedLastIndexOf=function Tu(t,n){if(null==t?0:t.length){var f=Do(t,n,!0)-1;if(Xn(t[f],n))return f}return-1},m.startCase=ap,m.startsWith=function lp(t,n,r){return t=Ze(t),r=null==r?0:cr(Ee(r),0,t.length),n=mn(n),t.slice(r,r+n.length)==n},m.subtract=eg,m.sum=function tg(t){return t&&t.length?Jr(t,un):0},m.sumBy=function ng(t,n){return t&&t.length?Jr(t,ge(n,2)):0},m.template=function cp(t,n,r){var f=m.templateSettings;r&&rn(t,n,r)&&(n=e),t=Ze(t),n=Yo({},n,f,el);var S,M,p=Yo({},n.imports,f.imports,el),y=Mt(p),T=$r(p,y),q=0,B=n.interpolate||lt,W="__p += '",X=fs((n.escape||lt).source+"|"+B.source+"|"+(B===_?St:lt).source+"|"+(n.evaluate||lt).source+"|$","g"),ae="//# sourceURL="+(Fe.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Cr+"]")+"\n";t.replace(X,function(me,Pe,De,yn,on,Cn){return De||(De=yn),W+=t.slice(q,Cn).replace(Ni,c),Pe&&(S=!0,W+="' +\n__e("+Pe+") +\n'"),on&&(M=!0,W+="';\n"+on+";\n__p += '"),De&&(W+="' +\n((__t = ("+De+")) == null ? '' : __t) +\n'"),q=Cn+me.length,me}),W+="';\n";var _e=Fe.call(n,"variable")&&n.variable;if(_e){if(yt.test(_e))throw new we("Invalid `variable` option passed into `_.template`")}else W="with (obj) {\n"+W+"\n}\n";W=(M?W.replace(Di,""):W).replace(Ht,"$1").replace(gn,"$1;"),W="function("+(_e||"obj")+") {\n"+(_e?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(S?", __e = _.escape":"")+(M?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+W+"return __p\n}";var Ae=Gl(function(){return Ne(y,ae+"return "+W).apply(e,T)});if(Ae.source=W,Ws(Ae))throw Ae;return Ae},m.times=function qp(t,n){if((t=Ee(t))<1||t>le)return[];var r=ze,f=Gt(t,ze);n=ge(n),t-=ze;for(var p=Hr(f,n);++r<t;)n(r);return p},m.toFinite=Mi,m.toInteger=Ee,m.toLength=Zl,m.toLower=function fp(t){return Ze(t).toLowerCase()},m.toNumber=Rn,m.toSafeInteger=function fh(t){return t?cr(Ee(t),-le,le):0===t?t:0},m.toString=Ze,m.toUpper=function up(t){return Ze(t).toUpperCase()},m.trim=function dp(t,n,r){if((t=Ze(t))&&(r||n===e))return ls(t);if(!t||!(n=mn(n)))return t;var f=V(t),p=V(n);return Gi(f,cs(f,p),s(f,p)+1).join("")},m.trimEnd=function hp(t,n,r){if((t=Ze(t))&&(r||n===e))return t.slice(0,fe(t)+1);if(!t||!(n=mn(n)))return t;var f=V(t);return Gi(f,0,s(f,V(n))+1).join("")},m.trimStart=function pp(t,n,r){if((t=Ze(t))&&(r||n===e))return t.replace(te,"");if(!t||!(n=mn(n)))return t;var f=V(t);return Gi(f,cs(f,V(n))).join("")},m.truncate=function gp(t,n){var r=30,f="...";if(Ve(n)){var p="separator"in n?n.separator:p;r="length"in n?Ee(n.length):r,f="omission"in n?mn(n.omission):f}var y=(t=Ze(t)).length;if(g(t)){var T=V(t);y=T.length}if(r>=y)return t;var S=r-z(f);if(S<1)return f;var M=T?Gi(T,0,S).join(""):t.slice(0,S);if(p===e)return M+f;if(T&&(S+=M.length-S),Ks(p)){if(t.slice(S).search(p)){var q,B=M;for(p.global||(p=fs(p.source,Ze(ki.exec(p))+"g")),p.lastIndex=0;q=p.exec(B);)var W=q.index;M=M.slice(0,W===e?S:W)}}else if(t.indexOf(mn(p),S)!=S){var X=M.lastIndexOf(p);X>-1&&(M=M.slice(0,X))}return M+f},m.unescape=function _p(t){return(t=Ze(t))&&$e.test(t)?t.replace(st,ue):t},m.uniqueId=function Bp(t){var n=++Vl;return Ze(t)+n},m.upperCase=mp,m.upperFirst=Vs,m.each=wl,m.eachRight=xl,m.first=vl,ea(m,function(){var t={};return hi(m,function(n,r){Fe.call(m.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),m.VERSION="4.17.21",Qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){m[t].placeholder=m}),Qt(["drop","take"],function(t,n){Ie.prototype[t]=function(r){r=r===e?1:wt(Ee(r),0);var f=this.__filtered__&&!n?new Ie(this):this.clone();return f.__filtered__?f.__takeCount__=Gt(r,f.__takeCount__):f.__views__.push({size:Gt(r,ze),type:t+(f.__dir__<0?"Right":"")}),f},Ie.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),Qt(["filter","map","takeWhile"],function(t,n){var r=n+1,f=1==r||3==r;Ie.prototype[t]=function(p){var y=this.clone();return y.__iteratees__.push({iteratee:ge(p,3),type:r}),y.__filtered__=y.__filtered__||f,y}}),Qt(["head","last"],function(t,n){var r="take"+(n?"Right":"");Ie.prototype[t]=function(){return this[r](1).value()[0]}}),Qt(["initial","tail"],function(t,n){var r="drop"+(n?"":"Right");Ie.prototype[t]=function(){return this.__filtered__?new Ie(this):this[r](1)}}),Ie.prototype.compact=function(){return this.filter(un)},Ie.prototype.find=function(t){return this.filter(t).head()},Ie.prototype.findLast=function(t){return this.reverse().find(t)},Ie.prototype.invokeMap=Me(function(t,n){return"function"==typeof t?new Ie(this):this.map(function(r){return zr(r,t,n)})}),Ie.prototype.reject=function(t){return this.filter(Go(ge(t)))},Ie.prototype.slice=function(t,n){t=Ee(t);var r=this;return r.__filtered__&&(t>0||n<0)?new Ie(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(r=(n=Ee(n))<0?r.dropRight(-n):r.take(n-t)),r)},Ie.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ie.prototype.toArray=function(){return this.take(ze)},hi(Ie.prototype,function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),f=/^(?:head|last)$/.test(n),p=m[f?"take"+("last"==n?"Right":""):n],y=f||/^find/.test(n);!p||(m.prototype[n]=function(){var T=this.__wrapped__,S=f?[1]:arguments,M=T instanceof Ie,q=S[0],B=M||xe(T),W=function(Pe){var De=p.apply(m,In([Pe],S));return f&&X?De[0]:De};B&&r&&"function"==typeof q&&1!=q.length&&(M=B=!1);var X=this.__chain__,ae=!!this.__actions__.length,_e=y&&!X,Ae=M&&!ae;if(!y&&B){T=Ae?T:new Ie(this);var me=t.apply(T,S);return me.__actions__.push({func:Jo,args:[W],thisArg:e}),new kn(me,X)}return _e&&Ae?t.apply(this,S):(me=this.thru(W),_e?f?me.value()[0]:me.value():me)})}),Qt(["pop","push","shift","sort","splice","unshift"],function(t){var n=po[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",f=/^(?:pop|shift)$/.test(t);m.prototype[t]=function(){var p=arguments;if(f&&!this.__chain__){var y=this.value();return n.apply(xe(y)?y:[],p)}return this[r](function(T){return n.apply(xe(T)?T:[],p)})}}),hi(Ie.prototype,function(t,n){var r=m[n];if(r){var f=r.name+"";Fe.call(Ar,f)||(Ar[f]=[]),Ar[f].push({name:n,func:r})}}),Ar[Lo(e,2).name]=[{name:"wrapper",func:e}],Ie.prototype.clone=function gc(){var t=new Ie(this.__wrapped__);return t.__actions__=ln(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ln(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ln(this.__views__),t},Ie.prototype.reverse=function _c(){if(this.__filtered__){var t=new Ie(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ie.prototype.value=function mc(){var t=this.__wrapped__.value(),n=this.__dir__,r=xe(t),f=n<0,p=r?t.length:0,y=function Pf(t,n,r){for(var f=-1,p=r.length;++f<p;){var y=r[f],T=y.size;switch(y.type){case"drop":t+=T;break;case"dropRight":n-=T;break;case"take":n=Gt(n,t+T);break;case"takeRight":t=wt(t,n-T)}}return{start:t,end:n}}(0,p,this.__views__),T=y.start,S=y.end,M=S-T,q=f?S:T-1,B=this.__iteratees__,W=B.length,X=0,ae=Gt(M,this.__takeCount__);if(!r||!f&&p==M&&ae==M)return Ra(t,this.__actions__);var _e=[];e:for(;M--&&X<ae;){for(var Ae=-1,me=t[q+=n];++Ae<W;){var Pe=B[Ae],De=Pe.iteratee,yn=Pe.type,on=De(me);if(2==yn)me=on;else if(!on){if(1==yn)continue e;break e}}_e[X++]=me}return _e},m.prototype.at=Wu,m.prototype.chain=function Ku(){return bl(this)},m.prototype.commit=function Yu(){return new kn(this.value(),this.__chain__)},m.prototype.next=function ju(){this.__values__===e&&(this.__values__=Ll(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},m.prototype.plant=function zu(t){for(var n,r=this;r instanceof So;){var f=pl(r);f.__index__=0,f.__values__=e,n?p.__wrapped__=f:n=f;var p=f;r=r.__wrapped__}return p.__wrapped__=t,n},m.prototype.reverse=function Xu(){var t=this.__wrapped__;if(t instanceof Ie){var n=t;return this.__actions__.length&&(n=new Ie(this)),(n=n.reverse()).__actions__.push({func:Jo,args:[Hs],thisArg:e}),new kn(n,this.__chain__)}return this.thru(Hs)},m.prototype.toJSON=m.prototype.valueOf=m.prototype.value=function ed(){return Ra(this.__wrapped__,this.__actions__)},m.prototype.first=m.prototype.head,Qr&&(m.prototype[Qr]=function Vu(){return this}),m}();Ct._=Ut,(U=function(){return Ut}.call(Pt,j,Pt,dn))!==e&&(dn.exports=U)}.call(this)},8595:(dn,Pt,j)=>{"use strict";j.d(Pt,{bA:()=>gt});var U=j(3184),e=j(6362),K=j(4390),be=j(6484),Se=j(4128),ce=j(5901),ee=j(328),ye=j(7269);function Ce(L){const{subscriber:d,counter:_,period:w}=L;d.next(_),this.schedule({subscriber:d,counter:_+1,period:w},w)}var k=j(2218),J=j(6957),oe=j(8310),ie=j(8623),de=j(5921),Oe=j(5722),ut=j(6942),Kt=j(3910),Ft=j(2692),dt=j(9095),Ge=j(1317),xt=j(1588);function ht(L,d,_){for(let w in d)if(d.hasOwnProperty(w)){const E=d[w];E?L.setProperty(w,E,(null==_?void 0:_.has(w))?"important":""):L.removeProperty(w)}return L}function It(L,d){const _=d?"":"none";ht(L.style,{"touch-action":d?"":"none","-webkit-user-drag":d?"":"none","-webkit-tap-highlight-color":d?"":"transparent","user-select":_,"-ms-user-select":_,"-webkit-user-select":_,"-moz-user-select":_})}function rt(L,d,_){ht(L.style,{position:d?"":"fixed",top:d?"":"0",opacity:d?"":"0",left:d?"":"-999em"},_)}function Un(L,d){return d&&"none"!=d?L+" "+d:L}function _i(L){const d=L.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(L)*d}function hn(L,d){return L.getPropertyValue(d).split(",").map(w=>w.trim())}function bn(L){const d=L.getBoundingClientRect();return{top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.width,height:d.height,x:d.x,y:d.y}}function wn(L,d,_){const{top:w,bottom:E,left:P,right:N}=L;return _>=w&&_<=E&&d>=P&&d<=N}function pt(L,d,_){L.top+=d,L.bottom=L.top+L.height,L.left+=_,L.right=L.left+L.width}function Yt(L,d,_,w){const{top:E,right:P,bottom:N,left:Q,width:te,height:pe}=L,ke=te*d,at=pe*d;return w>E-at&&w<N+at&&_>Q-ke&&_<P+ke}class le{constructor(d){this._document=d,this.positions=new Map}clear(){this.positions.clear()}cache(d){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),d.forEach(_=>{this.positions.set(_,{scrollPosition:{top:_.scrollTop,left:_.scrollLeft},clientRect:bn(_)})})}handleScroll(d){const _=(0,K.sA)(d),w=this.positions.get(_);if(!w)return null;const E=w.scrollPosition;let P,N;if(_===this._document){const pe=this.getViewportScrollPosition();P=pe.top,N=pe.left}else P=_.scrollTop,N=_.scrollLeft;const Q=E.top-P,te=E.left-N;return this.positions.forEach((pe,ke)=>{pe.clientRect&&_!==ke&&_.contains(ke)&&pt(pe.clientRect,Q,te)}),E.top=P,E.left=N,{top:Q,left:te}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function xn(L){const d=L.cloneNode(!0),_=d.querySelectorAll("[id]"),w=L.nodeName.toLowerCase();d.removeAttribute("id");for(let E=0;E<_.length;E++)_[E].removeAttribute("id");return"canvas"===w?Tn(L,d):("input"===w||"select"===w||"textarea"===w)&&pn(L,d),Dt("canvas",L,d,Tn),Dt("input, textarea, select",L,d,pn),d}function Dt(L,d,_,w){const E=d.querySelectorAll(L);if(E.length){const P=_.querySelectorAll(L);for(let N=0;N<E.length;N++)w(E[N],P[N])}}let ze=0;function pn(L,d){"file"!==d.type&&(d.value=L.value),"radio"===d.type&&d.name&&(d.name=`mat-clone-${d.name}-${ze++}`)}function Tn(L,d){const _=d.getContext("2d");if(_)try{_.drawImage(L,0,0)}catch(w){}}const qn=(0,K.i$)({passive:!0}),Bt=(0,K.i$)({passive:!1}),An=new Set(["position"]);class Tt{constructor(d,_,w,E,P,N){this._config=_,this._document=w,this._ngZone=E,this._viewportRuler=P,this._dragDropRegistry=N,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new k.xQ,this._pointerMoveSubscription=J.w.EMPTY,this._pointerUpSubscription=J.w.EMPTY,this._scrollSubscription=J.w.EMPTY,this._resizeSubscription=J.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new k.xQ,this.started=new k.xQ,this.released=new k.xQ,this.ended=new k.xQ,this.entered=new k.xQ,this.exited=new k.xQ,this.dropped=new k.xQ,this.moved=this._moveEvents,this._pointerDown=Q=>{if(this.beforeStarted.next(),this._handles.length){const te=this._getTargetHandle(Q);te&&!this._disabledHandles.has(te)&&!this.disabled&&this._initializeDragSequence(te,Q)}else this.disabled||this._initializeDragSequence(this._rootElement,Q)},this._pointerMove=Q=>{const te=this._getPointerPositionOnPage(Q);if(!this._hasStartedDragging){if(Math.abs(te.x-this._pickupPositionOnPage.x)+Math.abs(te.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const At=Date.now()>=this._dragStartTime+this._getDragStartDelay(Q),yt=this._dropContainer;if(!At)return void this._endDragSequence(Q);(!yt||!yt.isDragging()&&!yt.isReceiving())&&(Q.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(Q)))}return}Q.preventDefault();const pe=this._getConstrainedPointerPosition(te);if(this._hasMoved=!0,this._lastKnownPointerPosition=te,this._updatePointerDirectionDelta(pe),this._dropContainer)this._updateActiveDropContainer(pe,te);else{const ke=this._activeTransform;ke.x=pe.x-this._pickupPositionOnPage.x+this._passiveTransform.x,ke.y=pe.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(ke.x,ke.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:pe,event:Q,distance:this._getDragDistance(pe),delta:this._pointerDirectionDelta})})},this._pointerUp=Q=>{this._endDragSequence(Q)},this._nativeDragStart=Q=>{if(this._handles.length){const te=this._getTargetHandle(Q);te&&!this._disabledHandles.has(te)&&!this.disabled&&Q.preventDefault()}else this.disabled||Q.preventDefault()},this.withRootElement(d).withParent(_.parentDragRef||null),this._parentPositions=new le(w),N.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(d){const _=(0,be.Ig)(d);_!==this._disabled&&(this._disabled=_,this._toggleNativeDragInteractions(),this._handles.forEach(w=>It(w,_)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(d){this._handles=d.map(w=>(0,be.fI)(w)),this._handles.forEach(w=>It(w,this.disabled)),this._toggleNativeDragInteractions();const _=new Set;return this._disabledHandles.forEach(w=>{this._handles.indexOf(w)>-1&&_.add(w)}),this._disabledHandles=_,this}withPreviewTemplate(d){return this._previewTemplate=d,this}withPlaceholderTemplate(d){return this._placeholderTemplate=d,this}withRootElement(d){const _=(0,be.fI)(d);return _!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{_.addEventListener("mousedown",this._pointerDown,Bt),_.addEventListener("touchstart",this._pointerDown,qn),_.addEventListener("dragstart",this._nativeDragStart,Bt)}),this._initialTransform=void 0,this._rootElement=_),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(d){return this._boundaryElement=d?(0,be.fI)(d):null,this._resizeSubscription.unsubscribe(),d&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(d){return this._parentDragRef=d,this}dispose(){var d,_;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(d=this._rootElement)||void 0===d||d.remove()),null===(_=this._anchor)||void 0===_||_.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(d){!this._disabledHandles.has(d)&&this._handles.indexOf(d)>-1&&(this._disabledHandles.add(d),It(d,!0))}enableHandle(d){this._disabledHandles.has(d)&&(this._disabledHandles.delete(d),It(d,this.disabled))}withDirection(d){return this._direction=d,this}_withDropContainer(d){this._dropContainer=d}getFreeDragPosition(){const d=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:d.x,y:d.y}}setFreeDragPosition(d){return this._activeTransform={x:0,y:0},this._passiveTransform.x=d.x,this._passiveTransform.y=d.y,this._dropContainer||this._applyRootElementTransform(d.x,d.y),this}withPreviewContainer(d){return this._previewContainer=d,this}_sortFromLastPointerPosition(){const d=this._lastKnownPointerPosition;d&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(d),d)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var d,_;null===(d=this._preview)||void 0===d||d.remove(),null===(_=this._previewRef)||void 0===_||_.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var d,_;null===(d=this._placeholder)||void 0===d||d.remove(),null===(_=this._placeholderRef)||void 0===_||_.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(d){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(d),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const _=this._getPointerPositionOnPage(d);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(_),dropPoint:_})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(d){Nt(d)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const _=this._dropContainer;if(_){const w=this._rootElement,E=w.parentNode,P=this._placeholder=this._createPlaceholderElement(),N=this._anchor=this._anchor||this._document.createComment(""),Q=this._getShadowRoot();E.insertBefore(N,w),this._initialTransform=w.style.transform||"",this._preview=this._createPreviewElement(),rt(w,!1,An),this._document.body.appendChild(E.replaceChild(P,w)),this._getPreviewInsertionPoint(E,Q).appendChild(this._preview),this.started.next({source:this}),_.start(),this._initialContainer=_,this._initialIndex=_.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(_?_.getScrollableParents():[])}_initializeDragSequence(d,_){this._parentDragRef&&_.stopPropagation();const w=this.isDragging(),E=Nt(_),P=!E&&0!==_.button,N=this._rootElement,Q=(0,K.sA)(_),te=!E&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),pe=E?(0,Se.yG)(_):(0,Se.X6)(_);if(Q&&Q.draggable&&"mousedown"===_.type&&_.preventDefault(),w||P||te||pe)return;if(this._handles.length){const Et=N.style;this._rootElementTapHighlight=Et.webkitTapHighlightColor||"",Et.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Et=>this._updateOnScroll(Et)),this._boundaryElement&&(this._boundaryRect=bn(this._boundaryElement));const ke=this._previewTemplate;this._pickupPositionInElement=ke&&ke.template&&!ke.matchSize?{x:0,y:0}:this._getPointerPositionInElement(d,_);const at=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(_);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:at.x,y:at.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,_)}_cleanupDragArtifacts(d){rt(this._rootElement,!0,An),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const _=this._dropContainer,w=_.getItemIndex(this),E=this._getPointerPositionOnPage(d),P=this._getDragDistance(E),N=_._isOverContainer(E.x,E.y);this.ended.next({source:this,distance:P,dropPoint:E}),this.dropped.next({item:this,currentIndex:w,previousIndex:this._initialIndex,container:_,previousContainer:this._initialContainer,isPointerOverContainer:N,distance:P,dropPoint:E}),_.drop(this,w,this._initialIndex,this._initialContainer,N,P,E),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:d,y:_},{x:w,y:E}){let P=this._initialContainer._getSiblingContainerFromPosition(this,d,_);!P&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(d,_)&&(P=this._initialContainer),P&&P!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=P,this._dropContainer.enter(this,d,_,P===this._initialContainer&&P.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:P,currentIndex:P.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(w,E),this._dropContainer._sortItem(this,d,_,this._pointerDirectionDelta),this._applyPreviewTransform(d-this._pickupPositionInElement.x,_-this._pickupPositionInElement.y))}_createPreviewElement(){const d=this._previewTemplate,_=this.previewClass,w=d?d.template:null;let E;if(w&&d){const P=d.matchSize?this._rootElement.getBoundingClientRect():null,N=d.viewContainer.createEmbeddedView(w,d.context);N.detectChanges(),E=Fn(N,this._document),this._previewRef=N,d.matchSize?Lt(E,P):E.style.transform=Xe(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const P=this._rootElement;E=xn(P),Lt(E,P.getBoundingClientRect()),this._initialTransform&&(E.style.transform=this._initialTransform)}return ht(E.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},An),It(E,!1),E.classList.add("cdk-drag-preview"),E.setAttribute("dir",this._direction),_&&(Array.isArray(_)?_.forEach(P=>E.classList.add(P)):E.classList.add(_)),E}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const d=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(d.left,d.top);const _=function ti(L){const d=getComputedStyle(L),_=hn(d,"transition-property"),w=_.find(Q=>"transform"===Q||"all"===Q);if(!w)return 0;const E=_.indexOf(w),P=hn(d,"transition-duration"),N=hn(d,"transition-delay");return _i(P[E])+_i(N[E])}(this._preview);return 0===_?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(w=>{const E=N=>{var Q;(!N||(0,K.sA)(N)===this._preview&&"transform"===N.propertyName)&&(null===(Q=this._preview)||void 0===Q||Q.removeEventListener("transitionend",E),w(),clearTimeout(P))},P=setTimeout(E,1.5*_);this._preview.addEventListener("transitionend",E)}))}_createPlaceholderElement(){const d=this._placeholderTemplate,_=d?d.template:null;let w;return _?(this._placeholderRef=d.viewContainer.createEmbeddedView(_,d.context),this._placeholderRef.detectChanges(),w=Fn(this._placeholderRef,this._document)):w=xn(this._rootElement),w.style.pointerEvents="none",w.classList.add("cdk-drag-placeholder"),w}_getPointerPositionInElement(d,_){const w=this._rootElement.getBoundingClientRect(),E=d===this._rootElement?null:d,P=E?E.getBoundingClientRect():w,N=Nt(_)?_.targetTouches[0]:_,Q=this._getViewportScrollPosition(),te=N.pageX-P.left-Q.left,pe=N.pageY-P.top-Q.top;return{x:P.left-w.left+te,y:P.top-w.top+pe}}_getPointerPositionOnPage(d){const _=this._getViewportScrollPosition(),w=Nt(d)?d.touches[0]||d.changedTouches[0]||{pageX:0,pageY:0}:d,E=w.pageX-_.left,P=w.pageY-_.top;if(this._ownerSVGElement){const N=this._ownerSVGElement.getScreenCTM();if(N){const Q=this._ownerSVGElement.createSVGPoint();return Q.x=E,Q.y=P,Q.matrixTransform(N.inverse())}}return{x:E,y:P}}_getConstrainedPointerPosition(d){const _=this._dropContainer?this._dropContainer.lockAxis:null;let{x:w,y:E}=this.constrainPosition?this.constrainPosition(d,this):d;if("x"===this.lockAxis||"x"===_?E=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===_)&&(w=this._pickupPositionOnPage.x),this._boundaryRect){const{x:P,y:N}=this._pickupPositionInElement,Q=this._boundaryRect,{width:te,height:pe}=this._getPreviewRect(),ke=Q.top+N,at=Q.bottom-(pe-N);w=kt(w,Q.left+P,Q.right-(te-P)),E=kt(E,ke,at)}return{x:w,y:E}}_updatePointerDirectionDelta(d){const{x:_,y:w}=d,E=this._pointerDirectionDelta,P=this._pointerPositionAtLastDirectionChange,N=Math.abs(_-P.x),Q=Math.abs(w-P.y);return N>this._config.pointerDirectionChangeThreshold&&(E.x=_>P.x?1:-1,P.x=_),Q>this._config.pointerDirectionChangeThreshold&&(E.y=w>P.y?1:-1,P.y=w),E}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const d=this._handles.length>0||!this.isDragging();d!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=d,It(this._rootElement,d))}_removeRootElementListeners(d){d.removeEventListener("mousedown",this._pointerDown,Bt),d.removeEventListener("touchstart",this._pointerDown,qn),d.removeEventListener("dragstart",this._nativeDragStart,Bt)}_applyRootElementTransform(d,_){const w=Xe(d,_),E=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=E.transform&&"none"!=E.transform?E.transform:""),E.transform=Un(w,this._initialTransform)}_applyPreviewTransform(d,_){var w;const E=(null===(w=this._previewTemplate)||void 0===w?void 0:w.template)?void 0:this._initialTransform,P=Xe(d,_);this._preview.style.transform=Un(P,E)}_getDragDistance(d){const _=this._pickupPositionOnPage;return _?{x:d.x-_.x,y:d.y-_.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:d,y:_}=this._passiveTransform;if(0===d&&0===_||this.isDragging()||!this._boundaryElement)return;const w=this._boundaryElement.getBoundingClientRect(),E=this._rootElement.getBoundingClientRect();if(0===w.width&&0===w.height||0===E.width&&0===E.height)return;const P=w.left-E.left,N=E.right-w.right,Q=w.top-E.top,te=E.bottom-w.bottom;w.width>E.width?(P>0&&(d+=P),N>0&&(d-=N)):d=0,w.height>E.height?(Q>0&&(_+=Q),te>0&&(_-=te)):_=0,(d!==this._passiveTransform.x||_!==this._passiveTransform.y)&&this.setFreeDragPosition({y:_,x:d})}_getDragStartDelay(d){const _=this.dragStartDelay;return"number"==typeof _?_:Nt(d)?_.touch:_?_.mouse:0}_updateOnScroll(d){const _=this._parentPositions.handleScroll(d);if(_){const w=(0,K.sA)(d);this._boundaryRect&&w!==this._boundaryElement&&w.contains(this._boundaryElement)&&pt(this._boundaryRect,_.top,_.left),this._pickupPositionOnPage.x+=_.left,this._pickupPositionOnPage.y+=_.top,this._dropContainer||(this._activeTransform.x-=_.left,this._activeTransform.y-=_.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var d;return(null===(d=this._parentPositions.positions.get(this._document))||void 0===d?void 0:d.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,K.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(d,_){const w=this._previewContainer||"global";if("parent"===w)return d;if("global"===w){const E=this._document;return _||E.fullscreenElement||E.webkitFullscreenElement||E.mozFullScreenElement||E.msFullscreenElement||E.body}return(0,be.fI)(w)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(d){return this._handles.find(_=>d.target&&(d.target===_||_.contains(d.target)))}}function Xe(L,d){return`translate3d(${Math.round(L)}px, ${Math.round(d)}px, 0)`}function kt(L,d,_){return Math.max(d,Math.min(_,L))}function Nt(L){return"t"===L.type[0]}function Fn(L,d){const _=L.rootNodes;if(1===_.length&&_[0].nodeType===d.ELEMENT_NODE)return _[0];const w=d.createElement("div");return _.forEach(E=>w.appendChild(E)),w}function Lt(L,d){L.style.width=`${d.width}px`,L.style.height=`${d.height}px`,L.style.transform=Xe(d.left,d.top)}function gt(L,d,_){const w=Qe(d,L.length-1),E=Qe(_,L.length-1);if(w===E)return;const P=L[w],N=E<w?-1:1;for(let Q=w;Q!==E;Q+=N)L[Q]=L[Q+N];L[E]=P}function Qe(L,d){return Math.max(0,Math.min(d,L))}class et{constructor(d,_,w,E,P){this._dragDropRegistry=_,this._ngZone=E,this._viewportRuler=P,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new k.xQ,this.entered=new k.xQ,this.exited=new k.xQ,this.dropped=new k.xQ,this.sorted=new k.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=J.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new k.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Le(L=0,d=ee.P){return(!(0,ye.k)(L)||L<0)&&(L=0),(!d||"function"!=typeof d.schedule)&&(d=ee.P),new ce.y(_=>(_.add(d.schedule(Ce,L,{subscriber:_,counter:0,period:L})),_))}(0,oe.Z).pipe((0,de.R)(this._stopScrollTimers)).subscribe(()=>{const N=this._scrollNode,Q=this.autoScrollStep;1===this._verticalScrollDirection?N.scrollBy(0,-Q):2===this._verticalScrollDirection&&N.scrollBy(0,Q),1===this._horizontalScrollDirection?N.scrollBy(-Q,0):2===this._horizontalScrollDirection&&N.scrollBy(Q,0)})},this.element=(0,be.fI)(d),this._document=w,this.withScrollableParents([this.element]),_.registerDropContainer(this),this._parentPositions=new le(w)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(d,_,w,E){let P;this._draggingStarted(),null==E?(P=this.sortingDisabled?this._draggables.indexOf(d):-1,-1===P&&(P=this._getItemIndexFromPointerPosition(d,_,w))):P=E;const N=this._activeDraggables,Q=N.indexOf(d),te=d.getPlaceholderElement();let pe=N[P];if(pe===d&&(pe=N[P+1]),!pe&&(null==P||-1===P||P<N.length-1)&&this._shouldEnterAsFirstChild(_,w)&&(pe=N[0]),Q>-1&&N.splice(Q,1),pe&&!this._dragDropRegistry.isDragging(pe)){const ke=pe.getRootElement();ke.parentElement.insertBefore(te,ke),N.splice(P,0,d)}else(0,be.fI)(this.element).appendChild(te),N.push(d);te.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:d,container:this,currentIndex:this.getItemIndex(d)})}exit(d){this._reset(),this.exited.next({item:d,container:this})}drop(d,_,w,E,P,N,Q){this._reset(),this.dropped.next({item:d,currentIndex:_,previousIndex:w,container:this,previousContainer:E,isPointerOverContainer:P,distance:N,dropPoint:Q})}withItems(d){const _=this._draggables;return this._draggables=d,d.forEach(w=>w._withDropContainer(this)),this.isDragging()&&(_.filter(E=>E.isDragging()).every(E=>-1===d.indexOf(E))?this._reset():this._cacheItems()),this}withDirection(d){return this._direction=d,this}connectedTo(d){return this._siblings=d.slice(),this}withOrientation(d){return this._orientation=d,this}withScrollableParents(d){const _=(0,be.fI)(this.element);return this._scrollableElements=-1===d.indexOf(_)?[_,...d]:d.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(d){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(w=>w.drag===d):this._draggables.indexOf(d)}isReceiving(){return this._activeSiblings.size>0}_sortItem(d,_,w,E){if(this.sortingDisabled||!this._clientRect||!Yt(this._clientRect,.05,_,w))return;const P=this._itemPositions,N=this._getItemIndexFromPointerPosition(d,_,w,E);if(-1===N&&P.length>0)return;const Q="horizontal"===this._orientation,te=P.findIndex(St=>St.drag===d),pe=P[N],ke=P[te].clientRect,at=pe.clientRect,Et=te>N?1:-1,At=this._getItemOffsetPx(ke,at,Et),yt=this._getSiblingOffsetPx(te,P,Et),$n=P.slice();gt(P,te,N),this.sorted.next({previousIndex:te,currentIndex:N,container:this,item:d}),P.forEach((St,ki)=>{if($n[ki]===St)return;const oi=St.drag===d,si=oi?At:yt,mi=oi?d.getPlaceholderElement():St.drag.getRootElement();St.offset+=si,Q?(mi.style.transform=Un(`translate3d(${Math.round(St.offset)}px, 0, 0)`,St.initialTransform),pt(St.clientRect,0,si)):(mi.style.transform=Un(`translate3d(0, ${Math.round(St.offset)}px, 0)`,St.initialTransform),pt(St.clientRect,si,0))}),this._previousSwap.overlaps=wn(at,_,w),this._previousSwap.drag=pe.drag,this._previousSwap.delta=Q?E.x:E.y}_startScrollingIfNecessary(d,_){if(this.autoScrollDisabled)return;let w,E=0,P=0;if(this._parentPositions.positions.forEach((N,Q)=>{Q===this._document||!N.clientRect||w||Yt(N.clientRect,.05,d,_)&&([E,P]=function Jt(L,d,_,w){const E=Re(d,w),P=mt(d,_);let N=0,Q=0;if(E){const te=L.scrollTop;1===E?te>0&&(N=1):L.scrollHeight-te>L.clientHeight&&(N=2)}if(P){const te=L.scrollLeft;1===P?te>0&&(Q=1):L.scrollWidth-te>L.clientWidth&&(Q=2)}return[N,Q]}(Q,N.clientRect,d,_),(E||P)&&(w=Q))}),!E&&!P){const{width:N,height:Q}=this._viewportRuler.getViewportSize(),te={width:N,height:Q,top:0,right:N,bottom:Q,left:0};E=Re(te,_),P=mt(te,d),w=window}w&&(E!==this._verticalScrollDirection||P!==this._horizontalScrollDirection||w!==this._scrollNode)&&(this._verticalScrollDirection=E,this._horizontalScrollDirection=P,this._scrollNode=w,(E||P)&&w?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const d=(0,be.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=d.msScrollSnapType||d.scrollSnapType||"",d.scrollSnapType=d.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const d=(0,be.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(d).clientRect}_cacheItemPositions(){const d="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(_=>{const w=_.getVisibleElement();return{drag:_,offset:0,initialTransform:w.style.transform||"",clientRect:bn(w)}}).sort((_,w)=>d?_.clientRect.left-w.clientRect.left:_.clientRect.top-w.clientRect.top)}_reset(){this._isDragging=!1;const d=(0,be.fI)(this.element).style;d.scrollSnapType=d.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(_=>{var w;const E=_.getRootElement();if(E){const P=null===(w=this._itemPositions.find(N=>N.drag===_))||void 0===w?void 0:w.initialTransform;E.style.transform=P||""}}),this._siblings.forEach(_=>_._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(d,_,w){const E="horizontal"===this._orientation,P=_[d].clientRect,N=_[d+-1*w];let Q=P[E?"width":"height"]*w;if(N){const te=E?"left":"top",pe=E?"right":"bottom";-1===w?Q-=N.clientRect[te]-P[pe]:Q+=P[te]-N.clientRect[pe]}return Q}_getItemOffsetPx(d,_,w){const E="horizontal"===this._orientation;let P=E?_.left-d.left:_.top-d.top;return-1===w&&(P+=E?_.width-d.width:_.height-d.height),P}_shouldEnterAsFirstChild(d,_){if(!this._activeDraggables.length)return!1;const w=this._itemPositions,E="horizontal"===this._orientation;if(w[0].drag!==this._activeDraggables[0]){const N=w[w.length-1].clientRect;return E?d>=N.right:_>=N.bottom}{const N=w[0].clientRect;return E?d<=N.left:_<=N.top}}_getItemIndexFromPointerPosition(d,_,w,E){const P="horizontal"===this._orientation,N=this._itemPositions.findIndex(({drag:Q,clientRect:te})=>{if(Q===d)return!1;if(E){const pe=P?E.x:E.y;if(Q===this._previousSwap.drag&&this._previousSwap.overlaps&&pe===this._previousSwap.delta)return!1}return P?_>=Math.floor(te.left)&&_<Math.floor(te.right):w>=Math.floor(te.top)&&w<Math.floor(te.bottom)});return-1!==N&&this.sortPredicate(N,d,this)?N:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(d,_){return null!=this._clientRect&&wn(this._clientRect,d,_)}_getSiblingContainerFromPosition(d,_,w){return this._siblings.find(E=>E._canReceive(d,_,w))}_canReceive(d,_,w){if(!this._clientRect||!wn(this._clientRect,_,w)||!this.enterPredicate(d,this))return!1;const E=this._getShadowRoot().elementFromPoint(_,w);if(!E)return!1;const P=(0,be.fI)(this.element);return E===P||P.contains(E)}_startReceiving(d,_){const w=this._activeSiblings;!w.has(d)&&_.every(E=>this.enterPredicate(E,this)||this._draggables.indexOf(E)>-1)&&(w.add(d),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(d){this._activeSiblings.delete(d),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(d=>{if(this.isDragging()){const _=this._parentPositions.handleScroll(d);_&&(this._itemPositions.forEach(({clientRect:w})=>{pt(w,_.top,_.left)}),this._itemPositions.forEach(({drag:w})=>{this._dragDropRegistry.isDragging(w)&&w._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const d=(0,K.kV)((0,be.fI)(this.element));this._cachedShadowRoot=d||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const d=this._activeDraggables.filter(_=>_.isDragging());this._siblings.forEach(_=>_._startReceiving(this,d))}}function Re(L,d){const{top:_,bottom:w,height:E}=L,P=.05*E;return d>=_-P&&d<=_+P?1:d>=w-P&&d<=w+P?2:0}function mt(L,d){const{left:_,right:w,width:E}=L,P=.05*E;return d>=_-P&&d<=_+P?1:d>=w-P&&d<=w+P?2:0}const Bn=(0,K.i$)({passive:!1,capture:!0});class Ke{constructor(d,_){this._ngZone=d,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=w=>w.isDragging(),this.pointerMove=new k.xQ,this.pointerUp=new k.xQ,this.scroll=new k.xQ,this._preventDefaultWhileDragging=w=>{this._activeDragInstances.length>0&&w.preventDefault()},this._persistentTouchmoveListener=w=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&w.preventDefault(),this.pointerMove.next(w))},this._document=_}registerDropContainer(d){this._dropInstances.has(d)||this._dropInstances.add(d)}registerDragItem(d){this._dragInstances.add(d),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Bn)})}removeDropContainer(d){this._dropInstances.delete(d)}removeDragItem(d){this._dragInstances.delete(d),this.stopDragging(d),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Bn)}startDragging(d,_){if(!(this._activeDragInstances.indexOf(d)>-1)&&(this._activeDragInstances.push(d),1===this._activeDragInstances.length)){const w=_.type.startsWith("touch");this._globalListeners.set(w?"touchend":"mouseup",{handler:E=>this.pointerUp.next(E),options:!0}).set("scroll",{handler:E=>this.scroll.next(E),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Bn}),w||this._globalListeners.set("mousemove",{handler:E=>this.pointerMove.next(E),options:Bn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((E,P)=>{this._document.addEventListener(P,E.handler,E.options)})})}}stopDragging(d){const _=this._activeDragInstances.indexOf(d);_>-1&&(this._activeDragInstances.splice(_,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(d){return this._activeDragInstances.indexOf(d)>-1}scrolled(d){const _=[this.scroll];return d&&d!==this._document&&_.push(new ce.y(w=>this._ngZone.runOutsideAngular(()=>{const P=N=>{this._activeDragInstances.length&&w.next(N)};return d.addEventListener("scroll",P,!0),()=>{d.removeEventListener("scroll",P,!0)}}))),(0,ie.T)(..._)}ngOnDestroy(){this._dragInstances.forEach(d=>this.removeDragItem(d)),this._dropInstances.forEach(d=>this.removeDropContainer(d)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((d,_)=>{this._document.removeEventListener(_,d.handler,d.options)}),this._globalListeners.clear()}}Ke.\u0275fac=function(d){return new(d||Ke)(U.LFG(U.R0b),U.LFG(e.K0))},Ke.\u0275prov=U.Yz7({token:Ke,factory:Ke.\u0275fac,providedIn:"root"});const Ii={dragStartThreshold:5,pointerDirectionChangeThreshold:5};class We{constructor(d,_,w,E){this._document=d,this._ngZone=_,this._viewportRuler=w,this._dragDropRegistry=E}createDrag(d,_=Ii){return new Tt(d,_,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(d){return new et(d,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}We.\u0275fac=function(d){return new(d||We)(U.LFG(e.K0),U.LFG(U.R0b),U.LFG(Ge.rL),U.LFG(Ke))},We.\u0275prov=U.Yz7({token:We,factory:We.\u0275fac,providedIn:"root"});const jt=new U.OlP("CDK_DRAG_PARENT"),Jn=new U.OlP("CdkDropListGroup");class Vt{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(d){this._disabled=(0,be.Ig)(d)}ngOnDestroy(){this._items.clear()}}Vt.\u0275fac=function(d){return new(d||Vt)},Vt.\u0275dir=U.lG2({type:Vt,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[U._Bn([{provide:Jn,useExisting:Vt}])]});const ii=new U.OlP("CDK_DRAG_CONFIG");let ot=0;const Hn=new U.OlP("CdkDropList");class vt{constructor(d,_,w,E,P,N,Q){this.element=d,this._changeDetectorRef=w,this._scrollDispatcher=E,this._dir=P,this._group=N,this._destroyed=new k.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+ot++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new U.vpe,this.entered=new U.vpe,this.exited=new U.vpe,this.sorted=new U.vpe,this._unsortedItems=new Set,this._dropListRef=_.createDropList(d),this._dropListRef.data=this,Q&&this._assignDefaults(Q),this._dropListRef.enterPredicate=(te,pe)=>this.enterPredicate(te.data,pe.data),this._dropListRef.sortPredicate=(te,pe,ke)=>this.sortPredicate(te,pe.data,ke.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),vt._dropLists.push(this),N&&N._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(d){this._dropListRef.disabled=this._disabled=(0,be.Ig)(d)}addItem(d){this._unsortedItems.add(d),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(d){this._unsortedItems.delete(d),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((d,_)=>d._dragRef.getVisibleElement().compareDocumentPosition(_._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const d=vt._dropLists.indexOf(this);d>-1&&vt._dropLists.splice(d,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(d){this._dir&&this._dir.change.pipe((0,Oe.O)(this._dir.value),(0,de.R)(this._destroyed)).subscribe(_=>d.withDirection(_)),d.beforeStarted.subscribe(()=>{const _=(0,be.Eq)(this.connectedTo).map(w=>{if("string"==typeof w){return vt._dropLists.find(P=>P.id===w)}return w});if(this._group&&this._group._items.forEach(w=>{-1===_.indexOf(w)&&_.push(w)}),!this._scrollableParentsResolved){const w=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(E=>E.getElementRef().nativeElement);this._dropListRef.withScrollableParents(w),this._scrollableParentsResolved=!0}d.disabled=this.disabled,d.lockAxis=this.lockAxis,d.sortingDisabled=(0,be.Ig)(this.sortingDisabled),d.autoScrollDisabled=(0,be.Ig)(this.autoScrollDisabled),d.autoScrollStep=(0,be.su)(this.autoScrollStep,2),d.connectedTo(_.filter(w=>w&&w!==this).map(w=>w._dropListRef)).withOrientation(this.orientation)})}_handleEvents(d){d.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),d.entered.subscribe(_=>{this.entered.emit({container:this,item:_.item.data,currentIndex:_.currentIndex})}),d.exited.subscribe(_=>{this.exited.emit({container:this,item:_.item.data}),this._changeDetectorRef.markForCheck()}),d.sorted.subscribe(_=>{this.sorted.emit({previousIndex:_.previousIndex,currentIndex:_.currentIndex,container:this,item:_.item.data})}),d.dropped.subscribe(_=>{this.dropped.emit({previousIndex:_.previousIndex,currentIndex:_.currentIndex,previousContainer:_.previousContainer.data,container:_.container.data,item:_.item.data,isPointerOverContainer:_.isPointerOverContainer,distance:_.distance,dropPoint:_.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(d){const{lockAxis:_,draggingDisabled:w,sortingDisabled:E,listAutoScrollDisabled:P,listOrientation:N}=d;this.disabled=null!=w&&w,this.sortingDisabled=null!=E&&E,this.autoScrollDisabled=null!=P&&P,this.orientation=N||"vertical",_&&(this.lockAxis=_)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(d=>d._dragRef))}}vt._dropLists=[],vt.\u0275fac=function(d){return new(d||vt)(U.Y36(U.SBq),U.Y36(We),U.Y36(U.sBO),U.Y36(Ge.mF),U.Y36(xt.Is,8),U.Y36(Jn,12),U.Y36(ii,8))},vt.\u0275dir=U.lG2({type:vt,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(d,_){2&d&&(U.uIk("id",_.id),U.ekj("cdk-drop-list-disabled",_.disabled)("cdk-drop-list-dragging",_._dropListRef.isDragging())("cdk-drop-list-receiving",_._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[U._Bn([{provide:Jn,useValue:void 0},{provide:Hn,useExisting:vt}])]});const Zt=new U.OlP("CdkDragHandle");class Ye{constructor(d,_){this.element=d,this._stateChanges=new k.xQ,this._disabled=!1,this._parentDrag=_}get disabled(){return this._disabled}set disabled(d){this._disabled=(0,be.Ig)(d),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}Ye.\u0275fac=function(d){return new(d||Ye)(U.Y36(U.SBq),U.Y36(jt,12))},Ye.\u0275dir=U.lG2({type:Ye,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[U._Bn([{provide:Zt,useExisting:Ye}])]});const Di=new U.OlP("CdkDragPlaceholder");class Ht{constructor(d){this.templateRef=d}}Ht.\u0275fac=function(d){return new(d||Ht)(U.Y36(U.Rgc))},Ht.\u0275dir=U.lG2({type:Ht,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[U._Bn([{provide:Di,useExisting:Ht}])]});const gn=new U.OlP("CdkDragPreview");class st{constructor(d){this.templateRef=d,this._matchSize=!1}get matchSize(){return this._matchSize}set matchSize(d){this._matchSize=(0,be.Ig)(d)}}st.\u0275fac=function(d){return new(d||st)(U.Y36(U.Rgc))},st.\u0275dir=U.lG2({type:st,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:"matchSize"},features:[U._Bn([{provide:gn,useExisting:st}])]});class $e{constructor(d,_,w,E,P,N,Q,te,pe,ke,at){this.element=d,this.dropContainer=_,this._ngZone=E,this._viewContainerRef=P,this._dir=Q,this._changeDetectorRef=pe,this._selfHandle=ke,this._parentDrag=at,this._destroyed=new k.xQ,this.started=new U.vpe,this.released=new U.vpe,this.ended=new U.vpe,this.entered=new U.vpe,this.exited=new U.vpe,this.dropped=new U.vpe,this.moved=new ce.y(Et=>{const At=this._dragRef.moved.pipe((0,ut.U)(yt=>({source:this,pointerPosition:yt.pointerPosition,event:yt.event,delta:yt.delta,distance:yt.distance}))).subscribe(Et);return()=>{At.unsubscribe()}}),this._dragRef=te.createDrag(d,{dragStartThreshold:N&&null!=N.dragStartThreshold?N.dragStartThreshold:5,pointerDirectionChangeThreshold:N&&null!=N.pointerDirectionChangeThreshold?N.pointerDirectionChangeThreshold:5,zIndex:null==N?void 0:N.zIndex}),this._dragRef.data=this,$e._dragInstances.push(this),N&&this._assignDefaults(N),_&&(this._dragRef._withDropContainer(_._dropListRef),_.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(d){this._disabled=(0,be.Ig)(d),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Kt.q)(1),(0,de.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(d){const _=d.rootElementSelector,w=d.freeDragPosition;_&&!_.firstChange&&this._updateRootElement(),w&&!w.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const d=$e._dragInstances.indexOf(this);d>-1&&$e._dragInstances.splice(d,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var d;const _=this.element.nativeElement;let w=_;this.rootElementSelector&&(w=void 0!==_.closest?_.closest(this.rootElementSelector):null===(d=_.parentElement)||void 0===d?void 0:d.closest(this.rootElementSelector)),this._dragRef.withRootElement(w||_)}_getBoundaryElement(){const d=this.boundaryElement;return d?"string"==typeof d?this.element.nativeElement.closest(d):(0,be.fI)(d):null}_syncInputs(d){d.beforeStarted.subscribe(()=>{if(!d.isDragging()){const _=this._dir,w=this.dragStartDelay,E=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,P=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;d.disabled=this.disabled,d.lockAxis=this.lockAxis,d.dragStartDelay="object"==typeof w&&w?w:(0,be.su)(w),d.constrainPosition=this.constrainPosition,d.previewClass=this.previewClass,d.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(E).withPreviewTemplate(P).withPreviewContainer(this.previewContainer||"global"),_&&d.withDirection(_.value)}}),d.beforeStarted.pipe((0,Kt.q)(1)).subscribe(()=>{var _;if(this._parentDrag)return void d.withParent(this._parentDrag._dragRef);let w=this.element.nativeElement.parentElement;for(;w;){if(w.classList.contains("cdk-drag")){d.withParent((null===(_=$e._dragInstances.find(E=>E.element.nativeElement===w))||void 0===_?void 0:_._dragRef)||null);break}w=w.parentElement}})}_handleEvents(d){d.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),d.released.subscribe(()=>{this.released.emit({source:this})}),d.ended.subscribe(_=>{this.ended.emit({source:this,distance:_.distance,dropPoint:_.dropPoint}),this._changeDetectorRef.markForCheck()}),d.entered.subscribe(_=>{this.entered.emit({container:_.container.data,item:this,currentIndex:_.currentIndex})}),d.exited.subscribe(_=>{this.exited.emit({container:_.container.data,item:this})}),d.dropped.subscribe(_=>{this.dropped.emit({previousIndex:_.previousIndex,currentIndex:_.currentIndex,previousContainer:_.previousContainer.data,container:_.container.data,isPointerOverContainer:_.isPointerOverContainer,item:this,distance:_.distance,dropPoint:_.dropPoint})})}_assignDefaults(d){const{lockAxis:_,dragStartDelay:w,constrainPosition:E,previewClass:P,boundaryElement:N,draggingDisabled:Q,rootElementSelector:te,previewContainer:pe}=d;this.disabled=null!=Q&&Q,this.dragStartDelay=w||0,_&&(this.lockAxis=_),E&&(this.constrainPosition=E),P&&(this.previewClass=P),N&&(this.boundaryElement=N),te&&(this.rootElementSelector=te),pe&&(this.previewContainer=pe)}_setupHandlesListener(){this._handles.changes.pipe((0,Oe.O)(this._handles),(0,Ft.b)(d=>{const _=d.filter(w=>w._parentDrag===this).map(w=>w.element);this._selfHandle&&this.rootElementSelector&&_.push(this.element),this._dragRef.withHandles(_)}),(0,dt.w)(d=>(0,ie.T)(...d.map(_=>_._stateChanges.pipe((0,Oe.O)(_))))),(0,de.R)(this._destroyed)).subscribe(d=>{const _=this._dragRef,w=d.element.nativeElement;d.disabled?_.disableHandle(w):_.enableHandle(w)})}}$e._dragInstances=[],$e.\u0275fac=function(d){return new(d||$e)(U.Y36(U.SBq),U.Y36(Hn,12),U.Y36(e.K0),U.Y36(U.R0b),U.Y36(U.s_b),U.Y36(ii,8),U.Y36(xt.Is,8),U.Y36(We),U.Y36(U.sBO),U.Y36(Zt,10),U.Y36(jt,12))},$e.\u0275dir=U.lG2({type:$e,selectors:[["","cdkDrag",""]],contentQueries:function(d,_,w){if(1&d&&(U.Suo(w,gn,5),U.Suo(w,Di,5),U.Suo(w,Zt,5)),2&d){let E;U.iGM(E=U.CRH())&&(_._previewTemplate=E.first),U.iGM(E=U.CRH())&&(_._placeholderTemplate=E.first),U.iGM(E=U.CRH())&&(_._handles=E)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(d,_){2&d&&U.ekj("cdk-drag-disabled",_.disabled)("cdk-drag-dragging",_._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[U._Bn([{provide:jt,useExisting:$e}]),U.TTD]});class sn{}sn.\u0275fac=function(d){return new(d||sn)},sn.\u0275mod=U.oAB({type:sn}),sn.\u0275inj=U.cJS({providers:[We],imports:[Ge.ZD]})},6269:(dn,Pt,j)=>{"use strict";j.d(Pt,{Qc:()=>$r,Pz:()=>or});const U=Symbol.for("yaml.alias"),e=Symbol.for("yaml.document"),K=Symbol.for("yaml.map"),be=Symbol.for("yaml.pair"),Se=Symbol.for("yaml.scalar"),ce=Symbol.for("yaml.seq"),ee=Symbol.for("yaml.node.type"),ye=s=>!!s&&"object"==typeof s&&s[ee]===U,Le=s=>!!s&&"object"==typeof s&&s[ee]===e,Ce=s=>!!s&&"object"==typeof s&&s[ee]===K,k=s=>!!s&&"object"==typeof s&&s[ee]===be,J=s=>!!s&&"object"==typeof s&&s[ee]===Se,oe=s=>!!s&&"object"==typeof s&&s[ee]===ce;function ie(s){if(s&&"object"==typeof s)switch(s[ee]){case K:case ce:return!0}return!1}function de(s){if(s&&"object"==typeof s)switch(s[ee]){case U:case K:case Se:case ce:return!0}return!1}class ut{constructor(i){Object.defineProperty(this,ee,{value:i})}}const Kt=Symbol("break visit"),Ft=Symbol("skip children"),dt=Symbol("remove node");function Ge(s,i){"object"==typeof i&&(i.Collection||i.Node||i.Value)&&(i=Object.assign({Alias:i.Node,Map:i.Node,Scalar:i.Node,Seq:i.Node},i.Value&&{Map:i.Value,Scalar:i.Value,Seq:i.Value},i.Collection&&{Map:i.Collection,Seq:i.Collection},i)),Le(s)?xt(null,s.contents,i,Object.freeze([s]))===dt&&(s.contents=null):xt(null,s,i,Object.freeze([]))}function xt(s,i,o,a){let c;if("function"==typeof o?c=o(s,i,a):Ce(i)?o.Map&&(c=o.Map(s,i,a)):oe(i)?o.Seq&&(c=o.Seq(s,i,a)):k(i)?o.Pair&&(c=o.Pair(s,i,a)):J(i)?o.Scalar&&(c=o.Scalar(s,i,a)):ye(i)&&o.Alias&&(c=o.Alias(s,i,a)),de(c)||k(c)){const h=a[a.length-1];if(ie(h))h.items[s]=c;else if(k(h))"key"===s?h.key=c:h.value=c;else{if(!Le(h)){const g=ye(h)?"alias":"scalar";throw new Error(`Cannot replace node with ${g} parent`)}h.contents=c}return xt(s,c,o,a)}if("symbol"!=typeof c)if(ie(i)){a=Object.freeze(a.concat(i));for(let h=0;h<i.items.length;++h){const g=xt(h,i.items[h],o,a);if("number"==typeof g)h=g-1;else{if(g===Kt)return Kt;g===dt&&(i.items.splice(h,1),h-=1)}}}else if(k(i)){a=Object.freeze(a.concat(i));const h=xt("key",i.key,o,a);if(h===Kt)return Kt;h===dt&&(i.key=null);const g=xt("value",i.value,o,a);if(g===Kt)return Kt;g===dt&&(i.value=null)}return c}Ge.BREAK=Kt,Ge.SKIP=Ft,Ge.REMOVE=dt;const ht={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class rt{constructor(i,o){this.marker=null,this.yaml=Object.assign({},rt.defaultYaml,i),this.tags=Object.assign({},rt.defaultTags,o)}atDocument(){const i=new rt(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:rt.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},rt.defaultTags)}return i}add(i,o){this.atNextDocument&&(this.yaml={explicit:rt.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},rt.defaultTags),this.atNextDocument=!1);const a=i.trim().split(/[ \t]+/),c=a.shift();switch(c){case"%TAG":{if(2!==a.length&&(o(0,"%TAG directive should contain exactly two parts"),a.length<2))return!1;const[h,g]=a;return this.tags[h]=g,!0}case"%YAML":{if(this.yaml.explicit=!0,a.length<1)return o(0,"%YAML directive should contain exactly one part"),!1;const[h]=a;return"1.1"===h||"1.2"===h?(this.yaml.version=h,!0):(o(6,`Unsupported YAML version ${h}`,!0),!1)}default:return o(0,`Unknown directive ${c}`,!0),!1}}tagName(i,o){if("!"===i)return"!";if("!"!==i[0])return o(`Not a valid tag: ${i}`),null;if("<"===i[1]){const g=i.slice(2,-1);return"!"===g||"!!"===g?(o(`Verbatim tags aren't resolved, so ${i} is invalid.`),null):(">"!==i[i.length-1]&&o("Verbatim tags must end with a >"),g)}const[,a,c]=i.match(/^(.*!)([^!]*)$/);c||o(`The ${i} tag has no suffix`);const h=this.tags[a];return h?h+decodeURIComponent(c):"!"===a?i:(o(`Could not resolve tag: ${i}`),null)}tagString(i){for(const[o,a]of Object.entries(this.tags))if(i.startsWith(a))return o+i.substring(a.length).replace(/[!,[\]{}]/g,i=>ht[i]);return"!"===i[0]?i:`!<${i}>`}toString(i){const o=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],a=Object.entries(this.tags);let c;if(i&&a.length>0&&de(i.contents)){const h={};Ge(i.contents,(g,x)=>{de(x)&&x.tag&&(h[x.tag]=!0)}),c=Object.keys(h)}else c=[];for(const[h,g]of a)"!!"===h&&"tag:yaml.org,2002:"===g||(!i||c.some(x=>x.startsWith(g)))&&o.push(`%TAG ${h} ${g}`);return o.join("\n")}}function Un(s){if(/[\x00-\x19\s,[\]{}]/.test(s)){const o=`Anchor must not contain whitespace or control characters: ${JSON.stringify(s)}`;throw new Error(o)}return!0}function _i(s){const i=new Set;return Ge(s,{Value(o,a){a.anchor&&i.add(a.anchor)}}),i}function ti(s,i){for(let o=1;;++o){const a=`${s}${o}`;if(!i.has(a))return a}}rt.defaultYaml={explicit:!1,version:"1.2"},rt.defaultTags={"!!":"tag:yaml.org,2002:"};class bn extends ut{constructor(i){super(U),this.source=i,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(i){let o;return Ge(i,{Node:(a,c)=>{if(c===this)return Ge.BREAK;c.anchor===this.source&&(o=c)}}),o}toJSON(i,o){if(!o)return{source:this.source};const{anchors:a,doc:c,maxAliasCount:h}=o,g=this.resolve(c);if(!g){const A=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(A)}const x=a.get(g);if(!x||void 0===x.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(h>=0&&(x.count+=1,0===x.aliasCount&&(x.aliasCount=wn(c,g,a)),x.count*x.aliasCount>h)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return x.res}toString(i,o,a){const c=`*${this.source}`;if(i){if(Un(this.source),i.options.verifyAliasOrder&&!i.anchors.has(this.source)){const h=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(h)}if(i.implicitKey)return`${c} `}return c}}function wn(s,i,o){if(ye(i)){const a=i.resolve(s),c=o&&a&&o.get(a);return c?c.count*c.aliasCount:0}if(ie(i)){let a=0;for(const c of i.items){const h=wn(s,c,o);h>a&&(a=h)}return a}if(k(i)){const a=wn(s,i.key,o),c=wn(s,i.value,o);return Math.max(a,c)}return 1}function pt(s,i,o){if(Array.isArray(s))return s.map((a,c)=>pt(a,String(c),o));if(s&&"function"==typeof s.toJSON){if(!o||!(s=>(J(s)||ie(s))&&!!s.anchor)(s))return s.toJSON(i,o);const a={aliasCount:0,count:1,res:void 0};o.anchors.set(s,a),o.onCreate=h=>{a.res=h,delete o.onCreate};const c=s.toJSON(i,o);return o.onCreate&&o.onCreate(c),c}return"bigint"!=typeof s||o&&o.keep?s:Number(s)}const Yt=s=>!s||"function"!=typeof s&&"object"!=typeof s;class le extends ut{constructor(i){super(Se),this.value=i}toJSON(i,o){return o&&o.keep?this.value:pt(this.value,i,o)}toString(){return String(this.value)}}le.BLOCK_FOLDED="BLOCK_FOLDED",le.BLOCK_LITERAL="BLOCK_LITERAL",le.PLAIN="PLAIN",le.QUOTE_DOUBLE="QUOTE_DOUBLE",le.QUOTE_SINGLE="QUOTE_SINGLE";function ze(s,i,o){var a,c;if(de(s))return s;if(k(s)){const F=null===(c=(a=o.schema[K]).createNode)||void 0===c?void 0:c.call(a,o.schema,null,o);return F.items.push(s),F}(s instanceof String||s instanceof Number||s instanceof Boolean||"function"==typeof BigInt&&s instanceof BigInt)&&(s=s.valueOf());const{onAnchor:h,onTagObj:g,schema:x,sourceObjects:A}=o;let I;if(s&&"object"==typeof s){if(I=A.get(s),I)return I.anchor||(I.anchor=h(s)),new bn(I.anchor);I={anchor:null,node:null},A.set(s,I)}i&&i.startsWith("!!")&&(i="tag:yaml.org,2002:"+i.slice(2));let Z=function Dt(s,i,o){if(i){const a=o.filter(h=>h.tag===i),c=a.find(h=>!h.format)||a[0];if(!c)throw new Error(`Tag ${i} not found`);return c}return o.find(a=>a.identify&&a.identify(s)&&!a.format)}(s,i,x.tags);if(!Z){if(s&&"function"==typeof s.toJSON&&(s=s.toJSON()),!s||"object"!=typeof s)return new le(s);Z=s instanceof Map?x[K]:Symbol.iterator in Object(s)?x[ce]:x[K]}g&&(g(Z),delete o.onTagObj);const $=(null==Z?void 0:Z.createNode)?Z.createNode(o.schema,s,o):new le(s);return i&&($.tag=i),I&&(I.node=$),$}function pn(s,i,o){let a=o;for(let c=i.length-1;c>=0;--c){const h=i[c];if("number"==typeof h&&Number.isInteger(h)&&h>=0){const g=[];g[h]=a,a=g}else{const g={};Object.defineProperty(g,"symbol"==typeof h?h:String(h),{value:a,writable:!0,enumerable:!0,configurable:!0}),a=g}}return ze(a,void 0,{onAnchor(){throw new Error("Repeated objects are not supported here")},schema:s,sourceObjects:new Map})}const Tn=s=>null==s||"object"==typeof s&&!!s[Symbol.iterator]().next().done;class qn extends ut{constructor(i,o){super(i),Object.defineProperty(this,"schema",{value:o,configurable:!0,enumerable:!1,writable:!0})}addIn(i,o){if(Tn(i))this.add(o);else{const[a,...c]=i,h=this.get(a,!0);if(ie(h))h.addIn(c,o);else{if(void 0!==h||!this.schema)throw new Error(`Expected YAML collection at ${a}. Remaining path: ${c}`);this.set(a,pn(this.schema,c,o))}}}deleteIn([i,...o]){if(0===o.length)return this.delete(i);const a=this.get(i,!0);if(ie(a))return a.deleteIn(o);throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}getIn([i,...o],a){const c=this.get(i,!0);return 0===o.length?!a&&J(c)?c.value:c:ie(c)?c.getIn(o,a):void 0}hasAllNullValues(i){return this.items.every(o=>{if(!k(o))return!1;const a=o.value;return null==a||i&&J(a)&&null==a.value&&!a.commentBefore&&!a.comment&&!a.tag})}hasIn([i,...o]){if(0===o.length)return this.has(i);const a=this.get(i,!0);return!!ie(a)&&a.hasIn(o)}setIn([i,...o],a){if(0===o.length)this.set(i,a);else{const c=this.get(i,!0);if(ie(c))c.setIn(o,a);else{if(void 0!==c||!this.schema)throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`);this.set(i,pn(this.schema,o,a))}}}}qn.maxFlowStringSingleLineLength=60;const En="block",An="quoted";function Tt(s,i,o="flow",{indentAtStart:a,lineWidth:c=80,minContentWidth:h=20,onFold:g,onOverflow:x}={}){if(!c||c<0)return s;const A=Math.max(1+h,1+c-i.length);if(s.length<=A)return s;const I=[],Z={};let $=c-i.length;"number"==typeof a&&(a>c-Math.max(2,h)?I.push(0):$=c-a);let F,Y,ue,he=!1,G=-1,z=-1,V=-1;for(o===En&&(G=Xe(s,G),-1!==G&&($=G+A));ue=s[G+=1];){if(o===An&&"\\"===ue){switch(z=G,s[G+1]){case"x":G+=3;break;case"u":G+=5;break;case"U":G+=9;break;default:G+=1}V=G}if("\n"===ue)o===En&&(G=Xe(s,G)),$=G+A,F=void 0;else{if(" "===ue&&Y&&" "!==Y&&"\n"!==Y&&"\t"!==Y){const se=s[G+1];se&&" "!==se&&"\n"!==se&&"\t"!==se&&(F=G)}if(G>=$)if(F)I.push(F),$=F+A,F=void 0;else if(o===An){for(;" "===Y||"\t"===Y;)Y=ue,ue=s[G+=1],he=!0;const se=G>V+1?G-2:z-1;if(Z[se])return s;I.push(se),Z[se]=!0,$=se+A,F=void 0}else he=!0}Y=ue}if(he&&x&&x(),0===I.length)return s;g&&g();let fe=s.slice(0,I[0]);for(let ue=0;ue<I.length;++ue){const se=I[ue],re=I[ue+1]||s.length;0===se?fe=`\n${i}${s.slice(0,re)}`:(o===An&&Z[se]&&(fe+=`${s[se]}\\`),fe+=`\n${i}${s.slice(se+1,re)}`)}return fe}function Xe(s,i){let o=s[i+1];for(;" "===o||"\t"===o;){do{o=s[i+=1]}while(o&&"\n"!==o);o=s[i+1]}return i}const kt=s=>({indentAtStart:s.indentAtStart,lineWidth:s.options.lineWidth,minContentWidth:s.options.minContentWidth}),Nt=s=>/^(%|---|\.\.\.)/m.test(s);function Lt(s,i){const o=JSON.stringify(s);if(i.options.doubleQuotedAsJSON)return o;const{implicitKey:a}=i,c=i.options.doubleQuotedMinMultiLineLength,h=i.indent||(Nt(s)?"  ":"");let g="",x=0;for(let A=0,I=o[A];I;I=o[++A])if(" "===I&&"\\"===o[A+1]&&"n"===o[A+2]&&(g+=o.slice(x,A)+"\\ ",A+=1,x=A,I="\\"),"\\"===I)switch(o[A+1]){case"u":{g+=o.slice(x,A);const Z=o.substr(A+2,4);switch(Z){case"0000":g+="\\0";break;case"0007":g+="\\a";break;case"000b":g+="\\v";break;case"001b":g+="\\e";break;case"0085":g+="\\N";break;case"00a0":g+="\\_";break;case"2028":g+="\\L";break;case"2029":g+="\\P";break;default:"00"===Z.substr(0,2)?g+="\\x"+Z.substr(2):g+=o.substr(A,6)}A+=5,x=A+1}break;case"n":if(a||'"'===o[A+2]||o.length<c)A+=1;else{for(g+=o.slice(x,A)+"\n\n";"\\"===o[A+2]&&"n"===o[A+3]&&'"'!==o[A+4];)g+="\n",A+=2;g+=h," "===o[A+2]&&(g+="\\"),A+=1,x=A+1}break;default:A+=1}return g=x?g+o.slice(x):o,a?g:Tt(g,h,An,kt(i))}function gt(s,i){if(i.implicitKey){if(/\n/.test(s))return Lt(s,i)}else if(/[ \t]\n|\n[ \t]/.test(s))return Lt(s,i);const o=i.indent||(Nt(s)?"  ":""),a="'"+s.replace(/'/g,"''").replace(/\n+/g,`$&\n${o}`)+"'";return i.implicitKey?a:Tt(a,o,"flow",kt(i))}function _t({comment:s,type:i,value:o},a,c,h){if(/\n[\t ]+$/.test(o)||/^\s*$/.test(o))return Lt(o,a);const g=a.indent||(a.forceBlockIndent||Nt(o)?"  ":""),x=i!==le.BLOCK_FOLDED&&(i===le.BLOCK_LITERAL||!function Fn(s,i,o){if(!i||i<0)return!1;const a=i-o,c=s.length;if(c<=a)return!1;for(let h=0,g=0;h<c;++h)if("\n"===s[h]){if(h-g>a)return!0;if(g=h+1,c-g<=a)return!1}return!0}(o,a.options.lineWidth,g.length));if(!o)return x?"|\n":">\n";let A,I;for(I=o.length;I>0;--I){const ue=o[I-1];if("\n"!==ue&&"\t"!==ue&&" "!==ue)break}let Z=o.substring(I);const $=Z.indexOf("\n");-1===$?A="-":o===Z||$!==Z.length-1?(A="+",h&&h()):A="",Z&&(o=o.slice(0,-Z.length),"\n"===Z[Z.length-1]&&(Z=Z.slice(0,-1)),Z=Z.replace(/\n+(?!\n|$)/g,`$&${g}`));let Y,F=!1,he=-1;for(Y=0;Y<o.length;++Y){const ue=o[Y];if(" "===ue)F=!0;else{if("\n"!==ue)break;he=Y}}let G=o.substring(0,he<Y?he+1:Y);G&&(o=o.substring(G.length),G=G.replace(/\n+/g,`$&${g}`));let V=(x?"|":">")+(F?g?"2":"1":"")+A;if(s&&(V+=" #"+s.replace(/ ?[\r\n]+/g," "),c&&c()),x)return`${V}\n${g}${G}${o=o.replace(/\n+/g,`$&${g}`)}${Z}`;return`${V}\n${g}${Tt(`${G}${o=o.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${g}`)}${Z}`,g,En,kt(a))}`}function Qe(s,i,o,a){const{implicitKey:c,inFlow:h}=i,g="string"==typeof s.value?s:Object.assign({},s,{value:String(s.value)});let{type:x}=s;x!==le.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(g.value)&&(x=le.QUOTE_DOUBLE);const A=Z=>{switch(Z){case le.BLOCK_FOLDED:case le.BLOCK_LITERAL:return c||h?Lt(g.value,i):_t(g,i,o,a);case le.QUOTE_DOUBLE:return Lt(g.value,i);case le.QUOTE_SINGLE:return gt(g.value,i);case le.PLAIN:return function pr(s,i,o,a){var c;const{type:h,value:g}=s,{actualString:x,implicitKey:A,indent:I,inFlow:Z}=i;if(A&&/[\n[\]{},]/.test(g)||Z&&/[[\]{},]/.test(g))return Lt(g,i);if(!g||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(g)){const F=-1!==g.indexOf('"'),Y=-1!==g.indexOf("'");let he;return he=F&&!Y?gt:Y&&!F?Lt:i.options.singleQuote?gt:Lt,A||Z||-1===g.indexOf("\n")?he(g,i):_t(s,i,o,a)}if(!A&&!Z&&h!==le.PLAIN&&-1!==g.indexOf("\n"))return _t(s,i,o,a);if(""===I&&Nt(g))return i.forceBlockIndent=!0,_t(s,i,o,a);const $=g.replace(/\n+/g,`$&\n${I}`);if(x)for(const F of i.doc.schema.tags)if(F.default&&"tag:yaml.org,2002:str"!==F.tag&&(null===(c=F.test)||void 0===c?void 0:c.test($)))return Lt(g,i);return A?$:Tt($,I,"flow",kt(i))}(g,i,o,a);default:return null}};let I=A(x);if(null===I){const{defaultKeyType:Z,defaultStringType:$}=i.options,F=c&&Z||$;if(I=A(F),null===I)throw new Error(`Unsupported default string type ${F}`)}return I}const ni=(s,i)=>({anchors:new Set,doc:s,indent:"",indentStep:"number"==typeof i.indent?" ".repeat(i.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true",verifyAliasOrder:!0},i)});function Re(s,i,o,a){if(k(s))return s.toString(i,o,a);if(ye(s))return s.toString(i);let c;const h=de(s)?s:i.doc.createNode(s,{onTagObj:A=>c=A});c||(c=function Sn(s,i){if(i.tag){const c=s.filter(h=>h.tag===i.tag);if(c.length>0)return c.find(h=>h.format===i.format)||c[0]}let o,a;if(J(i)){a=i.value;const c=s.filter(h=>h.identify&&h.identify(a));o=c.find(h=>h.format===i.format)||c.find(h=>!h.format)}else a=i,o=s.find(c=>c.nodeClass&&a instanceof c.nodeClass);if(!o){const c=a&&a.constructor?a.constructor.name:typeof a;throw new Error(`Tag not resolved for ${c} value`)}return o}(i.doc.schema.tags,h));const g=function et(s,i,{anchors:o,doc:a}){const c=[],h=(J(s)||ie(s))&&s.anchor;return h&&Un(h)&&(o.add(h),c.push(`&${h}`)),s.tag?c.push(a.directives.tagString(s.tag)):i.default||c.push(a.directives.tagString(i.tag)),c.join(" ")}(h,c,i);g.length>0&&(i.indentAtStart=(i.indentAtStart||0)+g.length+1);const x="function"==typeof c.stringify?c.stringify(h,i,o,a):J(h)?Qe(h,i,o,a):h.toString(i,o,a);return g?J(h)||"{"===x[0]||"["===x[0]?`${g} ${x}`:`${g}\n${i.indent}${x}`:x}const mt=(s,i)=>/^\n+$/.test(s)?s.substring(1):s.replace(/^(?!$)(?: $)?/gm,`${i}#`);function Jt(s,i,o){return o?o.includes("\n")?`${s}\n`+mt(o,i):s.endsWith(" ")?`${s}#${o}`:`${s} #${o}`:s}function Ii(s,i){("debug"===s||"warn"===s)&&("undefined"!=typeof process&&process.emitWarning?process.emitWarning(i):console.warn(i))}function jt(s,i,{key:o,value:a}){if(s&&s.doc.schema.merge&&Jn(o))if(oe(a))for(const c of a.items)Vt(s,i,c);else if(Array.isArray(a))for(const c of a)Vt(s,i,c);else Vt(s,i,a);else{const c=pt(o,"",s);if(i instanceof Map)i.set(c,pt(a,c,s));else if(i instanceof Set)i.add(c);else{const h=function ii(s,i,o){if(null===i)return"";if("object"!=typeof i)return String(i);if(de(s)&&o&&o.doc){const a=ni(o.doc,{});a.anchors=new Set;for(const h of o.anchors.keys())a.anchors.add(h.anchor);a.inFlow=!0,a.inStringifyKey=!0;const c=s.toString(a);if(!o.mapKeyWarned){let h=JSON.stringify(c);h.length>40&&(h=h.substring(0,36)+'..."'),Ii(o.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${h}. Set mapAsMap: true to use object keys.`),o.mapKeyWarned=!0}return c}return JSON.stringify(i)}(o,c,s),g=pt(a,h,s);h in i?Object.defineProperty(i,h,{value:g,writable:!0,enumerable:!0,configurable:!0}):i[h]=g}}return i}const Jn=s=>"<<"===s||J(s)&&"<<"===s.value&&(!s.type||s.type===le.PLAIN);function Vt(s,i,o){const a=s&&ye(o)?o.resolve(s.doc):null;if(!Ce(a))throw new Error("Merge sources must be map aliases");const c=a.toJSON(null,s,Map);for(const[h,g]of c)i instanceof Map?i.has(h)||i.set(h,g):i instanceof Set?i.add(h):Object.prototype.hasOwnProperty.call(i,h)||Object.defineProperty(i,h,{value:g,writable:!0,enumerable:!0,configurable:!0});return i}function ri(s,i,o){const a=ze(s,void 0,o),c=ze(i,void 0,o);return new ot(a,c)}class ot{constructor(i,o=null){Object.defineProperty(this,ee,{value:be}),this.key=i,this.value=o}toJSON(i,o){return jt(o,o&&o.mapAsMap?new Map:{},this)}toString(i,o,a){return i&&i.doc?function Bn({key:s,value:i},o,a,c){const{allNullValues:h,doc:g,indent:x,indentStep:A,options:{indentSeq:I,simpleKeys:Z}}=o;let $=de(s)&&s.comment||null;if(Z){if($)throw new Error("With simple keys, key nodes cannot have comments");if(ie(s))throw new Error("With simple keys, collection cannot be used as a key value")}let F=!Z&&(!s||$&&null==i&&!o.inFlow||ie(s)||(J(s)?s.type===le.BLOCK_FOLDED||s.type===le.BLOCK_LITERAL:"object"==typeof s));o=Object.assign({},o,{allNullValues:!1,implicitKey:!F&&(Z||!h),indent:x+A});let Y=!1,he=!1,G=Re(s,o,()=>Y=!0,()=>he=!0);if(!F&&!o.inFlow&&G.length>1024){if(Z)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");F=!0}if(o.inFlow){if(h||null==i)return Y&&a&&a(),F?`? ${G}`:G}else if(h&&!Z||null==i&&F)return Y&&($=null),he&&!$&&c&&c(),Jt(`? ${G}`,o.indent,$);Y&&($=null),G=F?`? ${Jt(G,o.indent,$)}\n${x}:`:Jt(`${G}:`,o.indent,$);let z="",V=null;de(i)?(i.spaceBefore&&(z="\n"),i.commentBefore&&(z+=`\n${mt(i.commentBefore,o.indent)}`),V=i.comment):i&&"object"==typeof i&&(i=g.createNode(i)),o.implicitKey=!1,!F&&!$&&J(i)&&(o.indentAtStart=G.length+1),he=!1,!I&&A.length>=2&&!o.inFlow&&!F&&oe(i)&&!i.flow&&!i.tag&&!i.anchor&&(o.indent=o.indent.substr(2));let fe=!1;const ue=Re(i,o,()=>fe=!0,()=>he=!0);let se=" ";return z||$?se=`${z}\n${o.indent}`:!F&&ie(i)?(!("["===ue[0]||"{"===ue[0])||ue.includes("\n"))&&(se=`\n${o.indent}`):"\n"===ue[0]&&(se=""),o.inFlow?(fe&&a&&a(),G+se+ue):(fe&&(V=null),he&&!V&&c&&c(),Jt(G+se+ue,o.indent,V))}(this,i,o,a):JSON.stringify(this)}}const Hn={intAsBigInt:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};function vt({comment:s,flow:i,items:o},a,{blockItem:c,flowChars:h,itemIndent:g,onChompKeep:x,onComment:A}){const{indent:I,indentStep:Z}=a,$=i||a.inFlow;$&&(g+=Z),a=Object.assign({},a,{indent:g,inFlow:$,type:null});let F=!0,Y=!1;const he=o.reduce((z,V,fe)=>{let ue=null;if(de(V)){!Y&&V.spaceBefore&&z.push({comment:!0,str:""});let re=V.commentBefore;if(re&&Y&&(re=re.replace(/^\n+/,"")),re){/^\n+$/.test(re)&&(re=re.substring(1));for(const qe of re.match(/^.*$/gm)){const di=" "===qe?"#":qe?`#${qe}`:"";z.push({comment:!0,str:di})}}V.comment&&(ue=V.comment,F=!1)}else if(k(V)){const re=de(V.key)?V.key:null;if(re){!Y&&re.spaceBefore&&z.push({comment:!0,str:""});let qe=re.commentBefore;if(qe&&Y&&(qe=qe.replace(/^\n+/,"")),qe){/^\n+$/.test(qe)&&(qe=qe.substring(1));for(const di of qe.match(/^.*$/gm)){const Ut=" "===di?"#":di?`#${di}`:"";z.push({comment:!0,str:Ut})}}re.comment&&(F=!1)}if($){const qe=de(V.value)?V.value:null;qe?(qe.comment&&(ue=qe.comment),(qe.comment||qe.commentBefore)&&(F=!1)):null==V.value&&re&&re.comment&&(ue=re.comment)}}Y=!1;let se=Re(V,a,()=>ue=null,()=>Y=!0);return $&&fe<o.length-1&&(se+=","),se=Jt(se,g,ue),Y&&(ue||$)&&(Y=!1),z.push({comment:!1,str:se}),z},[]);let G;if(0===he.length)G=h.start+h.end;else if($){const{start:z,end:V}=h,fe=he.map(se=>se.str);let ue=2;for(const se of he){if(se.comment||se.str.includes("\n")){F=!1;break}ue+=se.str.length+2}if(!F||ue>qn.maxFlowStringSingleLineLength){G=z;for(const se of fe)G+=se?`\n${Z}${I}${se}`:"\n";G+=`\n${I}${V}`}else G=`${z} ${fe.join(" ")} ${V}`}else{const z=he.map(c);G=z.shift()||"";for(const V of z)G+=V?`\n${I}${V}`:"\n"}return s?(G+="\n"+mt(s,I),A&&A()):Y&&x&&x(),G}function Zt(s,i){const o=J(i)?i.value:i;for(const a of s)if(k(a)&&(a.key===i||a.key===o||J(a.key)&&a.key.value===o))return a}class Ye extends qn{constructor(i){super(K,i),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(i,o){let a;a=k(i)?i:new ot(i&&"object"==typeof i&&"key"in i?i.key:i,i.value);const c=Zt(this.items,a.key),h=this.schema&&this.schema.sortMapEntries;if(c){if(!o)throw new Error(`Key ${a.key} already set`);J(c.value)&&Yt(a.value)?c.value.value=a.value:c.value=a.value}else if(h){const g=this.items.findIndex(x=>h(a,x)<0);-1===g?this.items.push(a):this.items.splice(g,0,a)}else this.items.push(a)}delete(i){const o=Zt(this.items,i);return!!o&&this.items.splice(this.items.indexOf(o),1).length>0}get(i,o){const a=Zt(this.items,i),c=a&&a.value;return!o&&J(c)?c.value:c}has(i){return!!Zt(this.items,i)}set(i,o){this.add(new ot(i,o),!0)}toJSON(i,o,a){const c=a?new a:o&&o.mapAsMap?new Map:{};o&&o.onCreate&&o.onCreate(c);for(const h of this.items)jt(o,c,h);return c}toString(i,o,a){if(!i)return JSON.stringify(this);for(const c of this.items)if(!k(c))throw new Error(`Map items must all be pairs; found ${JSON.stringify(c)} instead`);return!i.allNullValues&&this.hasAllNullValues(!1)&&(i=Object.assign({},i,{allNullValues:!0})),vt(this,i,{blockItem:c=>c.str,flowChars:{start:"{",end:"}"},itemIndent:i.indent||"",onChompKeep:a,onComment:o})}}const Ht={collection:"map",createNode:function Di(s,i,o){const{keepUndefined:a,replacer:c}=o,h=new Ye(s),g=(x,A)=>{if("function"==typeof c)A=c.call(i,x,A);else if(Array.isArray(c)&&!c.includes(x))return;(void 0!==A||a)&&h.items.push(ri(x,A,o))};if(i instanceof Map)for(const[x,A]of i)g(x,A);else if(i&&"object"==typeof i)for(const x of Object.keys(i))g(x,i[x]);return"function"==typeof s.sortMapEntries&&h.items.sort(s.sortMapEntries),h},default:!0,nodeClass:Ye,tag:"tag:yaml.org,2002:map",resolve:(s,i)=>(Ce(s)||i("Expected a mapping for this tag"),s)};class gn extends qn{constructor(i){super(ce,i),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(i){this.items.push(i)}delete(i){const o=st(i);return"number"==typeof o&&this.items.splice(o,1).length>0}get(i,o){const a=st(i);if("number"!=typeof a)return;const c=this.items[a];return!o&&J(c)?c.value:c}has(i){const o=st(i);return"number"==typeof o&&o<this.items.length}set(i,o){const a=st(i);if("number"!=typeof a)throw new Error(`Expected a valid index, not ${i}.`);const c=this.items[a];J(c)&&Yt(o)?c.value=o:this.items[a]=o}toJSON(i,o){const a=[];o&&o.onCreate&&o.onCreate(a);let c=0;for(const h of this.items)a.push(pt(h,String(c++),o));return a}toString(i,o,a){return i?vt(this,i,{blockItem:c=>c.comment?c.str:`- ${c.str}`,flowChars:{start:"[",end:"]"},itemIndent:(i.indent||"")+"  ",onChompKeep:a,onComment:o}):JSON.stringify(this)}}function st(s){let i=J(s)?s.value:s;return i&&"string"==typeof i&&(i=Number(i)),"number"==typeof i&&Number.isInteger(i)&&i>=0?i:null}const $e={collection:"seq",createNode:function On(s,i,o){const{replacer:a}=o,c=new gn(s);if(i&&Symbol.iterator in Object(i)){let h=0;for(let g of i){if("function"==typeof a){const x=i instanceof Set?g:String(h++);g=a.call(i,x,g)}c.items.push(ze(g,void 0,o))}}return c},default:!0,nodeClass:gn,tag:"tag:yaml.org,2002:seq",resolve:(s,i)=>(oe(s)||i("Expected a sequence for this tag"),s)},sn={identify:s=>"string"==typeof s,default:!0,tag:"tag:yaml.org,2002:str",resolve:s=>s,stringify:(s,i,o,a)=>Qe(s,i=Object.assign({actualString:!0},i),o,a)},L={identify:s=>null==s,createNode:()=>new le(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new le(null),stringify:({source:s},i)=>s&&L.test.test(s)?s:i.options.nullStr},d={identify:s=>"boolean"==typeof s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:s=>new le("t"===s[0]||"T"===s[0]),stringify({source:s,value:i},o){if(s&&d.test.test(s)){if(i===("t"===s[0]||"T"===s[0]))return s}return i?o.options.trueStr:o.options.falseStr}};function _({format:s,minFractionDigits:i,tag:o,value:a}){if("bigint"==typeof a)return String(a);const c="number"==typeof a?a:Number(a);if(!isFinite(c))return isNaN(c)?".nan":c<0?"-.inf":".inf";let h=JSON.stringify(a);if(!s&&i&&(!o||"tag:yaml.org,2002:float"===o)&&/^\d/.test(h)){let g=h.indexOf(".");g<0&&(g=h.length,h+=".");let x=i-(h.length-g-1);for(;x-- >0;)h+="0"}return h}const w={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:s=>"nan"===s.slice(-3).toLowerCase()?NaN:"-"===s[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_},E={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:s=>parseFloat(s),stringify:({value:s})=>Number(s).toExponential()},P={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(s){const i=new le(parseFloat(s)),o=s.indexOf(".");return-1!==o&&"0"===s[s.length-1]&&(i.minFractionDigits=s.length-o-1),i},stringify:_},N=s=>"bigint"==typeof s||Number.isInteger(s),Q=(s,i,o,{intAsBigInt:a})=>a?BigInt(s):parseInt(s.substring(i),o);function te(s,i,o){const{value:a}=s;return N(a)&&a>=0?o+a.toString(i):_(s)}const pe={identify:s=>N(s)&&s>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(s,i,o)=>Q(s,2,8,o),stringify:s=>te(s,8,"0o")},ke={identify:N,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(s,i,o)=>Q(s,0,10,o),stringify:_},at={identify:s=>N(s)&&s>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(s,i,o)=>Q(s,2,16,o),stringify:s=>te(s,16,"0x")},Et=[Ht,$e,sn,L,d,pe,ke,at,w,E,P];function At(s){return"bigint"==typeof s||Number.isInteger(s)}const yt=({value:s})=>JSON.stringify(s),$n=[{identify:s=>"string"==typeof s,default:!0,tag:"tag:yaml.org,2002:str",resolve:s=>s,stringify:yt},{identify:s=>null==s,createNode:()=>new le(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:yt},{identify:s=>"boolean"==typeof s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:s=>"true"===s,stringify:yt},{identify:At,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(s,i,{intAsBigInt:o})=>o?BigInt(s):parseInt(s,10),stringify:({value:s})=>At(s)?s.toString():JSON.stringify(s)},{identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:s=>parseFloat(s),stringify:yt}],St={default:!0,tag:"",test:/^/,resolve:(s,i)=>(i(`Unresolved plain scalar ${JSON.stringify(s)}`),s)},ki=[Ht,$e].concat($n,St),oi={identify:s=>s instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(s,i){if("function"==typeof Buffer)return Buffer.from(s,"base64");if("function"==typeof atob){const o=atob(s.replace(/[\n\r]/g,"")),a=new Uint8Array(o.length);for(let c=0;c<o.length;++c)a[c]=o.charCodeAt(c);return a}return i("This environment does not support reading binary tags; either Buffer or atob is required"),s},stringify({comment:s,type:i,value:o},a,c,h){const g=o;let x;if("function"==typeof Buffer)x=g instanceof Buffer?g.toString("base64"):Buffer.from(g.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let A="";for(let I=0;I<g.length;++I)A+=String.fromCharCode(g[I]);x=btoa(A)}}if(i||(i=le.BLOCK_LITERAL),i!==le.QUOTE_DOUBLE){const A=Math.max(a.options.lineWidth-a.indent.length,a.options.minContentWidth),I=Math.ceil(x.length/A),Z=new Array(I);for(let $=0,F=0;$<I;++$,F+=A)Z[$]=x.substr(F,A);x=Z.join(i===le.BLOCK_LITERAL?"\n":" ")}return Qe({comment:s,type:i,value:x},a,c,h)}};function si(s,i){if(oe(s))for(let o=0;o<s.items.length;++o){let a=s.items[o];if(!k(a)){if(Ce(a)){a.items.length>1&&i("Each pair must have its own sequence indicator");const c=a.items[0]||new ot(new le(null));if(a.commentBefore&&(c.key.commentBefore=c.key.commentBefore?`${a.commentBefore}\n${c.key.commentBefore}`:a.commentBefore),a.comment){const h=c.value||c.key;h.comment=h.comment?`${a.comment}\n${h.comment}`:a.comment}a=c}s.items[o]=k(a)?a:new ot(a)}}else i("Expected a sequence for this tag");return s}function mi(s,i,o){const{replacer:a}=o,c=new gn(s);c.tag="tag:yaml.org,2002:pairs";let h=0;if(i&&Symbol.iterator in Object(i))for(let g of i){let x,A;if("function"==typeof a&&(g=a.call(i,String(h++),g)),Array.isArray(g)){if(2!==g.length)throw new TypeError(`Expected [key, value] tuple: ${g}`);x=g[0],A=g[1]}else if(g&&g instanceof Object){const I=Object.keys(g);if(1!==I.length)throw new TypeError(`Expected { key: value } tuple: ${g}`);x=I[0],A=g[x]}else x=g;c.items.push(ri(x,A,o))}return c}const Qn={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:si,createNode:mi};class ai extends gn{constructor(){super(),this.add=Ye.prototype.add.bind(this),this.delete=Ye.prototype.delete.bind(this),this.get=Ye.prototype.get.bind(this),this.has=Ye.prototype.has.bind(this),this.set=Ye.prototype.set.bind(this),this.tag=ai.tag}toJSON(i,o){if(!o)return super.toJSON(i);const a=new Map;o&&o.onCreate&&o.onCreate(a);for(const c of this.items){let h,g;if(k(c)?(h=pt(c.key,"",o),g=pt(c.value,h,o)):h=pt(c,"",o),a.has(h))throw new Error("Ordered maps must not include duplicate keys");a.set(h,g)}return a}}ai.tag="tag:yaml.org,2002:omap";const Gn={collection:"seq",identify:s=>s instanceof Map,nodeClass:ai,default:!1,tag:"tag:yaml.org,2002:omap",resolve(s,i){const o=si(s,i),a=[];for(const{key:c}of o.items)J(c)&&(a.includes(c.value)?i(`Ordered maps must not include duplicate keys: ${c.value}`):a.push(c.value));return Object.assign(new ai,o)},createNode(s,i,o){const a=mi(s,i,o),c=new ai;return c.items=a.items,c}};function lt({value:s,source:i},o){return i&&(s?Ni:li).test.test(i)?i:s?o.options.trueStr:o.options.falseStr}const Ni={identify:s=>!0===s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new le(!0),stringify:lt},li={identify:s=>!1===s,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new le(!1),stringify:lt},kr={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:s=>"nan"===s.slice(-3).toLowerCase()?NaN:"-"===s[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:_},Li={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:s=>parseFloat(s.replace(/_/g,"")),stringify:({value:s})=>Number(s).toExponential()},Ki={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(s){const i=new le(parseFloat(s.replace(/_/g,""))),o=s.indexOf(".");if(-1!==o){const a=s.substring(o+1).replace(/_/g,"");"0"===a[a.length-1]&&(i.minFractionDigits=a.length)}return i},stringify:_},ci=s=>"bigint"==typeof s||Number.isInteger(s);function vi(s,i,o,{intAsBigInt:a}){const c=s[0];if(("-"===c||"+"===c)&&(i+=1),s=s.substring(i).replace(/_/g,""),a){switch(o){case 2:s=`0b${s}`;break;case 8:s=`0o${s}`;break;case 16:s=`0x${s}`}const g=BigInt(s);return"-"===c?BigInt(-1)*g:g}const h=parseInt(s,o);return"-"===c?-1*h:h}function Zi(s,i,o){const{value:a}=s;if(ci(a)){const c=a.toString(i);return a<0?"-"+o+c.substr(1):o+c}return _(s)}const Nr={identify:ci,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(s,i,o)=>vi(s,2,2,o),stringify:s=>Zi(s,2,"0b")},Wn={identify:ci,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(s,i,o)=>vi(s,1,8,o),stringify:s=>Zi(s,8,"0")},Yi={identify:ci,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(s,i,o)=>vi(s,0,10,o),stringify:_},Lr={identify:ci,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(s,i,o)=>vi(s,2,16,o),stringify:s=>Zi(s,16,"0x")};class zt extends Ye{constructor(i){super(i),this.tag=zt.tag}add(i){let o;o=k(i)?i:"object"==typeof i&&"key"in i&&"value"in i&&null===i.value?new ot(i.key,null):new ot(i,null),Zt(this.items,o.key)||this.items.push(o)}get(i,o){const a=Zt(this.items,i);return!o&&k(a)?J(a.key)?a.key.value:a.key:a}set(i,o){if("boolean"!=typeof o)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof o);const a=Zt(this.items,i);a&&!o?this.items.splice(this.items.indexOf(a),1):!a&&o&&this.items.push(new ot(i))}toJSON(i,o){return super.toJSON(i,o,Set)}toString(i,o,a){if(!i)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},i,{allNullValues:!0}),o,a);throw new Error("Set items must all have null values")}}zt.tag="tag:yaml.org,2002:set";const yi={collection:"map",identify:s=>s instanceof Set,nodeClass:zt,default:!1,tag:"tag:yaml.org,2002:set",resolve(s,i){if(Ce(s)){if(s.hasAllNullValues(!0))return Object.assign(new zt,s);i("Set items must all have null values")}else i("Expected a mapping for this tag");return s},createNode(s,i,o){const{replacer:a}=o,c=new zt(s);if(i&&Symbol.iterator in Object(i))for(let h of i)"function"==typeof a&&(h=a.call(i,h,h)),c.items.push(ri(h,null,o));return c}};function fi(s,i){const o=s[0],a="-"===o||"+"===o?s.substring(1):s,c=g=>i?BigInt(g):Number(g),h=a.replace(/_/g,"").split(":").reduce((g,x)=>g*c(60)+c(x),c(0));return"-"===o?c(-1)*h:h}function Ri(s){let{value:i}=s,o=g=>g;if("bigint"==typeof i)o=g=>BigInt(g);else if(isNaN(i)||!isFinite(i))return _(s);let a="";i<0&&(a="-",i*=o(-1));const c=o(60),h=[i%c];return i<60?h.unshift(0):(i=(i-h[0])/c,h.unshift(i%c),i>=60&&(i=(i-h[0])/c,h.unshift(i))),a+h.map(g=>g<10?"0"+String(g):String(g)).join(":").replace(/000000\d*$/,"")}const gr={identify:s=>"bigint"==typeof s||Number.isInteger(s),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(s,i,{intAsBigInt:o})=>fi(s,o),stringify:Ri},Kn={identify:s=>"number"==typeof s,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:s=>fi(s,!1),stringify:Ri},Yn={identify:s=>s instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(s){const i=s.match(Yn.test);if(!i)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,o,a,c,h,g,x]=i.map(Number),A=i[7]?Number((i[7]+"00").substr(1,3)):0;let I=Date.UTC(o,a-1,c,h||0,g||0,x||0,A);const Z=i[8];if(Z&&"Z"!==Z){let $=fi(Z,!1);Math.abs($)<30&&($*=60),I-=6e4*$}return new Date(I)},stringify:({value:s})=>s.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},ji=[Ht,$e,sn,L,Ni,li,Nr,Wn,Yi,Lr,kr,Li,Ki,oi,Gn,Qn,yi,gr,Kn,Yn],_r={core:Et,failsafe:[Ht,$e,sn],json:ki,yaml11:ji,"yaml-1.1":ji},Vi={binary:oi,bool:d,float:P,floatExp:E,floatNaN:w,floatTime:Kn,int:ke,intHex:at,intOct:pe,intTime:gr,map:Ht,null:L,omap:Gn,pairs:Qn,seq:$e,set:yi,timestamp:Yn},mr={"tag:yaml.org,2002:binary":oi,"tag:yaml.org,2002:omap":Gn,"tag:yaml.org,2002:pairs":Qn,"tag:yaml.org,2002:set":yi,"tag:yaml.org,2002:timestamp":Yn};const Ci=(s,i)=>s.key<i.key?-1:s.key>i.key?1:0;class vr{constructor({customTags:i,merge:o,resolveKnownTags:a,schema:c,sortMapEntries:h}){this.merge=!!o,this.name=c||"core",this.knownTags=a?mr:{},this.tags=function Mn(s,i){let o=_r[i];if(!o){const a=Object.keys(_r).filter(c=>"yaml11"!==c).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${a}`)}if(Array.isArray(s))for(const a of s)o=o.concat(a);else"function"==typeof s&&(o=s(o.slice()));return o.map(a=>{if("string"!=typeof a)return a;const c=Vi[a];if(c)return c;const h=Object.keys(Vi).map(g=>JSON.stringify(g)).join(", ");throw new Error(`Unknown custom tag "${a}"; use one of ${h}`)})}(i,this.name),Object.defineProperty(this,K,{value:Ht}),Object.defineProperty(this,Se,{value:sn}),Object.defineProperty(this,ce,{value:$e}),this.sortMapEntries=!0===h?Ci:h||null}}function jn(s,i,o,a){if(a&&"object"==typeof a)if(Array.isArray(a))for(let c=0,h=a.length;c<h;++c){const g=a[c],x=jn(s,a,String(c),g);void 0===x?delete a[c]:x!==g&&(a[c]=x)}else if(a instanceof Map)for(const c of Array.from(a.keys())){const h=a.get(c),g=jn(s,a,c,h);void 0===g?a.delete(c):g!==h&&a.set(c,g)}else if(a instanceof Set)for(const c of Array.from(a)){const h=jn(s,a,c,c);void 0===h?a.delete(c):h!==c&&(a.delete(c),a.add(h))}else for(const[c,h]of Object.entries(a)){const g=jn(s,a,c,h);void 0===g?delete a[c]:g!==h&&(a[c]=g)}return s.call(i,o,a)}class Pn{constructor(i,o,a){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ee,{value:e});let c=null;"function"==typeof o||Array.isArray(o)?c=o:void 0===a&&o&&(a=o,o=void 0);const h=Object.assign({},Hn,a);this.options=h;let{version:g}=h;(null==a?void 0:a.directives)?(this.directives=a.directives.atDocument(),this.directives.yaml.explicit&&(g=this.directives.yaml.version)):this.directives=new rt({version:g}),this.setSchema(g,a),this.contents=void 0===i?null:this.createNode(i,c,a)}add(i){Vn(this.contents)&&this.contents.add(i)}addIn(i,o){Vn(this.contents)&&this.contents.addIn(i,o)}createAlias(i,o){if(!i.anchor){const a=_i(this);i.anchor=!o||a.has(o)?ti(o||"a",a):o}return new bn(i.anchor)}createNode(i,o,a){let c;if("function"==typeof o)i=o.call({"":i},"",i),c=o;else if(Array.isArray(o)){const G=V=>"number"==typeof V||V instanceof String||V instanceof Number,z=o.filter(G).map(String);z.length>0&&(o=o.concat(z)),c=o}else void 0===a&&o&&(a=o,o=void 0);const{anchorPrefix:h,flow:g,keepUndefined:x,onTagObj:A,tag:I}=a||{},{onAnchor:Z,setAnchors:$,sourceObjects:F}=function hn(s,i){const o=[],a=new Map;let c=null;return{onAnchor(h){o.push(h),c||(c=_i(s));const g=ti(i,c);return c.add(g),g},setAnchors(){for(const h of o){const g=a.get(h);if("object"!=typeof g||!g.anchor||!J(g.node)&&!ie(g.node)){const x=new Error("Failed to resolve repeated object (this should not happen)");throw x.source=h,x}g.node.anchor=g.anchor}},sourceObjects:a}}(this,h||"a"),he=ze(i,I,{keepUndefined:null!=x&&x,onAnchor:Z,onTagObj:A,replacer:c,schema:this.schema,sourceObjects:F});return g&&ie(he)&&(he.flow=!0),$(),he}createPair(i,o,a={}){const c=this.createNode(i,null,a),h=this.createNode(o,null,a);return new ot(c,h)}delete(i){return!!Vn(this.contents)&&this.contents.delete(i)}deleteIn(i){return Tn(i)?null!=this.contents&&(this.contents=null,!0):!!Vn(this.contents)&&this.contents.deleteIn(i)}get(i,o){return ie(this.contents)?this.contents.get(i,o):void 0}getIn(i,o){return Tn(i)?!o&&J(this.contents)?this.contents.value:this.contents:ie(this.contents)?this.contents.getIn(i,o):void 0}has(i){return!!ie(this.contents)&&this.contents.has(i)}hasIn(i){return Tn(i)?void 0!==this.contents:!!ie(this.contents)&&this.contents.hasIn(i)}set(i,o){null==this.contents?this.contents=pn(this.schema,[i],o):Vn(this.contents)&&this.contents.set(i,o)}setIn(i,o){Tn(i)?this.contents=o:null==this.contents?this.contents=pn(this.schema,Array.from(i),o):Vn(this.contents)&&this.contents.setIn(i,o)}setSchema(i,o){let a;switch(String(i)){case"1.1":this.directives.yaml.version="1.1",a=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},o);break;case"1.2":this.directives.yaml.version="1.2",a=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},o);break;default:{const c=JSON.stringify(i);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${c}`)}}this.schema=new vr(a)}toJS({json:i,jsonArg:o,mapAsMap:a,maxAliasCount:c,onAnchor:h,reviver:g}={}){const x={anchors:new Map,doc:this,keep:!i,mapAsMap:!0===a,mapKeyWarned:!1,maxAliasCount:"number"==typeof c?c:100,stringify:Re},A=pt(this.contents,o||"",x);if("function"==typeof h)for(const{count:I,res:Z}of x.anchors.values())h(Z,I);return"function"==typeof g?jn(g,{"":A},"",A):A}toJSON(i,o){return this.toJS({json:!0,jsonArg:i,mapAsMap:!1,onAnchor:o})}toString(i={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in i&&(!Number.isInteger(i.indent)||Number(i.indent)<=0)){const o=JSON.stringify(i.indent);throw new Error(`"indent" option must be a positive integer, not ${o}`)}return function zi(s,i){const o=[];let a=!0===i.directives;if(!1!==i.directives){const A=s.directives.toString(s);A?(o.push(A),a=!0):s.directives.marker&&(a=!0)}a&&o.push("---"),s.commentBefore&&(1!==o.length&&o.unshift(""),o.unshift(mt(s.commentBefore,"")));const c=ni(s,i);let h=!1,g=null;if(s.contents){de(s.contents)&&(s.contents.spaceBefore&&a&&o.push(""),s.contents.commentBefore&&o.push(mt(s.contents.commentBefore,"")),c.forceBlockIndent=!!s.comment,g=s.contents.comment);const A=g?void 0:()=>h=!0;let I=Re(s.contents,c,()=>g=null,A);g&&(I=Jt(I,"",g)),"|"!==I[0]&&">"!==I[0]||"---"!==o[o.length-1]?o.push(I):o[o.length-1]=`--- ${I}`}else o.push(Re(s.contents,c));let x=s.comment;return x&&h&&(x=x.replace(/^\n+/,"")),x&&((!h||g)&&""!==o[o.length-1]&&o.push(""),o.push(mt(x,""))),o.join("\n")+"\n"}(this,i)}}function Vn(s){if(ie(s))return!0;throw new Error("Expected a YAML collection as document contents")}class Xi extends Error{constructor(i,o,a,c){super(),this.name=i,this.code=a,this.message=c,this.pos=o}}class bi extends Xi{constructor(i,o,a){super("YAMLParseError",i,o,a)}}class yr extends Xi{constructor(i,o,a){super("YAMLWarning",i,o,a)}}const er=(s,i)=>o=>{if(-1===o.pos[0])return;o.linePos=o.pos.map(x=>i.linePos(x));const{line:a,col:c}=o.linePos[0];o.message+=` at line ${a}, column ${c}`;let h=c-1,g=s.substring(i.lineStarts[a-1],i.lineStarts[a]).replace(/[\n\r]+$/,"");if(h>=60&&g.length>80){const x=Math.min(h-39,g.length-79);g="\u2026"+g.substring(x),h-=x-1}if(g.length>80&&(g=g.substring(0,79)+"\u2026"),a>1&&/^ *$/.test(g.substring(0,h))){let x=s.substring(i.lineStarts[a-2],i.lineStarts[a-1]);x.length>80&&(x=x.substring(0,79)+"\u2026\n"),g=x+g}if(/[^ ]/.test(g)){let x=1;const A=o.linePos[1];A&&A.line===a&&A.col>c&&(x=Math.min(A.col-c,80-h));const I=" ".repeat(h)+"^".repeat(x);o.message+=`:\n\n${g}\n${I}\n`}};function Xt(s,{flow:i,indicator:o,next:a,offset:c,onError:h,startOnNewline:g}){let x=!1,A=g,I=g,Z="",$="",F=!1,Y=!1,he=null,G=null,z=null,V=null,fe=null;for(const re of s)switch(Y&&("space"!==re.type&&"newline"!==re.type&&"comma"!==re.type&&h(re.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),Y=!1),re.type){case"space":!i&&A&&"doc-start"!==o&&"\t"===re.source[0]&&h(re,"TAB_AS_INDENT","Tabs are not allowed as indentation"),I=!0;break;case"comment":{I||h(re,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const qe=re.source.substring(1)||" ";Z?Z+=$+qe:Z=qe,$="",A=!1;break}case"newline":A?Z?Z+=re.source:x=!0:$+=re.source,A=!0,F=!0,I=!0;break;case"anchor":he&&h(re,"MULTIPLE_ANCHORS","A node can have at most one anchor"),he=re,null===fe&&(fe=re.offset),A=!1,I=!1,Y=!0;break;case"tag":G&&h(re,"MULTIPLE_TAGS","A node can have at most one tag"),G=re,null===fe&&(fe=re.offset),A=!1,I=!1,Y=!0;break;case o:(he||G)&&h(re,"BAD_PROP_ORDER",`Anchors and tags must be after the ${re.source} indicator`),V=re,A=!1,I=!1;break;case"comma":if(i){z&&h(re,"UNEXPECTED_TOKEN",`Unexpected , in ${i}`),z=re,A=!1,I=!1;break}default:h(re,"UNEXPECTED_TOKEN",`Unexpected ${re.type} token`),A=!1,I=!1}const ue=s[s.length-1],se=ue?ue.offset+ue.source.length:c;return Y&&a&&"space"!==a.type&&"newline"!==a.type&&"comma"!==a.type&&("scalar"!==a.type||""!==a.source)&&h(a.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:z,found:V,spaceBefore:x,comment:Z,hasNewline:F,anchor:he,tag:G,end:se,start:null!=fe?fe:se}}function C(s){if(!s)return null;switch(s.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(s.source.includes("\n"))return!0;if(s.end)for(const i of s.end)if("newline"===i.type)return!0;return!1;case"flow-collection":for(const i of s.items){for(const o of i.start)if("newline"===o.type)return!0;if(i.sep)for(const o of i.sep)if("newline"===o.type)return!0;if(C(i.key)||C(i.value))return!0}return!1;default:return!0}}function u(s,i,o){const{uniqueKeys:a}=s.options;if(!1===a)return!1;const c="function"==typeof a?a:(h,g)=>h===g||J(h)&&J(g)&&h.value===g.value&&!("<<"===h.value&&s.schema.merge);return i.some(h=>c(h.key,o))}const l="All mapping items must start at the same column";function H(s,i,o,a){let c="";if(s){let h=!1,g="";for(const x of s){const{source:A,type:I}=x;switch(I){case"space":h=!0;break;case"comment":{o&&!h&&a(x,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const Z=A.substring(1)||" ";c?c+=g+Z:c=Z,g="";break}case"newline":c&&(g+=A),h=!0;break;default:a(x,"UNEXPECTED_TOKEN",`Unexpected ${I} at node end`)}i+=A.length}}return{comment:c,offset:i}}const ve="Block collections are not allowed within flow collections",Te=s=>s&&("block-map"===s.type||"block-seq"===s.type);function Rt(s,i,o,a,c){let h;switch(o.type){case"block-map":h=function v({composeNode:s,composeEmptyNode:i},o,a,c){var h;const g=new Ye(o.schema);let x=a.offset;for(const{start:A,key:I,sep:Z,value:$}of a.items){const F=Xt(A,{indicator:"explicit-key-ind",next:I||(null==Z?void 0:Z[0]),offset:x,onError:c,startOnNewline:!0}),Y=!F.found;if(Y){if(I&&("block-seq"===I.type?c(x,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in I&&I.indent!==a.indent&&c(x,"BAD_INDENT",l)),!F.anchor&&!F.tag&&!Z){F.comment&&(g.comment?g.comment+="\n"+F.comment:g.comment=F.comment);continue}}else(null===(h=F.found)||void 0===h?void 0:h.indent)!==a.indent&&c(x,"BAD_INDENT",l);Y&&C(I)&&c(I,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");const he=F.end,G=I?s(o,I,F,c):i(o,he,A,null,F,c);u(o,g.items,G)&&c(he,"DUPLICATE_KEY","Map keys must be unique");const z=Xt(Z||[],{indicator:"map-value-ind",next:$,offset:G.range[2],onError:c,startOnNewline:!I||"block-scalar"===I.type});if(x=z.end,z.found){Y&&("block-map"===(null==$?void 0:$.type)&&!z.hasNewline&&c(x,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),o.options.strict&&F.start<z.found.offset-1024&&c(G.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const V=$?s(o,$,z,c):i(o,x,Z,null,z,c);x=V.range[2],g.items.push(new ot(G,V))}else Y&&c(G.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),z.comment&&(G.comment?G.comment+="\n"+z.comment:G.comment=z.comment),g.items.push(new ot(G))}return g.range=[a.offset,x,x],g}(s,i,o,c);break;case"block-seq":h=function b({composeNode:s,composeEmptyNode:i},o,a,c){const h=new gn(o.schema);let g=a.offset;for(const{start:x,value:A}of a.items){const I=Xt(x,{indicator:"seq-item-ind",next:A,offset:g,onError:c,startOnNewline:!0});if(g=I.end,!I.found){if(!(I.anchor||I.tag||A)){I.comment&&(h.comment=I.comment);continue}A&&"block-seq"===A.type?c(g,"BAD_INDENT","All sequence items must start at the same column"):c(g,"MISSING_CHAR","Sequence item without - indicator")}const Z=A?s(o,A,I,c):i(o,g,x,null,I,c);g=Z.range[2],h.items.push(Z)}return h.range=[a.offset,g,g],h}(s,i,o,c);break;case"flow-collection":h=function tt({composeNode:s,composeEmptyNode:i},o,a,c){const h="{"===a.start.source,g=h?"flow map":"flow sequence",x=h?new Ye(o.schema):new gn(o.schema);x.flow=!0;let A=a.offset;for(let Y=0;Y<a.items.length;++Y){const{start:he,key:G,sep:z,value:V}=a.items[Y],fe=Xt(he,{flow:g,indicator:"explicit-key-ind",next:G||(null==z?void 0:z[0]),offset:A,onError:c,startOnNewline:!1});if(!fe.found){if(!(fe.anchor||fe.tag||z||V)){0===Y&&fe.comma?c(fe.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${g}`):Y<a.items.length-1&&c(fe.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${g}`),fe.comment&&(x.comment?x.comment+="\n"+fe.comment:x.comment=fe.comment);continue}!h&&o.options.strict&&C(G)&&c(G,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===Y)fe.comma&&c(fe.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${g}`);else if(fe.comma||c(fe.start,"MISSING_CHAR",`Missing , between ${g} items`),fe.comment){let ue="";e:for(const se of he)switch(se.type){case"comma":case"space":break;case"comment":ue=se.source.substring(1);break e;default:break e}if(ue){let se=x.items[x.items.length-1];k(se)&&(se=se.value||se.key),se.comment?se.comment+="\n"+ue:se.comment=ue,fe.comment=fe.comment.substring(ue.length+1)}}if(h||z||fe.found){const ue=fe.end,se=G?s(o,G,fe,c):i(o,ue,he,null,fe,c);Te(G)&&c(se.range,"BLOCK_IN_FLOW",ve);const re=Xt(z||[],{flow:g,indicator:"map-value-ind",next:V,offset:se.range[2],onError:c,startOnNewline:!1});if(re.found){if(!h&&!fe.found&&o.options.strict){if(z)for(const Ut of z){if(Ut===re.found)break;if("newline"===Ut.type){c(Ut,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}fe.start<re.found.offset-1024&&c(re.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else V&&("source"in V&&V.source&&":"===V.source[0]?c(V,"MISSING_CHAR",`Missing space after : in ${g}`):c(re.start,"MISSING_CHAR",`Missing , or : between ${g} items`));const qe=V?s(o,V,re,c):re.found?i(o,re.end,z,null,re,c):null;qe?Te(V)&&c(qe.range,"BLOCK_IN_FLOW",ve):re.comment&&(se.comment?se.comment+="\n"+re.comment:se.comment=re.comment);const di=new ot(se,qe);if(h){const Ut=x;u(o,Ut.items,se)&&c(ue,"DUPLICATE_KEY","Map keys must be unique"),Ut.items.push(di)}else{const Ut=new Ye(o.schema);Ut.flow=!0,Ut.items.push(di),x.items.push(Ut)}A=qe?qe.range[2]:re.end}else{const ue=V?s(o,V,fe,c):i(o,fe.end,z,null,fe,c);x.items.push(ue),A=ue.range[2],Te(V)&&c(ue.range,"BLOCK_IN_FLOW",ve)}}const I=h?"}":"]",[Z,...$]=a.end;let F=A;if(Z&&Z.source===I?F=Z.offset+Z.source.length:(c(A+1,"MISSING_CHAR",`Expected ${g} to end with ${I}`),Z&&1!==Z.source.length&&$.unshift(Z)),$.length>0){const Y=H($,F,o.options.strict,c);Y.comment&&(x.comment?x.comment+="\n"+Y.comment:x.comment=Y.comment),x.range=[a.offset,F,Y.offset]}else x.range=[a.offset,F,F];return x}(s,i,o,c)}if(!a)return h;const g=i.directives.tagName(a.source,F=>c(a,"TAG_RESOLVE_FAILED",F));if(!g)return h;const x=h.constructor;if("!"===g||g===x.tagName)return h.tag=x.tagName,h;const A=Ce(h)?"map":"seq";let I=i.schema.tags.find(F=>F.collection===A&&F.tag===g);if(!I){const F=i.schema.knownTags[g];if(!F||F.collection!==A)return c(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${g}`,!0),h.tag=g,h;i.schema.tags.push(Object.assign({},F,{default:!1})),I=F}const Z=I.resolve(h,F=>c(a,"TAG_RESOLVE_FAILED",F),i.options),$=de(Z)?Z:new le(Z);return $.range=h.range,$.tag=g,(null==I?void 0:I.format)&&($.format=I.format),$}function je(s,i,o){const a=s.offset,c=function nt({offset:s,props:i},o,a){if("block-scalar-header"!==i[0].type)return a(i[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:c}=i[0],h=c[0];let g=0,x="",A=-1;for(let F=1;F<c.length;++F){const Y=c[F];if(x||"-"!==Y&&"+"!==Y){const he=Number(Y);!g&&he?g=he:-1===A&&(A=s+F)}else x=Y}-1!==A&&a(A,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${c}`);let I=!1,Z="",$=c.length;for(let F=1;F<i.length;++F){const Y=i[F];switch(Y.type){case"space":I=!0;case"newline":$+=Y.source.length;break;case"comment":o&&!I&&a(Y,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),$+=Y.source.length,Z=Y.source.substring(1);break;case"error":a(Y,"UNEXPECTED_TOKEN",Y.message),$+=Y.source.length;break;default:{a(Y,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${Y.type}`);const G=Y.source;G&&"string"==typeof G&&($+=G.length)}}}return{mode:h,indent:g,chomp:x,comment:Z,length:$}}(s,i,o);if(!c)return{value:"",type:null,comment:"",range:[a,a,a]};const h=">"===c.mode?le.BLOCK_FOLDED:le.BLOCK_LITERAL,g=s.source?function tr(s){const i=s.split(/\n( *)/),o=i[0],a=o.match(/^( *)/),h=[a&&a[1]?[a[1],o.slice(a[1].length)]:["",o]];for(let g=1;g<i.length;g+=2)h.push([i[g],i[g+1]]);return h}(s.source):[];let x=g.length;for(let G=g.length-1;G>=0;--G){const z=g[G][1];if(""!==z&&"\r"!==z)break;x=G}if(!s.source||0===x){const G="+"===c.chomp?g.map(V=>V[0]).join("\n"):"";let z=a+c.length;return s.source&&(z+=s.source.length),{value:G,type:h,comment:c.comment,range:[a,z,z]}}let A=s.indent+c.indent,I=s.offset+c.length,Z=0;for(let G=0;G<x;++G){const[z,V]=g[G];if(""!==V&&"\r"!==V){if(z.length<A){const fe="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";o(I+z.length,"MISSING_CHAR",fe)}0===c.indent&&(A=z.length),Z=G;break}0===c.indent&&z.length>A&&(A=z.length),I+=z.length+V.length+1}let $="",F="",Y=!1;for(let G=0;G<Z;++G)$+=g[G][0].slice(A)+"\n";for(let G=Z;G<x;++G){let[z,V]=g[G];I+=z.length+V.length+1;const fe="\r"===V[V.length-1];if(fe&&(V=V.slice(0,-1)),V&&z.length<A){const se="Block scalar lines must not be less indented than their "+(c.indent?"explicit indentation indicator":"first line");o(I-V.length-(fe?2:1),"BAD_INDENT",se),z=""}h===le.BLOCK_LITERAL?($+=F+z.slice(A)+V,F="\n"):z.length>A||"\t"===V[0]?(" "===F?F="\n":!Y&&"\n"===F&&(F="\n\n"),$+=F+z.slice(A)+V,F="\n",Y=!0):""===V?"\n"===F?$+="\n":F="\n":($+=F+V,F=" ",Y=!1)}switch(c.chomp){case"-":break;case"+":for(let G=x;G<g.length;++G)$+="\n"+g[G][0].slice(A);"\n"!==$[$.length-1]&&($+="\n");break;default:$+="\n"}const he=a+c.length+s.source.length;return{value:$,type:h,comment:c.comment,range:[a,he,he]}}function nr(s,i,o){const{offset:a,type:c,source:h,end:g}=s;let x,A;const I=(F,Y,he)=>o(a+F,Y,he);switch(c){case"scalar":x=le.PLAIN,A=function Cr(s,i){let o="";switch(s[0]){case"\t":o="Plain value cannot start with a tab character";break;case"|":case">":o=`Plain value cannot start with block scalar indicator ${s[0]}`;break;case"@":case"`":o=`Plain value cannot start with reserved character ${s[0]}`}return o&&i(0,"BAD_SCALAR_START",o),Ue(s)}(h,I);break;case"single-quoted-scalar":x=le.QUOTE_SINGLE,A=function Je(s,i){return("'"!==s[s.length-1]||1===s.length)&&i(s.length,"MISSING_CHAR","Missing closing 'quote"),Ue(s.slice(1,-1)).replace(/''/g,"'")}(h,I);break;case"double-quoted-scalar":x=le.QUOTE_DOUBLE,A=function jo(s,i){let o="";for(let a=1;a<s.length-1;++a){const c=s[a];if("\r"!==c||"\n"!==s[a+1])if("\n"===c){const{fold:h,offset:g}=Vo(s,a);o+=h,a=g}else if("\\"===c){let h=s[++a];const g=zo[h];if(g)o+=g;else if("\n"===h)for(h=s[a+1];" "===h||"\t"===h;)h=s[1+ ++a];else if("x"===h||"u"===h||"U"===h){const x={x:2,u:4,U:8}[h];o+=Xo(s,a+1,x,i),a+=x}else{const x=s.substr(a-1,2);i(a-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${x}`),o+=x}}else if(" "===c||"\t"===c){const h=a;let g=s[a+1];for(;" "===g||"\t"===g;)g=s[1+ ++a];"\n"!==g&&(o+=a>h?s.slice(h,a+1):c)}else o+=c}return('"'!==s[s.length-1]||1===s.length)&&i(s.length,"MISSING_CHAR",'Missing closing "quote'),o}(h,I);break;default:return o(s,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${c}`),{value:"",type:null,comment:"",range:[a,a+h.length,a+h.length]}}const Z=a+h.length,$=H(g,Z,i,o);return{value:A,type:x,comment:$.comment,range:[a,Z,$.offset]}}function Ue(s){let i,o;try{i=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),o=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(A){i=/(.*?)[ \t]*\r?\n/ys,o=/[ \t]*(.*?)[ \t]*\r?\n/ys}let a=i.exec(s);if(!a)return s;let c=a[1],h=" ",g=i.lastIndex;for(o.lastIndex=g;a=o.exec(s);)""===a[1]?"\n"===h?c+=h:h="\n":(c+=h+a[1],h=" "),g=o.lastIndex;const x=/[ \t]*(.*)/ys;return x.lastIndex=g,a=x.exec(s),c+h+(a&&a[1]||"")}function Vo(s,i){let o="",a=s[i+1];for(;!(" "!==a&&"\t"!==a&&"\n"!==a&&"\r"!==a||"\r"===a&&"\n"!==s[i+2]);)"\n"===a&&(o+="\n"),a=s[(i+=1)+1];return o||(o=" "),{fold:o,offset:i}}const zo={0:"\0",a:"\x07",b:"\b",e:"\x1b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"\x85",_:"\xa0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Xo(s,i,o,a){const c=s.substr(i,o),g=c.length===o&&/^[0-9a-fA-F]+$/.test(c)?parseInt(c,16):NaN;if(isNaN(g)){const x=s.substr(i-2,o+2);return a(i-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${x}`),x}return String.fromCodePoint(g)}function oo(s,i,o,a){const{value:c,type:h,comment:g,range:x}="block-scalar"===i.type?je(i,s.options.strict,a):nr(i,s.options.strict,a),A=o?s.directives.tagName(o.source,$=>a(o,"TAG_RESOLVE_FAILED",$)):null,I=o&&A?function es(s,i,o,a,c){var h;if("!"===o)return s[Se];const g=[];for(const A of s.tags)if(!A.collection&&A.tag===o){if(!A.default||!A.test)return A;g.push(A)}for(const A of g)if(null===(h=A.test)||void 0===h?void 0:h.test(i))return A;const x=s.knownTags[o];return x&&!x.collection?(s.tags.push(Object.assign({},x,{default:!1,test:void 0})),x):(c(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,"tag:yaml.org,2002:str"!==o),s[Se])}(s.schema,c,A,o,a):function so(s,i,o){var a;if(o)for(const c of s.tags)if(c.default&&(null===(a=c.test)||void 0===a?void 0:a.test(i)))return c;return s[Se]}(s.schema,c,"scalar"===i.type);let Z;try{const $=I.resolve(c,F=>a(o||i,"TAG_RESOLVE_FAILED",F),s.options);Z=J($)?$:new le($)}catch($){a(o||i,"TAG_RESOLVE_FAILED",$.message),Z=new le(c)}return Z.range=x,Z.source=c,h&&(Z.type=h),A&&(Z.tag=A),I.format&&(Z.format=I.format),g&&(Z.comment=g),Z}function ts(s,i,o){if(i){null===o&&(o=i.length);for(let a=o-1;a>=0;--a){let c=i[a];switch(c.type){case"space":case"comment":case"newline":s-=c.source.length;continue}for(c=i[++a];"space"===(null==c?void 0:c.type);)s+=c.source.length,c=i[++a];break}}return s}const Ct={composeNode:Zr,composeEmptyNode:Ui};function Zr(s,i,o,a){const{spaceBefore:c,comment:h,anchor:g,tag:x}=o;let A;switch(i.type){case"alias":A=function ao({options:s},{offset:i,source:o,end:a},c){const h=new bn(o.substring(1)),g=i+o.length,x=H(a,g,s.strict,c);return h.range=[i,g,x.offset],x.comment&&(h.comment=x.comment),h}(s,i,a),(g||x)&&a(i,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":A=oo(s,i,x,a),g&&(A.anchor=g.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":A=Rt(Ct,s,i,x,a),g&&(A.anchor=g.source.substring(1));break;default:throw console.log(i),new Error(`Unsupporten token type: ${i.type}`)}return c&&(A.spaceBefore=!0),h&&("scalar"===i.type&&""===i.source?A.comment=h:A.commentBefore=h),A}function Ui(s,i,o,a,{spaceBefore:c,comment:h,anchor:g,tag:x},A){const Z=oo(s,{type:"scalar",offset:ts(i,o,a),indent:-1,source:""},x,A);return g&&(Z.anchor=g.source.substring(1)),c&&(Z.spaceBefore=!0),h&&(Z.comment=h),Z}function Ot(s){if("number"==typeof s)return[s,s+1];if(Array.isArray(s))return 2===s.length?s:[s[0],s[1]];const{offset:i,source:o}=s;return[i,i+("string"==typeof o?o.length:1)]}function Ur(s){let i="",o=!1,a=!1;for(let c=0;c<s.length;++c){const h=s[c];switch(h[0]){case"#":i+=(""===i?"":a?"\n\n":"\n")+(h.substring(1)||" "),o=!0,a=!1;break;case"%":"#"!==s[c+1][0]&&(c+=1),o=!1;break;default:o||(a=!0),o=!1}}return{comment:i,afterEmptyLine:a}}class lo{constructor(i={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(o,a,c,h)=>{const g=Ot(o);h?this.warnings.push(new yr(g,a,c)):this.errors.push(new bi(g,a,c))},this.directives=new rt({version:i.version||Hn.version}),this.options=i}decorate(i,o){const{comment:a,afterEmptyLine:c}=Ur(this.prelude);if(a){const h=i.contents;if(o)i.comment=i.comment?`${i.comment}\n${a}`:a;else if(c||i.directives.marker||!h)i.commentBefore=a;else if(ie(h)&&!h.flow&&h.items.length>0){let g=h.items[0];k(g)&&(g=g.key);const x=g.commentBefore;g.commentBefore=x?`${a}\n${x}`:a}else{const g=h.commentBefore;h.commentBefore=g?`${a}\n${g}`:a}}o?(Array.prototype.push.apply(i.errors,this.errors),Array.prototype.push.apply(i.warnings,this.warnings)):(i.errors=this.errors,i.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Ur(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(i,o=!1,a=-1){for(const c of i)yield*this.next(c);yield*this.end(o,a)}*next(i){switch(i.type){case"directive":this.directives.add(i.source,(o,a,c)=>{const h=Ot(i);h[0]+=o,this.onError(h,"BAD_DIRECTIVE",a,c)}),this.prelude.push(i.source),this.atDirectives=!0;break;case"document":{const o=function Rr(s,i,{offset:o,start:a,value:c,end:h},g){const x=Object.assign({directives:i},s),A=new Pn(void 0,x),I={directives:A.directives,options:A.options,schema:A.schema},Z=Xt(a,{indicator:"doc-start",next:c||(null==h?void 0:h[0]),offset:o,onError:g,startOnNewline:!0});Z.found&&(A.directives.marker=!0,c&&("block-map"===c.type||"block-seq"===c.type)&&!Z.hasNewline&&g(Z.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),A.contents=c?Zr(I,c,Z,g):Ui(I,Z.end,a,null,Z,g);const $=A.contents.range[2],F=H(h,$,!1,g);return F.comment&&(A.comment=F.comment),A.range=[o,$,F.offset],A}(this.options,this.directives,i,this.onError);this.atDirectives&&!o.directives.marker&&this.onError(i,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(o,!1),this.doc&&(yield this.doc),this.doc=o,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(i.source);break;case"error":{const o=i.source?`${i.message}: ${JSON.stringify(i.source)}`:i.message,a=new bi(Ot(i),"UNEXPECTED_TOKEN",o);this.atDirectives||!this.doc?this.errors.push(a):this.doc.errors.push(a);break}case"doc-end":{if(!this.doc){const a="Unexpected doc-end without preceding document";this.errors.push(new bi(Ot(i),"UNEXPECTED_TOKEN",a));break}const o=H(i.end,i.offset+i.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),o.comment){const a=this.doc.comment;this.doc.comment=a?`${a}\n${o.comment}`:o.comment}this.doc.range[2]=o.offset;break}default:this.errors.push(new bi(Ot(i),"UNEXPECTED_TOKEN",`Unsupported token ${i.type}`))}}*end(i=!1,o=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(i){const a=Object.assign({directives:this.directives},this.options),c=new Pn(void 0,a);this.atDirectives&&this.onError(o,"MISSING_CHAR","Missing directives-end indicator line"),c.range=[0,o,o],this.decorate(c,!1),yield c}}}const Qt=Symbol("break visit"),os=Symbol("skip children"),Fr=Symbol("remove item");function en(s,i){"type"in s&&"document"===s.type&&(s={start:s.start,value:s.value}),ir(Object.freeze([]),s,i)}function ir(s,i,o){let a=o(i,s);if("symbol"==typeof a)return a;for(const c of["key","value"]){const h=i[c];if(h&&"items"in h){for(let g=0;g<h.items.length;++g){const x=ir(Object.freeze(s.concat([[c,g]])),h.items[g],o);if("number"==typeof x)g=x-1;else{if(x===Qt)return Qt;x===Fr&&(h.items.splice(g,1),g-=1)}}"function"==typeof a&&"key"===c&&(a=a(i,s))}}return"function"==typeof a?a(i,s):a}en.BREAK=Qt,en.SKIP=os,en.REMOVE=Fr,en.itemAtPath=(s,i)=>{let o=s;for(const[a,c]of i){const h=o&&o[a];if(!h||!("items"in h))return;o=h.items[c]}return o},en.parentCollection=(s,i)=>{const o=en.itemAtPath(s,i.slice(0,-1)),a=i[i.length-1][0],c=o&&o[a];if(c&&"items"in c)return c;throw new Error("Parent collection not found")};function an(s){switch(s){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Br=[",","[","]","{","}"],br=[" ",",","[","]","{","}","\n","\r","\t"],ui=s=>!s||br.includes(s);class as{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.next=null,this.pos=0}*lex(i,o=!1){i&&(this.buffer=this.buffer?this.buffer+i:i),this.atEnd=!o;let a=this.next||"stream";for(;a&&(o||this.hasChars(1));)a=yield*this.parseNext(a)}atLineEnd(){let i=this.pos,o=this.buffer[i];for(;" "===o||"\t"===o;)o=this.buffer[++i];return!o||"#"===o||"\n"===o||"\r"===o&&"\n"===this.buffer[i+1]}charAt(i){return this.buffer[this.pos+i]}continueScalar(i){let o=this.buffer[i];if(this.indentNext>0){let a=0;for(;" "===o;)o=this.buffer[++a+i];if("\r"===o){const c=this.buffer[a+i+1];if("\n"===c||!c&&!this.atEnd)return i+a+1}return"\n"===o||a>=this.indentNext||!o&&!this.atEnd?i+a:-1}if("-"===o||"."===o){const a=this.buffer.substr(i,3);if(("---"===a||"..."===a)&&an(this.buffer[i+3]))return-1}return i}getLine(){let i=this.buffer.indexOf("\n",this.pos);return-1===i?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[i-1]&&(i-=1),this.buffer.substring(this.pos,i))}hasChars(i){return this.pos+i<=this.buffer.length}setNext(i){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.next=i,null}peek(i){return this.buffer.substr(this.pos,i)}*parseNext(i){switch(i){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let i=this.getLine();if(null===i)return this.setNext("stream");if("\ufeff"===i[0]&&(yield*this.pushCount(1),i=i.substring(1)),"%"===i[0]){let o=i.length;const a=i.indexOf("#");if(-1!==a){const h=i[a-1];(" "===h||"\t"===h)&&(o=a-1)}for(;;){const h=i[o-1];if(" "!==h&&"\t"!==h)break;o-=1}const c=(yield*this.pushCount(o))+(yield*this.pushSpaces(!0));return yield*this.pushCount(i.length-c),this.pushNewline(),"stream"}if(this.atLineEnd()){const o=yield*this.pushSpaces(!0);return yield*this.pushCount(i.length-o),yield*this.pushNewline(),"stream"}return yield"\x02",yield*this.parseLineStart()}*parseLineStart(){const i=this.charAt(0);if(!i&&!this.atEnd)return this.setNext("line-start");if("-"===i||"."===i){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const o=this.peek(3);if("---"===o&&an(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===o&&an(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!an(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[i,o]=this.peek(2);if(!o&&!this.atEnd)return this.setNext("block-start");if(("-"===i||"?"===i||":"===i)&&an(o)){const a=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=a,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const i=this.getLine();if(null===i)return this.setNext("doc");let o=yield*this.pushIndicators();switch(i[o]){case"#":yield*this.pushCount(i.length-o);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(ui),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return o+=(yield*this.parseBlockScalarHeader()),o+=(yield*this.pushSpaces(!0)),yield*this.pushCount(i.length-o),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let i,o,a=-1;do{i=yield*this.pushNewline(),o=yield*this.pushSpaces(!0),i>0&&(this.indentValue=a=o)}while(i+o>0);const c=this.getLine();if(null===c)return this.setNext("flow");if((-1!==a&&a<this.indentNext||0===a&&(c.startsWith("---")||c.startsWith("..."))&&an(c[3]))&&(a!==this.indentNext-1||1!==this.flowLevel||"]"!==c[0]&&"}"!==c[0]))return this.flowLevel=0,yield"\x18",yield*this.parseLineStart();let h=0;for(;","===c[h];)h+=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));switch(h+=(yield*this.pushIndicators()),c[h]){case void 0:return"flow";case"#":return yield*this.pushCount(c.length-h),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(ui),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const g=this.charAt(1);if(this.flowKey||an(g)||","===g)return yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const i=this.charAt(0);let o=this.buffer.indexOf(i,this.pos+1);if("'"===i)for(;-1!==o&&"'"===this.buffer[o+1];)o=this.buffer.indexOf("'",o+2);else for(;-1!==o;){let c=0;for(;"\\"===this.buffer[o-1-c];)c+=1;if(c%2==0)break;o=this.buffer.indexOf('"',o+1)}let a=this.buffer.indexOf("\n",this.pos);if(-1!==a&&a<o){for(;-1!==a&&a<o;){const c=this.continueScalar(a+1);if(-1===c)break;a=this.buffer.indexOf("\n",c)}-1!==a&&a<o&&(o=a-1)}if(-1===o){if(!this.atEnd)return this.setNext("quoted-scalar");o=this.buffer.length}return yield*this.pushToIndex(o+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let i=this.pos;for(;;){const o=this.buffer[++i];if("+"===o)this.blockScalarKeep=!0;else if(o>"0"&&o<="9")this.blockScalarIndent=Number(o)-1;else if("-"!==o)break}return yield*this.pushUntil(o=>an(o)||"#"===o)}*parseBlockScalar(){let a,i=this.pos-1,o=0;e:for(let c=this.pos;a=this.buffer[c];++c)switch(a){case" ":o+=1;break;case"\n":i=c,o=0;break;case"\r":{const h=this.buffer[c+1];if(!h&&!this.atEnd)return this.setNext("block-scalar");if("\n"===h)break}default:break e}if(!a&&!this.atEnd)return this.setNext("block-scalar");if(o>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=o:this.indentNext+=this.blockScalarIndent;do{const c=this.continueScalar(i+1);if(-1===c)break;i=this.buffer.indexOf("\n",c)}while(-1!==i);if(-1===i){if(!this.atEnd)return this.setNext("block-scalar");i=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let c=i-1,h=this.buffer[c];for("\r"===h&&(h=this.buffer[--c]);" "===h||"\t"===h;)h=this.buffer[--c];if(!("\n"===h&&c>=this.pos))break;i=c}return yield"\x1f",yield*this.pushToIndex(i+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const i=this.flowLevel>0;let c,o=this.pos-1,a=this.pos-1;for(;c=this.buffer[++a];)if(":"===c){const h=this.buffer[a+1];if(an(h)||i&&","===h)break;o=a}else if(an(c)){const h=this.buffer[a+1];if("#"===h||i&&Br.includes(h))break;if("\r"===c&&("\n"===h?(a+=1,c="\n"):o=a),"\n"===c){const g=this.continueScalar(a+1);if(-1===g)break;a=Math.max(a,g-2)}}else{if(i&&Br.includes(c))break;o=a}return c||this.atEnd?(yield"\x1f",yield*this.pushToIndex(o+1,!0),i?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(i){return i>0?(yield this.buffer.substr(this.pos,i),this.pos+=i,i):0}*pushToIndex(i,o){const a=this.buffer.slice(this.pos,i);return a?(yield a,this.pos+=a.length,a.length):(o&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":if("<"===this.charAt(1))return(yield*this.pushVerbatimTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(ui))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(an(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushVerbatimTag(){let i=this.pos+2,o=this.buffer[i];for(;!an(o)&&">"!==o;)o=this.buffer[++i];return yield*this.pushToIndex(">"===o?i+1:i,!1)}*pushNewline(){const i=this.buffer[this.pos];return"\n"===i?yield*this.pushCount(1):"\r"===i&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(i){let a,o=this.pos-1;do{a=this.buffer[++o]}while(" "===a||i&&"\t"===a);const c=o-this.pos;return c>0&&(yield this.buffer.substr(this.pos,c),this.pos=o),c}*pushUntil(i){let o=this.pos,a=this.buffer[o];for(;!i(a);)a=this.buffer[++o];return yield*this.pushToIndex(o,!1)}}function _n(s,i){for(let o=0;o<s.length;++o)if(s[o].type===i)return!0;return!1}function wr(s){for(let i=0;i<s.length;++i)switch(s[i].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function xr(s){switch(null==s?void 0:s.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Fi(s){switch(s.type){case"document":return s.start;case"block-map":{const i=s.items[s.items.length-1];return i.sep||i.start}case"block-seq":return s.items[s.items.length-1].start;default:return[]}}function Bi(s){var i;if(0===s.length)return[];let o=s.length;e:for(;--o>=0;)switch(s[o].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===(null===(i=s[++o])||void 0===i?void 0:i.type););return s.splice(o,s.length)}function uo(s){if("flow-seq-start"===s.start.type)for(const i of s.items)i.sep&&!i.value&&!_n(i.start,"explicit-key-ind")&&!_n(i.sep,"map-value-ind")&&(i.key&&(i.value=i.key),delete i.key,xr(i.value)?i.value.end?Array.prototype.push.apply(i.value.end,i.sep):i.value.end=i.sep:Array.prototype.push.apply(i.start,i.sep),delete i.sep)}class Jr{constructor(i){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new as,this.onNewLine=i}*parse(i,o=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const a of this.lexer.lex(i,o))yield*this.next(a);o||(yield*this.end())}*next(i){if(this.source=i,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=i.length);const o=function ss(s){switch(s){case"\ufeff":return"byte-order-mark";case"\x02":return"doc-mode";case"\x18":return"flow-error-end";case"\x1f":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(s[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(i);if(o)if("scalar"===o)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=o,yield*this.step(),o){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+i.length);break;case"space":this.atNewLine&&" "===i[0]&&(this.indent+=i.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=i.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=i.length}else{const a=`Not a YAML token: ${i}`;yield*this.pop({type:"error",offset:this.offset,message:a,source:i}),this.offset+=i.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const i=this.peek(1);if("doc-end"!==this.type||i&&"doc-end"===i.type){if(!i)return yield*this.stream();switch(i.type){case"document":return yield*this.document(i);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(i);case"block-scalar":return yield*this.blockScalar(i);case"block-map":return yield*this.blockMap(i);case"block-seq":return yield*this.blockSequence(i);case"flow-collection":return yield*this.flowCollection(i);case"doc-end":return yield*this.documentEnd(i)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(i){return this.stack[this.stack.length-i]}*pop(i){const o=i||this.stack.pop();if(o)if(0===this.stack.length)yield o;else{const a=this.peek(1);switch(("block-scalar"===o.type||"flow-collection"===o.type)&&(o.indent="indent"in a?a.indent:-1),"flow-collection"===o.type&&uo(o),a.type){case"document":a.value=o;break;case"block-scalar":a.props.push(o);break;case"block-map":{const c=a.items[a.items.length-1];if(c.value)return a.items.push({start:[],key:o,sep:[]}),void(this.onKeyLine=!0);if(!c.sep)return Object.assign(c,{key:o,sep:[]}),void(this.onKeyLine=!_n(c.start,"explicit-key-ind"));c.value=o;break}case"block-seq":{const c=a.items[a.items.length-1];c.value?a.items.push({start:[],value:o}):c.value=o;break}case"flow-collection":{const c=a.items[a.items.length-1];return void(!c||c.value?a.items.push({start:[],key:o,sep:[]}):c.sep?c.value=o:Object.assign(c,{key:o,sep:[]}))}default:yield*this.pop(),yield*this.pop(o)}if(!("document"!==a.type&&"block-map"!==a.type&&"block-seq"!==a.type||"block-map"!==o.type&&"block-seq"!==o.type)){const c=o.items[o.items.length-1];c&&!c.sep&&!c.value&&c.start.length>0&&!wr(c.start)&&(0===o.indent||c.start.every(h=>"comment"!==h.type||h.indent<o.indent))&&("document"===a.type?a.end=c.start:a.items.push({start:c.start}),o.items.splice(-1,1))}}else{const a="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:a}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const i={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&i.start.push(this.sourceToken),void this.stack.push(i)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(i){if(i.value)return yield*this.lineEnd(i);switch(this.type){case"doc-start":return void(wr(i.start)?(yield*this.pop(),yield*this.step()):i.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void i.start.push(this.sourceToken)}const o=this.startBlockValue(i);o?this.stack.push(o):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(i){if("map-value-ind"===this.type){const a=Bi(Fi(this.peek(2)));let c;i.end?(c=i.end,c.push(this.sourceToken),delete i.end):c=[this.sourceToken];const h={type:"block-map",offset:i.offset,indent:i.indent,items:[{start:a,key:i,sep:c}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=h}else yield*this.lineEnd(i)}*blockScalar(i){switch(this.type){case"space":case"comment":case"newline":return void i.props.push(this.sourceToken);case"scalar":if(i.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let o=this.source.indexOf("\n")+1;for(;0!==o;)this.onNewLine(this.offset+o),o=this.source.indexOf("\n",o)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(i){var o;const a=i.items[i.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,a.value){const c="end"in a.value?a.value.end:void 0,h=Array.isArray(c)?c[c.length-1]:void 0;"comment"===(null==h?void 0:h.type)?null==c||c.push(this.sourceToken):i.items.push({start:[this.sourceToken]})}else a.sep?a.sep.push(this.sourceToken):a.start.push(this.sourceToken);return;case"space":case"comment":if(a.value)i.items.push({start:[this.sourceToken]});else if(a.sep)a.sep.push(this.sourceToken);else{if(this.atIndentedComment(a.start,i.indent)){const c=i.items[i.items.length-2],h=null===(o=null==c?void 0:c.value)||void 0===o?void 0:o.end;if(Array.isArray(h))return Array.prototype.push.apply(h,a.start),h.push(this.sourceToken),void i.items.pop()}a.start.push(this.sourceToken)}return}if(this.indent>=i.indent){const c=!this.onKeyLine&&this.indent===i.indent&&(a.sep||wr(a.start));switch(this.type){case"anchor":case"tag":return void(c||a.value?(i.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):a.sep?a.sep.push(this.sourceToken):a.start.push(this.sourceToken));case"explicit-key-ind":return a.sep||_n(a.start,"explicit-key-ind")?c||a.value?i.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):a.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(a.sep)if(a.value||c&&!_n(a.start,"explicit-key-ind"))i.items.push({start:[],key:null,sep:[this.sourceToken]});else if(_n(a.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(_n(a.start,"explicit-key-ind")&&xr(a.key)&&!_n(a.sep,"newline")){const h=Bi(a.start),g=a.key,x=a.sep;x.push(this.sourceToken),delete a.key,delete a.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:h,key:g,sep:x}]})}else a.sep.push(this.sourceToken);else Object.assign(a,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const h=this.flowScalar(this.type);return void(c||a.value?(i.items.push({start:[],key:h,sep:[]}),this.onKeyLine=!0):a.sep?this.stack.push(h):(Object.assign(a,{key:h,sep:[]}),this.onKeyLine=!0))}default:{const h=this.startBlockValue(i);if(h)return c&&"block-seq"!==h.type&&_n(a.start,"explicit-key-ind")&&i.items.push({start:[]}),void this.stack.push(h)}}}yield*this.pop(),yield*this.step()}*blockSequence(i){var o;const a=i.items[i.items.length-1];switch(this.type){case"newline":if(a.value){const c="end"in a.value?a.value.end:void 0,h=Array.isArray(c)?c[c.length-1]:void 0;"comment"===(null==h?void 0:h.type)?null==c||c.push(this.sourceToken):i.items.push({start:[this.sourceToken]})}else a.start.push(this.sourceToken);return;case"space":case"comment":if(a.value)i.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(a.start,i.indent)){const c=i.items[i.items.length-2],h=null===(o=null==c?void 0:c.value)||void 0===o?void 0:o.end;if(Array.isArray(h))return Array.prototype.push.apply(h,a.start),h.push(this.sourceToken),void i.items.pop()}a.start.push(this.sourceToken)}return;case"anchor":case"tag":if(a.value||this.indent<=i.indent)break;return void a.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==i.indent)break;return void(a.value||_n(a.start,"seq-item-ind")?i.items.push({start:[this.sourceToken]}):a.start.push(this.sourceToken))}if(this.indent>i.indent){const c=this.startBlockValue(i);if(c)return void this.stack.push(c)}yield*this.pop(),yield*this.step()}*flowCollection(i){const o=i.items[i.items.length-1];if("flow-error-end"===this.type){let a;do{yield*this.pop(),a=this.peek(1)}while(a&&"flow-collection"===a.type)}else if(0===i.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!o||o.sep?i.items.push({start:[this.sourceToken]}):o.start.push(this.sourceToken));case"map-value-ind":return void(!o||o.value?i.items.push({start:[],key:null,sep:[this.sourceToken]}):o.sep?o.sep.push(this.sourceToken):Object.assign(o,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!o||o.value?i.items.push({start:[this.sourceToken]}):o.sep?o.sep.push(this.sourceToken):o.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const c=this.flowScalar(this.type);return void(!o||o.value?i.items.push({start:[],key:c,sep:[]}):o.sep?this.stack.push(c):Object.assign(o,{key:c,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void i.end.push(this.sourceToken)}const a=this.startBlockValue(i);a?this.stack.push(a):(yield*this.pop(),yield*this.step())}else{const a=this.peek(2);if("block-map"!==a.type||"map-value-ind"!==this.type&&("newline"!==this.type||a.items[a.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==a.type){const h=Bi(Fi(a));uo(i);const g=i.end.splice(1,i.end.length);g.push(this.sourceToken);const x={type:"block-map",offset:i.offset,indent:i.indent,items:[{start:h,key:i,sep:g}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=x}else yield*this.lineEnd(i);else yield*this.pop(),yield*this.step()}}flowScalar(i){if(this.onNewLine){let o=this.source.indexOf("\n")+1;for(;0!==o;)this.onNewLine(this.offset+o),o=this.source.indexOf("\n",o)+1}return{type:i,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(i){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const a=Bi(Fi(i));return a.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a}]}}case"map-value-ind":{this.onKeyLine=!0;const a=Bi(Fi(i));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(i,o){return!("comment"!==this.type||this.indent<=o)&&i.every(a=>"newline"===a.type||"space"===a.type)}*documentEnd(i){"doc-mode"!==this.type&&(i.end?i.end.push(this.sourceToken):i.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(i){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:i.end?i.end.push(this.sourceToken):i.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}class Hr{constructor(){this.lineStarts=[],this.addNewLine=i=>this.lineStarts.push(i),this.linePos=i=>{let o=0,a=this.lineStarts.length;for(;o<a;){const h=o+a>>1;this.lineStarts[h]<i?o=h+1:a=h}if(this.lineStarts[o]===i)return{line:o+1,col:1};if(0===o)return{line:0,col:i};return{line:o,col:i-this.lineStarts[o-1]+1}}}}function ho(s){const i=!s||!1!==s.prettyErrors;return{lineCounter:s&&s.lineCounter||i&&new Hr||null,prettyErrors:i}}function $r(s,i,o){let a;"function"==typeof i?a=i:void 0===o&&i&&"object"==typeof i&&(o=i);const c=function tn(s,i={}){const{lineCounter:o,prettyErrors:a}=ho(i),c=new Jr(null==o?void 0:o.addNewLine),h=new lo(i);let g=null;for(const x of h.compose(c.parse(s),!0,s.length))if(g){if("silent"!==g.options.logLevel){g.errors.push(new bi(x.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else g=x;return a&&o&&(g.errors.forEach(er(s,o)),g.warnings.forEach(er(s,o))),g}(s,o);if(!c)return null;if(c.warnings.forEach(h=>Ii(c.options.logLevel,h)),c.errors.length>0){if("silent"!==c.options.logLevel)throw c.errors[0];c.errors=[]}return c.toJS(Object.assign({reviver:a},o))}function or(s,i,o){let a=null;if("function"==typeof i||Array.isArray(i)?a=i:void 0===o&&i&&(o=i),"string"==typeof o&&(o=o.length),"number"==typeof o){const c=Math.round(o);o=c<1?void 0:c>8?{indent:8}:{indent:c}}if(void 0===s){const{keepUndefined:c}=o||i||{};if(!c)return}return new Pn(s,a,o).toString(o)}}}]);
//# sourceMappingURL=496.1dd0385103585107.js.map