"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[958],{6958:(E,g,i)=>{i.r(g),i.d(g,{DevModule:()=>d});var y=i(6362),f=i(587),v=i(3992),A=i(138),C=i(9481),b=i(6269),T=i(5839),Z=i(7934),t=i(3184),S=i(5758);class k{constructor(o,e){this._document=e;const n=this._textarea=this._document.createElement("textarea"),r=n.style;r.position="fixed",r.top=r.opacity="0",r.left="-999em",n.setAttribute("aria-hidden","true"),n.value=o,this._document.body.appendChild(n)}copy(){const o=this._textarea;let e=!1;try{if(o){const n=this._document.activeElement;o.select(),o.setSelectionRange(0,o.value.length),e=this._document.execCommand("copy"),n&&n.focus()}}catch(n){}return e}destroy(){const o=this._textarea;o&&(o.remove(),this._textarea=void 0)}}class c{constructor(o){this._document=o}copy(o){const e=this.beginCopy(o),n=e.copy();return e.destroy(),n}beginCopy(o){return new k(o,this._document)}}c.\u0275fac=function(o){return new(o||c)(t.LFG(y.K0))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});const D=new t.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");class m{constructor(o,e,n){this._clipboard=o,this._ngZone=e,this.text="",this.attempts=1,this.copied=new t.vpe,this._pending=new Set,n&&null!=n.attempts&&(this.attempts=n.attempts)}copy(o=this.attempts){if(o>1){let e=o;const n=this._clipboard.beginCopy(this.text);this._pending.add(n);const r=()=>{const p=n.copy();p||!--e||this._destroyed?(this._currentTimeout=null,this._pending.delete(n),n.destroy(),this.copied.emit(p)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(r,1))};r()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(o=>o.destroy()),this._pending.clear(),this._destroyed=!0}}m.\u0275fac=function(o){return new(o||m)(t.Y36(c),t.Y36(t.R0b),t.Y36(D,8))},m.\u0275dir=t.lG2({type:m,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(o,e){1&o&&t.NdJ("click",function(){return e.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}});class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({});var J=i(2528),O=i(1961),_=i(9975),M=i(6225),L=i(7317),x=i(89);class u{constructor(o,e,n){this.dialog=o,this.clipboard=e,this.snackBar=n,this.localSavedAutomation=[]}ngOnInit(){this.loadLocalAutomation()}loadLocalAutomation(){const o=JSON.parse(localStorage.getItem("dev-automation-editor"));this.localSavedAutomation=o||[]}saveLocalAutomation(){localStorage.setItem("dev-automation-editor",JSON.stringify(this.localSavedAutomation))}clearLocalAutomation(){localStorage.removeItem("dev-automation-editor"),this.localSavedAutomation=[]}keyEvent(o){if(o.ctrlKey||o.metaKey)switch(o.key){case"i":o.preventDefault(),this.beginJSONImport();break;case"e":case"y":o.preventDefault(),this.copyText(this.getLocalAutomationYaml(),"YAML");break;case"j":o.preventDefault(),this.copyText(this.getLocalAutomationJson(),"JSON")}}getLocalAutomationYaml(){return(0,b.Pz)(this.localSavedAutomation)}getLocalAutomationJson(){return JSON.stringify(this.localSavedAutomation,null,2)}beginJSONImport(){this.dialog.open(Z.Q,{width:"60%",data:{yaml:!0}}).afterClosed().subscribe(e=>{e&&(this.localSavedAutomation=e,this.saveLocalAutomation())})}beginJSONExport(o,e=!0){this.dialog.open(T.m,{data:{name:"Automation",data:o,yaml:e},width:"60%"})}copyText(o,e=""){const n=this.clipboard.beginCopy(o);let r=3;const p=()=>{const h=n.copy();!h&&--r?setTimeout(p):h?(n.destroy(),this.snackBar.open(`Successfully copied ${e}`)):n.destroy()};p()}}u.\u0275fac=function(o){return new(o||u)(t.Y36(S.uw),t.Y36(c),t.Y36(J.ux))},u.\u0275cmp=t.Xpm({type:u,selectors:[["avr-automation-editor-dev"]],hostBindings:function(o,e){1&o&&t.NdJ("keydown",function(r){return e.keyEvent(r)},!1,t.Jf7)},decls:34,vars:3,consts:[[1,"container"],[1,"mat-small"],[3,"automation","changed"],[1,"button-group"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary","matTooltip","Note that this will not be importable in the Attack or Spell editors.",3,"click"],[1,"text-monospace",3,"innerHTML"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"h1"),t._uU(3,"Automation Editor Playground"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Build automation without tying it to a character or spell here."),t.qZA(),t.TgZ(6,"p",1),t._uU(7," Keyboard shortcuts: "),t.TgZ(8,"kbd"),t._uU(9,"Ctrl-I"),t.qZA(),t._uU(10," to import, "),t.TgZ(11,"kbd"),t._uU(12,"Ctrl-E"),t.qZA(),t._uU(13," to copy YAML to clipboard, "),t.TgZ(14,"kbd"),t._uU(15,"Ctrl-J"),t.qZA(),t._uU(16," to copy JSON to clipboard "),t.qZA(),t._UZ(17,"mat-divider"),t.TgZ(18,"avr-automation-editor",2),t.NdJ("changed",function(){return e.saveLocalAutomation()}),t.qZA(),t.TgZ(19,"div",3),t.TgZ(20,"button",4),t.NdJ("click",function(){return e.clearLocalAutomation()}),t._uU(21,"Clear"),t.qZA(),t.TgZ(22,"button",5),t.NdJ("click",function(){return e.beginJSONImport()}),t._uU(23,"Import"),t.qZA(),t.TgZ(24,"button",6),t.NdJ("click",function(){return e.beginJSONExport(e.localSavedAutomation)}),t._uU(25," Export "),t.qZA(),t.TgZ(26,"button",6),t.NdJ("click",function(){return e.beginJSONExport(e.localSavedAutomation,!1)}),t._uU(27," Export JSON "),t.qZA(),t.qZA(),t.TgZ(28,"h3"),t._uU(29,"YAML"),t.qZA(),t._UZ(30,"pre",7),t.TgZ(31,"h3"),t._uU(32,"JSON"),t.qZA(),t._UZ(33,"pre",7),t.qZA(),t.qZA()),2&o&&(t.xp6(18),t.Q6J("automation",e.localSavedAutomation),t.xp6(12),t.Q6J("innerHTML",e.getLocalAutomationYaml(),t.oJD),t.xp6(3),t.Q6J("innerHTML",e.getLocalAutomationJson(),t.oJD))},directives:[O.a8,_.d,M._,L.lW,x.gM],styles:[".container[_ngcontent-%COMP%]{padding:8px}.button-group[_ngcontent-%COMP%]{margin-top:8px}.button-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:0 4px}\n/*# sourceMappingURL=automation-editor-dev.component.css.map*/"]});const N=[{path:"automation",component:u}];class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[C.Bz.forChild(N)],C.Bz]});class d{}d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[[y.ez,v.q,f.u5,s,A.l]]})}}]);
//# sourceMappingURL=958.d8cbf1a82a1dd651.js.map