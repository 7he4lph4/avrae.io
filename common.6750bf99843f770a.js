"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[592],{7597:(g,d,o)=>{o.d(d,{a:()=>r});var c=o(8784),m=o(4139),s=o(7418),u=o(6942),C=o(4043),v=o(4766),e=(o(2251),o(6488)),$=o(3184);const p=`${v.N.apiURL}/workshop`;class r{constructor(t){this.http=t,this.personalSubscribedIdsInflight=!1}createCollection(t,i,n){return this.http.post(`${p}/collection`,{name:t,description:i,image:n},(0,e.vC)()).pipe((0,s.K)(e.Vm))}getCollection(t){return this.http.get(`${p}/collection/${t}`).pipe((0,s.K)(e.Vm))}getCollectionFull(t){return this.http.get(`${p}/collection/${t}/full`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getCollectionsBatched(t){return this.http.get(`${p}/collection/batch`,(0,e.vC)({params:{c:t.join(",")}})).pipe((0,s.K)(e.Vm))}deleteCollection(t){return this.http.delete(`${p}/collection/${t}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}editCollection(t,i,n,l){return this.http.patch(`${p}/collection/${t}`,{name:i,description:n,image:l},(0,e.vC)()).pipe((0,s.K)(e.Vm))}editCollectionState(t,i){return this.http.patch(`${p}/collection/${t}/state`,{state:i},(0,e.vC)()).pipe((0,s.K)(e.Vm))}addCollectionEditor(t,i){return this.http.put(`${p}/collection/${t}/editor/${i}`,null,(0,e.vC)()).pipe((0,s.K)(e.Vm))}removeCollectionEditor(t,i){return this.http.delete(`${p}/collection/${t}/editor/${i}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getCollectionEditors(t){return this.http.get(`${p}/collection/${t}/editors`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}addCollectionTag(t,i){return this.http.post(`${p}/collection/${t}/tag`,{tag:i},(0,e.vC)()).pipe((0,s.K)(e.Vm))}removeCollectionTag(t,i){return this.http.delete(`${p}/collection/${t}/tag`,(0,e.vC)({body:{tag:i}})).pipe((0,s.K)(e.Vm))}createAlias(t,i,n){return this.http.post(`${p}/collection/${t}/alias`,{name:i,docs:n},(0,e.vC)()).pipe((0,s.K)(e.Vm))}createSubalias(t,i,n){return this.http.post(`${p}/alias/${t}/alias`,{name:i,docs:n},(0,e.vC)()).pipe((0,s.K)(e.Vm))}getAlias(t){return this.http.get(`${p}/alias/${t}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}editAlias(t,i,n){return this.http.patch(`${p}/alias/${t}`,{name:i,docs:n},(0,e.vC)()).pipe((0,s.K)(e.Vm))}deleteAlias(t){return this.http.delete(`${p}/alias/${t}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getAliasCodeVersions(t,i=0,n=25){return this.http.get(`${p}/alias/${t}/code`,(0,e.vC)({params:{skip:i,limit:n}})).pipe((0,s.K)(e.Vm))}createAliasCodeVersion(t,i){return this.http.post(`${p}/alias/${t}/code`,{content:i},(0,e.vC)()).pipe((0,s.K)(e.Vm))}setActiveAliasCodeVersion(t,i){return this.http.put(`${p}/alias/${t}/active-code`,{version:i},(0,e.vC)()).pipe((0,s.K)(e.Vm))}addAliasEntitlement(t,i){return this.http.post(`${p}/alias/${t}/entitlement`,{entity_type:i.entitlement_entity_type,entity_id:i.entitlement_entity_id},(0,e.vC)()).pipe((0,s.K)(e.Vm))}removeAliasEntitlement(t,i){return this.http.delete(`${p}/alias/${t}/entitlement`,(0,e.vC)({body:{entity_type:i.entity_type,entity_id:i.entity_id}})).pipe((0,s.K)(e.Vm))}createSnippet(t,i,n){return this.http.post(`${p}/collection/${t}/snippet`,{name:i,docs:n},(0,e.vC)()).pipe((0,s.K)(e.Vm))}getSnippet(t){return this.http.get(`${p}/snippet/${t}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}editSnippet(t,i,n){return this.http.patch(`${p}/snippet/${t}`,{name:i,docs:n},(0,e.vC)()).pipe((0,s.K)(e.Vm))}deleteSnippet(t){return this.http.delete(`${p}/snippet/${t}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getSnippetCodeVersions(t,i=0,n=25){return this.http.get(`${p}/snippet/${t}/code`,(0,e.vC)({params:{skip:i,limit:n}})).pipe((0,s.K)(e.Vm))}createSnippetCodeVersion(t,i){return this.http.post(`${p}/snippet/${t}/code`,{content:i},(0,e.vC)()).pipe((0,s.K)(e.Vm))}setActiveSnippetCodeVersion(t,i){return this.http.put(`${p}/snippet/${t}/active-code`,{version:i},(0,e.vC)()).pipe((0,s.K)(e.Vm))}addSnippetEntitlement(t,i){return this.http.post(`${p}/snippet/${t}/entitlement`,{entity_type:i.entitlement_entity_type,entity_id:i.entitlement_entity_id},(0,e.vC)()).pipe((0,s.K)(e.Vm))}removeSnippetEntitlement(t,i){return this.http.delete(`${p}/snippet/${t}/entitlement`,(0,e.vC)({body:{entity_type:i.entity_type,entity_id:i.entity_id}})).pipe((0,s.K)(e.Vm))}personalSubscribe(t,i=null){let n;return n=null===i?{alias_bindings:null,snippet_bindings:null}:i,this.http.put(`${p}/collection/${t}/subscription/me`,n,(0,e.vC)()).pipe((0,s.K)(e.Vm)).pipe((0,u.U)(l=>(l.success&&void 0!==this.personalSubscribedIds&&this.personalSubscribedIds.push(t),l)))}personalUnsubscribe(t){return this.http.delete(`${p}/collection/${t}/subscription/me`,(0,e.vC)()).pipe((0,s.K)(e.Vm)).pipe((0,u.U)(i=>(i.success&&void 0!==this.personalSubscribedIds&&this.personalSubscribedIds.splice(this.personalSubscribedIds.indexOf(t),1),i)))}getMySubscription(t){return this.http.get(`${p}/collection/${t}/subscription/me`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}guildSubscribe(t,i,n=null){let l;return l=null===n?{alias_bindings:null,snippet_bindings:null}:n,this.http.put(`${p}/collection/${t}/subscription/${i}`,l,(0,e.vC)()).pipe((0,s.K)(e.Vm))}guildUnsubscribe(t,i){return this.http.delete(`${p}/collection/${t}/subscription/${i}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getGuildSubscription(t,i){return this.http.get(`${p}/collection/${t}/subscription/${i}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getMySubscriptions(){return this.http.get(`${p}/subscribed/me`,(0,e.vC)()).pipe((0,s.K)(e.Vm)).pipe((0,u.U)(t=>(t.success&&(this.personalSubscribedIds=t.data),t)))}getGuildSubscriptions(t){return this.http.get(`${p}/subscribed/${t}`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}loadPersonalSubscribedIds(){void 0!==this.personalSubscribedIds||this.personalSubscribedIdsInflight||(this.personalSubscribedIdsInflight=!0,this.getMySubscriptions().subscribe())}getWorkshopExplore(t="popular-1w",i=null,n=null,l=1){let a=new c.LE({fromObject:{order:t,page:l.toString()}});return i&&i.length&&(a=a.append("tags",i.join(","))),n&&(a=a.append("q",n)),this.http.get(`${p}/explore`,(0,e.vC)({params:a})).pipe((0,s.K)(e.Vm))}getTags(){if(this.tags)return this.tags;const t=this.http.get(`${p}/tags`,(0,e.vC)()).pipe((0,C.B)()).pipe((0,s.K)(e.Vm));return this.tags=t,t.subscribe(i=>this.tags=(0,m.of)(i)),t}getOwnedCollectionIds(){return this.http.get(`${p}/owned`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getEditableCollectionIds(){return this.http.get(`${p}/editable`,(0,e.vC)()).pipe((0,s.K)(e.Vm))}getGuildPermissionCheck(t){return this.http.get(`${p}/guild-check`,(0,e.vC)({params:{g:t}})).pipe((0,s.K)(e.Vm))}}r.\u0275fac=function(t){return new(t||r)($.LFG(c.eN))},r.\u0275prov=$.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},2251:(g,d,o)=>{var c,t,h;o.d(d,{BL:()=>c,v$:()=>h}),(t=c||(c={})).PRIVATE="PRIVATE",t.UNLISTED="UNLISTED",t.PUBLISHED="PUBLISHED";!function(t){t.ALIAS="ALIAS",t.SNIPPET="SNIPPET",t.SUBALIAS="SUBALIAS",t.SUBCOMMAND="SUBALIAS"}(h||(h={}))}}]);
//# sourceMappingURL=common.6750bf99843f770a.js.map