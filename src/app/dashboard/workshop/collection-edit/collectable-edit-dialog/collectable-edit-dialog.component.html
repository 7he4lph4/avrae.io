<h1 mat-dialog-title>Editing {{collectable.name}}...</h1>
<div mat-dialog-content class="mat-typography">
  <p>
    You can edit the collectible's name, documentation, licenses, and code here.
  </p>

  <!-- name, description -->
  <mat-form-field>
    <mat-label>Name</mat-label>
    <input matInput [(ngModel)]="name">
    <mat-hint>This won't change the name of the item for current subscribers.</mat-hint>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Documentation (Markdown Supported)</mat-label>
    <textarea matInput [(ngModel)]="docs" mat-autosize></textarea>
    <mat-hint *ngIf="alias">This will appear in your alias' help command.</mat-hint>
  </mat-form-field>

  <mat-divider></mat-divider>

  <!-- code versions -->
  <div class="section">
    <p>
      You can view the code version and set the active code version here. To edit the code, create a new code version.
      It is recommended to test code in a personal alias before publishing a code version, as code versions cannot
      be edited or deleted.
    </p>
    <div class="code-versions-container ignore-theme">
      <div class="code-editor">
        code editor
      </div>
      <div class="code-versions-list">
        <mat-action-list>
          <button mat-list-item (click)="onCreateCodeVersion()" [class.active]="selectedCodeVersionIsNew">
            Create New Version
          </button>
          <button mat-list-item *ngFor="let codeVersion of getSortedVersions()" class="ignore-theme"
                  (click)="onViewCodeVersion(codeVersion)" [class.active]="selectedCodeVersion === codeVersion">
            <p matLine>
              Version {{codeVersion.version}}
              <em *ngIf="codeVersion.is_current"> (active)</em>
            </p>
            <p matLine>{{codeVersion.created_at | date}}</p>
          </button>
        </mat-action-list>
      </div>
    </div>
  </div>

  <mat-divider></mat-divider>

  <!-- entitlements -->
  <div class="section">
    entitlements
  </div>

  <mat-divider></mat-divider>

  <!-- errors -->
  <p class="mat-error" *ngIf="error">
    {{error}}
  </p>
</div>
<div mat-dialog-actions>
  <button mat-flat-button mat-dialog-close>Cancel</button>
  <button mat-flat-button (click)="onSave()" color="primary">Save</button>
  <mat-spinner *ngIf="loading" [diameter]="24"></mat-spinner>
  <span class="toolbar-spacer"></span>
  <button mat-flat-button (click)="onDelete()" color="warn"
          *ngIf="collection.publish_state !== PublicationState.PUBLISHED || parent">
    Delete
  </button>
  <div *ngIf="collection.publish_state === PublicationState.PUBLISHED && !parent"
       matTooltip="You cannot delete a top-level item of a published collection.">
    <button mat-flat-button disabled color="warn">Delete</button>
  </div>
</div>
